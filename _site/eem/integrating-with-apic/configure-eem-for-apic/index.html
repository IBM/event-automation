<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Configure an Event Endpoint Management Manager as an Event Gateway Service - IBM Event Automation</title>
<meta name="description" content="Configure an Event Endpoint Management Manager as an Event Gateway Service.">

<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="IBM Event Automation">
<meta property="og:url" content="http://localhost:4000/event-automation/eem/integrating-with-apic/configure-eem-for-apic/" />
<meta property="og:title" content="Endpoint Management | Configure an Event Endpoint Management Manager as an Event Gateway Service" />
<meta property="og:description" content="Configure an Event Endpoint Management Manager as an Event Gateway Service." />

<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="IBM Event Automation | Configure an Event Endpoint Management Manager as an Event Gateway Service" />




  <meta property="og:description" content="Configure an Event Endpoint Management Manager as an Event Gateway Service.">



  <meta property="og:image" content="http://localhost:4000/event-automation/assets/siteMeta/appIcon_og_fb.png">
  <meta name="twitter:image" content="http://localhost:4000/event-automation/assets/siteMeta/appIcon_og_square.png">



  <meta property="article:published_time" content="2023-06-28T12:13:19-04:00">






<link rel="canonical" href="http://localhost:4000/event-automation/eem/integrating-with-apic/configure-eem-for-apic/">





  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "http://localhost:4000/event-automation",
      "logo": "http://localhost:4000/event-automation/assets/siteMeta/appIcon_og_fb.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": null,
      "url": "http://localhost:4000/event-automation",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/event-automation/feed.xml" type="application/atom+xml" rel="alternate" title="IBM Event Automation Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/event-automation/assets/css/main.css">



<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<link rel="apple-touch-icon" sizes="180x180" href="http://localhost:4000/event-automation/assets/siteMeta/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-16x16.png">
<link rel="manifest" href="http://localhost:4000/event-automation/assets/siteMeta/site.webmanifest">
<link rel="mask-icon" href="http://localhost:4000/event-automation/assets/siteMeta/safari-pinned-tab.svg" color="#000000">
<link rel="shortcut icon" href="http://localhost:4000/event-automation/assets/siteMeta/favicon.ico">
<link rel="shortcut icon" type="image/png" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-16x16.png"/>
<link rel="shortcut icon" type="image/png" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-32x32.png"/>
<meta name="msapplication-TileColor" content="#000000">
<meta name="msapplication-config" content="http://localhost:4000/event-automation/assets/siteMeta/browserconfig.xml">
<meta name="theme-color" content="#000000">



<link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:400,600%7CIBM+Plex+Serif:300,400,500%7CIBM+Plex+Mono:300,400,500,700" rel="stylesheet">

<!-- end custom head snippets -->

    <link rel="shortcut icon" type="image/x-icon" href="/event-automation/assets/favicon.ico" >
    
    <base target="_parent">

  </head>
  <script src="/event-automation/assets/animation/lottie.js" type="text/javascript"></script>
  <script src="/event-automation/assets/js/connectors.js"></script>


  
  <body onload="" class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    




<div id="masthead" class="masthead">
  <!--
  <div class="masthead__goToIBMCloud">
  <div>
    You are viewing the documentation for the container-native version of IBM Event Automation.
  </div>
    <a class="link" target="_self" href="https://cloud.ibm.com/docs/EventStreams?topic=EventStreams-getting-started">Looking for the managed service on IBM Cloud? Click here.</a>
</div>
-->
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="mastheadNav">

      


        <div class="mastheadTitle">
          
          <a class="site-title" href="/event-automation/" target="_self"><span>IBM</span>&nbsp;Event Automation</a>
          <div class="viewOnIBMcom">
            <a href="https://www.ibm.com/products/event-automation" target="_blank">View product page</a>
          </div>
        </div>









        <div class="mastheadControls">
            <div class="menuScrollContainer">

        

                <ul id="visible-links" class="visible-links">
                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/es/','_self')">
                      <a href="http://localhost:4000/event-automation/es/" >Event Streams</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item active" onclick="window.open('http://localhost:4000/event-automation/eem/','_self')">
                      <a href="http://localhost:4000/event-automation/eem/" >Endpoint Management</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/ep/','_self')">
                      <a href="http://localhost:4000/event-automation/ep/" >Event Processing</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/connectors/','_self')">
                      <a href="http://localhost:4000/event-automation/connectors/" >Connectors</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/tutorials/','_self')">
                      <a href="http://localhost:4000/event-automation/tutorials/" >Tutorials</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/api/','_self')">
                      <a href="http://localhost:4000/event-automation/api/" >APIs...</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/support/','_self')">
                      <a href="http://localhost:4000/event-automation/support/" >Support</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/search/','_self')">
                      <button aria-label="Search Button" role="button" id="searchButton" class="search__toggle " type="button" name="search Button">
                        <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                          <path
                            d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z"
                            transform="translate(-.01)"></path>
                        </svg>
                      </button>
                    </li>
                  

                  
                </ul>
        

      </div>
    </div>
      </nav>
    </div>
  </div>
</div>


    <div id="initial-content" class="initial-content" role="main">






<main id="main" class="mainContainer" role="main">
    
      <div id="subMenu" class="subMenu">
        <div tabindex="0" class="menuIcon" id="menuIcon">
          <svg id="mobileMenu" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
            <g id="bottomLine">
              <line class="burgerLine" x1="14" y1="29" x2="34" y2="29" />
            </g>
            <g id="middleLine">
              <line class="burgerLine" x1="14" y1="24" x2="34" y2="24" />
            </g>
            <g id="topLine">
              <line class="burgerLine" x1="14" y1="19" x2="34" y2="19" />
            </g>
          </svg>
        </div>
        <div id="mobileVersionShortcut" class="versionContainer" tabindex="0">
          <a id="mobileVersionPillCurrent" class="versionPill">11.0</a>
        </div>
      </div>
    
  



<div id="sidebarMask" class="sidebarMask">

  </div>
  <div id="sidebar" class="sidebar sticky">
      <div aria-label="Change Version" role="button" aria-expanded="false"
      
        id="versionDropdown"
        tabindex="0"
        class="versionsBar"
       >
          <div class="selectedVersion" id="selectedVersion">
            <div class="versionContainer" >
              
                <a id="versionPillCurrent" class="versionPill">11.0</a>
                <a class="versionChange">Change Version</a>
              
            </div>
          </div>
          


          <div class="allVersions" id="allVersions">
            <ul>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/eem/integrating-with-apic/configure-eem-for-apic/" onclick="openVersion('/event-automation/eem/integrating-with-apic/configure-eem-for-apic/','eem_11.0')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/eem/integrating-with-apic/configure-eem-for-apic/" class="versionPill active">11.0</a>
                      </div>
                      <div class="activeContainer">
                        
                          <img alt="" src="http://localhost:4000/event-automation/images/checkbox.svg" />
                        
                      </div>
                      <div class="latest">
                        Latest
                      </div>
                    </li>

                

            </ul>
          </div>
        </div>

  
    
      
      
      
    
    
      

<nav class="nav__list">
  
  <ul class="nav__items">

    
      <li>
        
          <span class="nav__sub-title">About</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/about/overview/" class="">Introduction</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/about/whats-new/" class="">What's new</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/about/key-concepts/" class="">Key concepts</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Installing</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/prerequisites/" class="">Prerequisites</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/planning/" class="">Planning your installation</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/overview/" class="">Installation overview</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/installing/" class="">Installing the Manager in an online environment</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/offline/" class="">Installing the Manager in an offline environment</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/deploy-gateways/" class="">Installing Event Gateways on the same cluster</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/standalone-gateways/" class="">Installing stand-alone Event Gateways</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/configuring/" class="">Configuring</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/post-installation/" class="">Post-installation tasks</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/backup-restore/" class="">Backing up and restoring</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/uninstalling/" class="">Uninstalling</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/upgrading/" class="">Upgrading</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Getting started</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/getting-started/logging-in/" class="">Logging in</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Security</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/security/managing-access/" class="">Managing access</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/security/user-roles/" class="">Managing user roles</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/security/verifying-signature/" class="">Verifying container image signatures</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/security/network-policies/" class="">Network policies</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/security/gdpr-considerations/" class="">Considerations for GDPR</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Describe and publish</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/describe/adding-topics/" class="">Describing event sources</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/describe/managing-topics/" class="">Managing topics</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/describe/managing-clusters/" class="">Managing clusters</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/describe/publishing-topics/" class="">Publishing topics</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/describe/managing-user-access-to-topics/" class="">Managing user access to topics</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/describe/managing-gateways/" class="">Managing gateways</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Consume and subscribe</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/consume-subscribe/discovering-topics/" class="">Discovering topics</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/consume-subscribe/subscribing-to-topics/" class="">Subscribing to topics</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/consume-subscribe/setting-your-application-to-consume/" class="">Setting your application to consume from a topic</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Integrating with IBM API Connect</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/integrating-with-apic/overview/" class="">Integration overview</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/integrating-with-apic/configure-eem-for-apic/" class="active">Configure the Manager as an Event Gateway Service</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/integrating-with-apic/export-asyncapi/" class="">Export an AsyncAPI for use in API Connect</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Reference</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/reference/api-reference/" class="">API reference for the CRDs</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Troubleshooting</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/troubleshooting/intro/" class="">Troubleshooting overview</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/troubleshooting/gathering-logs/" class="">Gathering logs</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/troubleshooting/trace-logging/" class="">Configuring trace logging</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/troubleshooting/no-such-algorithm-log/" class="">No such algorithm exception log</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/troubleshooting/evicted-gateway/" class="">Event Gateway in 'Evicted' state</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/troubleshooting/invalid-async-api/" class="">Invalid exported Async API for API Connect</a>
            </li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>
    
  
  </div>


  <div class="mainContent">
    
    <div id="pageContainer" class="page" itemscope itemtype="http://schema.org/CreativeWork">
      
      <div class="page__inner-wrap  latestVersion">
      

        
        <section class="page__content pageSpacing" itemprop="text">
          
        
          <header>
            <h1 id="page-title" class="page__title" itemprop="headline">
              Configure an Event Endpoint Management Manager as an Event Gateway Service
</h1>
            
          </header>  
        
        

                    
          <div class="content">
            <p>You can configure your Event Endpoint Management instance (Manager) to be registered as an Event Gateway Service in IBM API Connect, which you can use to manage events and APIs in one place.</p>

<p>To register Event Endpoint Management instance as an Event Gateway Service:</p>

<ol>
  <li>Add the server certificate of API Connect and the JSON Web Key Set (JWKS) endpoint as configuration in your Event Endpoint Management instance so that communications received from API Connect are trusted.</li>
  <li>Use the Event Gateway API and the Event Endpoint Management Manager Manager endpoint to configure an Event Gateway Service in Cloud Manager.</li>
</ol>

<p>Follow the steps to configure your Event Endpoint Management Manager as an Event Gateway Service.</p>

<h2 id="retrieve-the-manager-endpoint">Retrieve the Manager endpoint</h2>

<p>Before beginning, you must retrieve the Event Endpoint Management Manager Manager endpoint, as this is needed for the following sections.</p>

<ol>
  <li>Log in to the OpenShift Container Platform <a href="https://docs.openshift.com/container-platform/4.12/web_console/web-console.html" target="_blank">web console</a> using your login credentials.</li>
  <li>Expand the <strong>Operators</strong> dropdown and select <strong>Installed Operators</strong> to open the <strong>Installed Operators</strong> page.</li>
  <li>Expand the <strong>Project</strong> drop-down menu and select the project the API Connect instance is installed in.</li>
  <li>Select the <strong>API Connect</strong> operator.</li>
  <li>In the <strong>API Connect cluster</strong>, click the installed instance.</li>
  <li>In the <strong>YAML</strong>, find the <code class="language-plaintext highlighter-rouge">status.endpoints</code> section of the <code class="language-plaintext highlighter-rouge">APIConnectCluster</code> custom resource.</li>
  <li>Retrieve the value in the <code class="language-plaintext highlighter-rouge">platformApi</code> field.</li>
</ol>

<p>The value that you retrieved previously is the Manager endpoint, which is used in the following sections.</p>

<h2 id="configure-event-endpoint-management-to-trust-api-connect">Configure Event Endpoint Management to trust API Connect</h2>

<p>To allow communication between API Connect and the Event Gateway Service, you must add the API Connect certificate to Event Endpoint Management trusted certificates. Additionally, you need to provide JWKS endpoint, which will be used to authenticate messages received from API Connect.</p>

<ol>
  <li>
    <p>Download the server certificate from the Event Endpoint Management Manager endpoint, either by opening the URL in a browser, or by running the following command and then copying the certificate details into a file:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> openssl s_client <span class="nt">-connect</span> &lt;manager endpoint <span class="nb">hostname</span><span class="o">&gt;</span>:443
</code></pre></div>    </div>

    <p>Where <code class="language-plaintext highlighter-rouge">&lt;manager endpoint hostname&gt;</code> is the Event Endpoint Management Manager endpoint that you retrieved earlier.</p>
  </li>
  <li>In the OpenShift Container Platform, <a href="#creating-a-secret">create a secret</a> that contains the downloaded certificate.</li>
  <li>Log in to the OpenShift Container Platform <a href="https://docs.openshift.com/container-platform/4.12/web_console/web-console.html" target="_blank">web console</a> using your login credentials.</li>
  <li>Expand the <strong>Operators</strong> dropdown and select <strong>Installed Operators</strong> to open the <strong>Installed Operators</strong> page.</li>
  <li>Expand the <strong>Project</strong> dropdown and select the project the instance is installed in. Click the operator called <strong>IBM Event Endpoint Management</strong>.</li>
  <li>Click the <strong>Event Endpoint Management</strong> tab and search the <strong>Name</strong> column for the installed instance and click the name.</li>
  <li>Click the <strong>YAML</strong> tab to edit the custom resource.</li>
  <li>
    <p>In the <code class="language-plaintext highlighter-rouge">spec.manager</code> field, add the following snippet:</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="na">apic</span><span class="pi">:</span>
       <span class="na">jwks</span><span class="pi">:</span>
           <span class="na">endpoint</span><span class="pi">:</span> <span class="pi">&gt;-</span>
               <span class="s">&lt;platformApi endpoint&gt;/cloud/oauth2/certs   </span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>In the <code class="language-plaintext highlighter-rouge">spec.manager.tls</code> field, add the following snippet:</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="na">trustedCertificates</span><span class="pi">:</span>
       <span class="pi">-</span> <span class="na">certificate</span><span class="pi">:</span> <span class="s">ca.crt</span>
         <span class="na">secretName</span><span class="pi">:</span> <span class="s">apim-cpd</span>
</code></pre></div>    </div>
  </li>
  <li>Click the <strong>Save</strong> button to apply your changes.</li>
</ol>

<h3 id="creating-a-secret">Creating a Secret</h3>

<p>Create a secret to store the API Connect certificate as follows:</p>

<h4 id="using-openshift-container-platform-ui">Using OpenShift Container Platform UI</h4>

<ol>
  <li>Log in to the OpenShift Container Platform <a href="https://docs.openshift.com/container-platform/4.12/web_console/web-console.html" target="_blank">web console</a> using your login credentials.</li>
  <li>Expand the <strong>Workloads</strong> drop-down menu and select <strong>Secrets</strong>.</li>
  <li>Expand the <strong>Project</strong> drop-down menu and select the project the Event Endpoint Management instance is installed in.</li>
  <li>Expand the <strong>Create</strong> drop-down menu and select <strong>Key/value secret</strong>.</li>
  <li>Enter <code class="language-plaintext highlighter-rouge">apim-cpd</code> as the <strong>Secret name</strong>.</li>
  <li>Enter <code class="language-plaintext highlighter-rouge">ca.crt</code> as the <strong>Key</strong>.</li>
  <li>Under <strong>Value</strong>, select <strong>Browse…</strong>, and then select the certificate that you downloaded.</li>
  <li>Click <strong>Create</strong>.</li>
</ol>

<h4 id="using-the-openshift-container-platform-cli">Using the OpenShift Container Platform CLI</h4>

<ol>
  <li>
    <p>Run the following command to get a Base64 encoded string of the certificate that you downloaded:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nb">cat</span> &lt;path to the certificate&gt; | <span class="nb">base64</span>
</code></pre></div>    </div>
  </li>
  <li>Log in to your Red Hat OpenShift Container Platform as a cluster administrator by using the <a href="https://docs.openshift.com/container-platform/4.12/cli_reference/openshift_cli/getting-started-cli.html#cli-logging-in_cli-developer-commands" target="_blank"><code class="language-plaintext highlighter-rouge">oc</code> CLI</a> (<code class="language-plaintext highlighter-rouge">oc login</code>).</li>
  <li>
    <p>Run the following command to create a secret called <code class="language-plaintext highlighter-rouge">apim-cpd</code>:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> | oc apply -f -
 apiVersion: events.ibm.com/v1beta1
 kind: Secret
 metadata:
   name: apim-cpd
   namespace: &lt;namespace the Event Endpoint Management instance is installed in&gt;
 data:
   ca.crt: &gt;-
     &lt;base64-certificate&gt;
 type: Opaque
</span><span class="no"> EOF
</span></code></pre></div>    </div>

    <p>Where:</p>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">&lt;namespace&gt;</code> is the namespace the Event Endpoint Management instance is installed in.</li>
      <li><code class="language-plaintext highlighter-rouge">&lt;base64-certificate&gt;</code> is the Base64 encoded certificate that you obtained in step 1.</li>
    </ul>
  </li>
</ol>

<h2 id="enabling-mutual-tls">Enabling mutual TLS</h2>

<p>JSON Web Token (JWT) authentication is used by default to verify messages that are received from API Connect and cannot be disabled. All communications the Event Gateway Service receive from API Connect contain a JWT, and the JWKS endpoint you provided earlier is used to validate this token to ensure the authenticity of each message.</p>

<p>Based on your security requirements, you can optionally choose to also enable mutual TLS (MTLS), which uses certificates for authentication:</p>

<ol>
  <li>Log in to the OpenShift Container Platform <a href="https://docs.openshift.com/container-platform/4.12/web_console/web-console.html" target="_blank">web console</a> using your login credentials.</li>
  <li>Expand the <strong>Operators</strong> dropdown and select <strong>Installed Operators</strong> to open the <strong>Installed Operators</strong> page.</li>
  <li>Expand the <strong>Project</strong> dropdown and select the project the instance is installed in. Click the operator called <strong>IBM Event Endpoint Management</strong>.</li>
  <li>Click the <strong>Event Endpoint Management</strong> tab and search the <strong>Name</strong> column for the installed instance and click the name.</li>
  <li>Click the <strong>YAML</strong> tab to edit the custom resource.</li>
  <li>
    <p>In the <code class="language-plaintext highlighter-rouge">spec.manager.apic</code> field, add the following snippet:</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="na">clientSubjectDN</span><span class="pi">:</span> <span class="s">CN=&lt;commonname&gt;</span>
</code></pre></div>    </div>
    <p>Where <code class="language-plaintext highlighter-rouge">&lt;commonname&gt;</code> is the Common Name on the certificates that are used when making the <a href="#obtain-certificates-for-a-tls-client-profile">TLS client profile</a>.</p>
  </li>
  <li>Click the <strong>Save</strong> button to apply your changes.</li>
</ol>

<h2 id="registering-event-endpoint-management-as-an-event-gateway-service-in-api-connect">Registering Event Endpoint Management as an Event Gateway Service in API Connect</h2>

<p>After configuring the Event Endpoint Management to trust API Connect, register the Event Endpoint Management as an Event Gateway Service as follows:</p>

<h3 id="retrieve-the-event-gateway-api-and-management-endpoints">Retrieve the Event Gateway API and management endpoints</h3>

<ol>
  <li>Log in to the OpenShift Container Platform <a href="https://docs.openshift.com/container-platform/4.12/web_console/web-console.html" target="_blank">web console</a> using your login credentials.</li>
  <li>Expand the <strong>Networking</strong> dropdown and select <strong>Routes</strong>.</li>
  <li>Expand the <strong>Project</strong> drop-down menu and select the project the Event Endpoint Management instance is installed in.</li>
  <li>Use the search bar to find the route with the <strong>Name</strong> ending in <code class="language-plaintext highlighter-rouge">gateway</code>. The URL in the <strong>Location</strong> column is the Event Gateway API endpoint.</li>
  <li>Use the search bar to find the route with the <strong>Name</strong> ending in <code class="language-plaintext highlighter-rouge">apic</code>. The URL in the <strong>Location</strong> column is the management endpoint.</li>
</ol>

<h3 id="obtain-certificates-for-a-tls-client-profile">Obtain certificates for a TLS client profile</h3>

<ol>
  <li>Expand the <strong>Workloads</strong> drop-down menu and select <strong>Secrets</strong>.</li>
  <li>Expand the <strong>Project</strong> drop-down menu and select the project the API Connect instance is installed in.</li>
  <li>Use the search bar to locate the secret named <code class="language-plaintext highlighter-rouge">&lt;API Connect instance name&gt;-ingress-ca</code> and click the secret.</li>
  <li>Scroll down to the <code class="language-plaintext highlighter-rouge">Data</code> section.</li>
  <li>Copy the <strong>ca.crt</strong> and save it in a file called <code class="language-plaintext highlighter-rouge">cluster-ca.pem</code></li>
  <li>Copy the <strong>tls.crt</strong> and save it in a file called <code class="language-plaintext highlighter-rouge">apim-client.pem</code></li>
  <li>Copy the <strong>tls.key</strong> and save it in a file called <code class="language-plaintext highlighter-rouge">apim-client-key.pem</code></li>
</ol>

<p>For more information on these certificates, see the <a href="https://www.ibm.com/docs/en/api-connect/10.0.x?topic=integration-cp4i-list-issuers-ca-certificates-secrets" target="_blank">API Connect documentation</a>.</p>

<h3 id="navigate-to-cloud-manager">Navigate to Cloud Manager</h3>

<ol>
  <li>Expand the <strong>Networking</strong> dropdown and select <strong>Routes</strong>.</li>
  <li>Expand the <strong>Project</strong> drop-down menu and select the project the API Connect instance is installed in.</li>
  <li>Use the search bar to find the route with the <strong>Name</strong> ending in <code class="language-plaintext highlighter-rouge">admin</code>. Click the URL in the <strong>Location</strong> column. This takes you to the Cloud Manager UI.</li>
</ol>

<h3 id="create-a-tls-client-profile">Create a TLS Client Profile</h3>

<p>Create the TLS Client profile to use when contacting the Event Gateway Service through the management endpoint.</p>

<ol>
  <li>Create a client TLS keystore. Go to <strong>Home &gt; Resources &gt; TLS &gt; Keystore</strong> and click <strong>Create</strong>.</li>
  <li>Upload the <code class="language-plaintext highlighter-rouge">apim-client-key.pem</code> into Step 1.</li>
  <li>Upload the <code class="language-plaintext highlighter-rouge">apim-client.pem</code> into Step 2.</li>
  <li>Click <strong>Save</strong>.</li>
  <li>Create a client TLS truststore. Go to <strong>Truststore</strong> and click <strong>Create</strong>.</li>
  <li>Upload the <code class="language-plaintext highlighter-rouge">cluster-ca.pem</code>.</li>
  <li>Click <strong>Save</strong>.</li>
  <li>Create a TLS client profile. Go to <strong>TLS client profile</strong> and click <strong>Create</strong>.</li>
  <li>Choose the keystore and truststore you created.</li>
  <li>Tick <strong>Allow insecure server connections</strong>.</li>
  <li>Click <strong>Save</strong>.</li>
</ol>

<h3 id="create-a-gateway-tls-server-profile">Create a Gateway TLS Server Profile</h3>

<p>Create the TLS server profile that the Event Gateway Service uses for the endpoints that Kafka clients connect to.</p>

<ol>
  <li>In the Cloud Manager, click <strong>Manage Resources</strong> in the navigation, then click <strong>TLS</strong> in the menu.</li>
  <li>Scroll down to the <strong>Keystore</strong> section, then click <strong>Create</strong>.</li>
  <li>Enter a title and optional summary for the keystore.</li>
  <li>Upload the CA certificate from the <code class="language-plaintext highlighter-rouge">caSecretName</code> of the <a href="../../installing/deploy-gateways">Event Gateway</a>.</li>
  <li>Save the keystore.</li>
  <li>In the <strong>TLS server profile</strong> section, click <strong>Create</strong>.</li>
  <li>Enter a title and optional summary for the profile.</li>
  <li>In the <strong>Keystore</strong> section, select the store that is created earlier.</li>
  <li>Click <strong>Save</strong>.</li>
</ol>

<h3 id="register-event-endpoint-management-as-an-event-gateway-service">Register Event Endpoint Management as an Event Gateway Service</h3>

<p>To socialize the Event Gateway client endpoint, register the Event Gateway through the Cloud Manager as follows.</p>

<ol>
  <li>In the Cloud Manager UI, select <strong>Topology &gt; Register Service &gt; Event Gateway Service</strong>.</li>
  <li>Enter a title and an optional summary.</li>
  <li>In the <strong>Service endpoint</strong>, enter the management endpoint that you obtained earlier.</li>
  <li>Select the TLS client profile that you created earlier from the <strong>TLS client profile</strong> drop-down menu.</li>
  <li>In the <strong>API invocation endpoint</strong>, enter the Event Gateway API endpoint base that you obtained earlier and add <code class="language-plaintext highlighter-rouge">:443</code> at the end of the value. For example, <code class="language-plaintext highlighter-rouge">eem-manager-instance-ibm-eem-gateway.mycompany.com:443</code></li>
  <li>Select the TLS server profile that you created earlier from the drop-down menu.</li>
  <li>Click <strong>Save</strong>.</li>
</ol>

<p>The Cloud Manager UI displays a notification to indicate the Event Gateway Service is successfully registered. You can now <a href="../export-asyncapi">export an AsyncAPI</a> to use in API Connect.</p>

          </div>


          
        </section>

        <aside class="sidebar__right ">
          
          <div class="fixedSidebar">
            <nav class="toc">
              <ul class="toc__menu">
  <li><a href="#retrieve-the-manager-endpoint">Retrieve the Manager endpoint</a></li>
  <li><a href="#configure-event-endpoint-management-to-trust-api-connect">Configure Event Endpoint Management to trust API Connect</a>
    <ul>
      <li><a href="#creating-a-secret">Creating a Secret</a></li>
    </ul>
  </li>
  <li><a href="#enabling-mutual-tls">Enabling mutual TLS</a></li>
  <li><a href="#registering-event-endpoint-management-as-an-event-gateway-service-in-api-connect">Registering Event Endpoint Management as an Event Gateway Service in API Connect</a>
    <ul>
      <li><a href="#retrieve-the-event-gateway-api-and-management-endpoints">Retrieve the Event Gateway API and management endpoints</a></li>
      <li><a href="#obtain-certificates-for-a-tls-client-profile">Obtain certificates for a TLS client profile</a></li>
      <li><a href="#navigate-to-cloud-manager">Navigate to Cloud Manager</a></li>
      <li><a href="#create-a-tls-client-profile">Create a TLS Client Profile</a></li>
      <li><a href="#create-a-gateway-tls-server-profile">Create a Gateway TLS Server Profile</a></li>
      <li><a href="#register-event-endpoint-management-as-an-event-gateway-service">Register Event Endpoint Management as an Event Gateway Service</a></li>
    </ul>
  </li>
</ul>
            </nav>
          </div>
          
        </aside>


      </div>
      <div class="pageEnd">
        
          
  <nav class="pagination">
    
      <div class="previous" onclick="window.open('/event-automation/eem/integrating-with-apic/overview/','_self')">
        <div class="container">
          <a href="/event-automation/eem/integrating-with-apic/overview/" class="pagination--pager" title="Previous Item: Integration overview
">Previous</a>
          <h2 class="titlePreview">Integration overview
</h2>
        </div>
      </div>
    
    
      <div class="next" onclick="window.open('/event-automation/eem/integrating-with-apic/export-asyncapi/','_self')">
        <div class="container">
          <a href="/event-automation/eem/integrating-with-apic/export-asyncapi/" class="pagination--pager" title="Next Item: Exporting an AsyncAPI document for use in API Connect
">Next</a>
          <h2 class="titlePreview">Exporting an AsyncAPI document for use in API Connect
</h2>
        </div>
      </div>
      
  </nav>

        
      </div>
    </div>


  </div> <!-- Main content -->

</main></div>


    
      <div class="page__footer">
          <footer>
            <!-- start custom footer snippets -->

<!-- end custom footer snippets -->

            
<div class="page__footer-copyright"><a href="https://www.ibm.com/privacy/us/en/" rel="nofollow" target="_blank">Privacy Policy</a>  &nbsp;© Copyright IBM Corporation 2023</br>
<a href="http://localhost:4000/event-automation/accessibility/" rel="nofollow" target="_blank">Accessibility</a> </br> <a href="http://localhost:4000/event-automation/notices/" rel="nofollow" target="_blank">Notices</a></br>
          </footer>
      </div>      
    


    
  <script src="/event-automation/assets/js/main.min.js"></script>
  <!-- <script src="https://use.fontawesome.com/releases/v5.1.0/js/all.js"></script> -->






<script src="/event-automation/assets/js/design.js"></script>





<script src="/event-automation/assets/js/lunr/lunr.min.js"></script>
<script src="/event-automation/assets/js/lunr/lunr-store.js"></script>
<script src="/event-automation/assets/js/lunr/lunr-en.js"></script>





    

    
  </body>
</html>

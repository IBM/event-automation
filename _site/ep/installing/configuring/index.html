<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Configuring - IBM Event Automation</title>
<meta name="description" content="Configure your Event Processing installation.">

<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="IBM Event Automation">
<meta property="og:url" content="http://localhost:4000/event-automation/ep/installing/configuring/" />
<meta property="og:title" content="Event Processing | Configuring" />
<meta property="og:description" content="Configure your Event Processing installation." />

<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="IBM Event Automation | Configuring" />




  <meta property="og:description" content="Configure your Event Processing installation.">



  <meta property="og:image" content="http://localhost:4000/event-automation/assets/siteMeta/appIcon_og_fb.png">
  <meta name="twitter:image" content="http://localhost:4000/event-automation/assets/siteMeta/appIcon_og_square.png">



  <meta property="article:published_time" content="2023-06-28T12:13:19-04:00">






<link rel="canonical" href="http://localhost:4000/event-automation/ep/installing/configuring/">





  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "http://localhost:4000/event-automation",
      "logo": "http://localhost:4000/event-automation/assets/siteMeta/appIcon_og_fb.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": null,
      "url": "http://localhost:4000/event-automation",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/event-automation/feed.xml" type="application/atom+xml" rel="alternate" title="IBM Event Automation Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/event-automation/assets/css/main.css">



<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<link rel="apple-touch-icon" sizes="180x180" href="http://localhost:4000/event-automation/assets/siteMeta/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-16x16.png">
<link rel="manifest" href="http://localhost:4000/event-automation/assets/siteMeta/site.webmanifest">
<link rel="mask-icon" href="http://localhost:4000/event-automation/assets/siteMeta/safari-pinned-tab.svg" color="#000000">
<link rel="shortcut icon" href="http://localhost:4000/event-automation/assets/siteMeta/favicon.ico">
<link rel="shortcut icon" type="image/png" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-16x16.png"/>
<link rel="shortcut icon" type="image/png" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-32x32.png"/>
<meta name="msapplication-TileColor" content="#000000">
<meta name="msapplication-config" content="http://localhost:4000/event-automation/assets/siteMeta/browserconfig.xml">
<meta name="theme-color" content="#000000">



<link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:400,600%7CIBM+Plex+Serif:300,400,500%7CIBM+Plex+Mono:300,400,500,700" rel="stylesheet">

<!-- end custom head snippets -->

    <link rel="shortcut icon" type="image/x-icon" href="/event-automation/assets/favicon.ico" >
    
    <base target="_parent">

  </head>
  <script src="/event-automation/assets/animation/lottie.js" type="text/javascript"></script>
  <script src="/event-automation/assets/js/connectors.js"></script>


  
  <body onload="" class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    




<div id="masthead" class="masthead">
  <!--
  <div class="masthead__goToIBMCloud">
  <div>
    You are viewing the documentation for the container-native version of IBM Event Automation.
  </div>
    <a class="link" target="_self" href="https://cloud.ibm.com/docs/EventStreams?topic=EventStreams-getting-started">Looking for the managed service on IBM Cloud? Click here.</a>
</div>
-->
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="mastheadNav">

      


        <div class="mastheadTitle">
          
          <a class="site-title" href="/event-automation/" target="_self"><span>IBM</span>&nbsp;Event Automation</a>
          <div class="viewOnIBMcom">
            <a href="https://www.ibm.com/products/event-automation" target="_blank">View product page</a>
          </div>
        </div>









        <div class="mastheadControls">
            <div class="menuScrollContainer">

        

                <ul id="visible-links" class="visible-links">
                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/es/','_self')">
                      <a href="http://localhost:4000/event-automation/es/" >Event Streams</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/eem/','_self')">
                      <a href="http://localhost:4000/event-automation/eem/" >Endpoint Management</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item active" onclick="window.open('http://localhost:4000/event-automation/ep/','_self')">
                      <a href="http://localhost:4000/event-automation/ep/" >Event Processing</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/connectors/','_self')">
                      <a href="http://localhost:4000/event-automation/connectors/" >Connectors</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/tutorials/','_self')">
                      <a href="http://localhost:4000/event-automation/tutorials/" >Tutorials</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/api/','_self')">
                      <a href="http://localhost:4000/event-automation/api/" >APIs...</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/support/','_self')">
                      <a href="http://localhost:4000/event-automation/support/" >Support</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/search/','_self')">
                      <button aria-label="Search Button" role="button" id="searchButton" class="search__toggle " type="button" name="search Button">
                        <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                          <path
                            d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z"
                            transform="translate(-.01)"></path>
                        </svg>
                      </button>
                    </li>
                  

                  
                </ul>
        

      </div>
    </div>
      </nav>
    </div>
  </div>
</div>


    <div id="initial-content" class="initial-content" role="main">






<main id="main" class="mainContainer" role="main">
    
      <div id="subMenu" class="subMenu">
        <div tabindex="0" class="menuIcon" id="menuIcon">
          <svg id="mobileMenu" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
            <g id="bottomLine">
              <line class="burgerLine" x1="14" y1="29" x2="34" y2="29" />
            </g>
            <g id="middleLine">
              <line class="burgerLine" x1="14" y1="24" x2="34" y2="24" />
            </g>
            <g id="topLine">
              <line class="burgerLine" x1="14" y1="19" x2="34" y2="19" />
            </g>
          </svg>
        </div>
        <div id="mobileVersionShortcut" class="versionContainer" tabindex="0">
          <a id="mobileVersionPillCurrent" class="versionPill">1.0</a>
        </div>
      </div>
    
  



<div id="sidebarMask" class="sidebarMask">

  </div>
  <div id="sidebar" class="sidebar sticky">
      <div aria-label="Change Version" role="button" aria-expanded="false"
      
        id="versionDropdown"
        tabindex="0"
        class="versionsBar"
       >
          <div class="selectedVersion" id="selectedVersion">
            <div class="versionContainer" >
              
                <a id="versionPillCurrent" class="versionPill">1.0</a>
                <a class="versionChange">Change Version</a>
              
            </div>
          </div>
          


          <div class="allVersions" id="allVersions">
            <ul>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/ep/installing/configuring/" onclick="openVersion('/event-automation/ep/installing/configuring/','ep_1.0')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/ep/installing/configuring/" class="versionPill active">1.0</a>
                      </div>
                      <div class="activeContainer">
                        
                          <img alt="" src="http://localhost:4000/event-automation/images/checkbox.svg" />
                        
                      </div>
                      <div class="latest">
                        Latest
                      </div>
                    </li>

                

            </ul>
          </div>
        </div>

  
    
      
      
      
    
    
      

<nav class="nav__list">
  
  <ul class="nav__items">

    
      <li>
        
          <span class="nav__sub-title">About</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/about/overview/" class="">Introduction</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/about/whats-new/" class="">What's new</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/about/key-concepts/" class="">Key concepts</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Installing</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/installing/prerequisites/" class="">Prerequisites</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/installing/planning/" class="">Planning your installation</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/installing/installing/" class="">Installing in an online environment</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/installing/offline/" class="">Installing in an offline environment</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/installing/configuring/" class="active">Configuring</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/installing/post-installation/" class="">Post-installation tasks</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/installing/backup-restore/" class="">Backing up and restoring</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/installing/uninstalling/" class="">Uninstalling</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/installing/upgrading/" class="">Upgrading</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Getting started with Authoring</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/getting-started/logging-in/" class="">Logging in</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/getting-started/canvas/" class="">Building a simple flow</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Security</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/security/managing-access/" class="">Managing access</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/security/user-roles/" class="">Managing user roles</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/security/verifying-signature/" class="">Verifying container image signatures</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/security/network-policies/" class="">Network policies</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/security/gdpr-considerations/" class="">Considerations for GDPR</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Administering</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/administering/flink-health/" class="">Monitoring Flink health</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Nodes</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/nodes/summary/" class="">Node overview</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/nodes/eventnodes/" class="">Events</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/nodes/processornodes/" class="">Processors</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/nodes/joins/" class="">Joins</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Deploying advanced flows</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/advanced/exporting-flows/" class="">Exporting and importing flows</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/advanced/deploying-development/" class="">Deploying jobs in development environments</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/advanced/deploying-production/" class="">Deploying jobs in production environments</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Reference</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/reference/api-reference/" class="">API reference for the CRDs</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Troubleshooting</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/troubleshooting/intro/" class="">Troubleshooting overview</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/troubleshooting/gathering-logs/" class="">Gathering logs</a>
            </li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>
    
  
  </div>


  <div class="mainContent">
    
    <div id="pageContainer" class="page" itemscope itemtype="http://schema.org/CreativeWork">
      
      <div class="page__inner-wrap  latestVersion">
      

        
        <section class="page__content pageSpacing" itemprop="text">
          
        
          <header>
            <h1 id="page-title" class="page__title" itemprop="headline">
              Configuring
</h1>
            
          </header>  
        
        

                    
          <div class="content">
            <h2 id="configuring-flink">Configuring Flink</h2>

<h3 id="before-you-begin">Before you begin</h3>

<p>Consider the following resources before configuring your <code class="language-plaintext highlighter-rouge">FlinkDeployment</code> custom resource:</p>

<ul>
  <li><a href="https://nightlies.apache.org/flink/flink-kubernetes-operator-docs-release-1.5/docs/custom-resource/reference/#flinkdeployment" target="_blank">Flink documentation</a></li>
  <li><a href="https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/deployment/config/#common-setup-options" target="_blank">Flink configuration options</a></li>
  <li><a href="https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/concepts/time/" target="_blank">Flink Event Time and Watermark</a></li>
  <li><a href="https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/connectors/table/kafka/" target="_blank">Kafka SQL connector</a></li>
  <li><a href="https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/dev/table/sql/create/" target="_blank">Flink SQL CREATE statement</a></li>
  <li><a href="https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/internals/job_scheduling/" target="_blank">Job and scheduling</a></li>
</ul>

<h3 id="configuring-flink-checkpointing">Configuring Flink checkpointing</h3>

<p>When Flink can’t complete writing a checkpoint during the checkpointing time interval, the throughput of Flink jobs decreases.
This might happen when Flink jobs experience backpressure, meaning that they can’t process events as fast as they are ingested.</p>

<p>The following options can be used to adjust the way checkpoints can be taken in the checkpointing time interval:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">execution.checkpointing.interval</code></li>
  <li><code class="language-plaintext highlighter-rouge">execution.checkpointing.min-pause</code></li>
</ul>

<p>In addition, two other Flink capabilities can help reduce the time taken to write checkpoints:</p>

<ul>
  <li>
    <p>Unaligned checkpoints</p>

    <ul>
      <li>Set the deployment option <code class="language-plaintext highlighter-rouge">execution.checkpointing.unaligned.enabled</code> to true.</li>
      <li>Set the deployment option <code class="language-plaintext highlighter-rouge">execution.checkpointing.max-concurrent-checkpoints</code> to 1.</li>
      <li>Set the deployment option <code class="language-plaintext highlighter-rouge">execution.checkpointing.mode</code> to ‘EXACTLY_ONCE’.</li>
    </ul>
  </li>
  <li>
    <p>Buffer debloating</p>
    <ul>
      <li>Set deployment option <code class="language-plaintext highlighter-rouge">taskmanager.network.memory.buffer-debloat.enabled</code> to <code class="language-plaintext highlighter-rouge">true</code>.</li>
    </ul>
  </li>
</ul>

<p>For more information about checkpointing under backpressure, see the <a href="https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/ops/state/checkpointing_under_backpressure/" target="_blank">Flink documentation</a>.</p>

<p>For more information about tuning checkpointing, see the <a href="https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/ops/state/large_state_tuning/#tuning-checkpointing" target="_blank">Flink documentation</a>.</p>

<p>For more information about checkpointing options, see the <a href="https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/deployment/config/#checkpointing" target="_blank">Flink documentation</a>.</p>

<h3 id="configuring-rocksdb">Configuring RocksDB</h3>

<p>RocksDB is an embeddable persistent key-value store for fast storage provided by Flink.</p>

<p>Most of the time, Flink operations such as aggregate, rolling aggregate, and interval join involve a large number of interactions with RocksDB for maintining states.</p>

<p>If the Flink job experiences a fall in throughput due to backpressure, consider enabling the incremental checkpointing Flink capability by setting the deployment option <code class="language-plaintext highlighter-rouge">state.backend.incremental</code> to <code class="language-plaintext highlighter-rouge">true</code>. 
For more information about RocksDB state backend, see the <a href="https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/ops/state/state_backends/#rocksdb-state-backend-details" target="_blank">Flink documentation</a>.</p>

<p>You can tune RocksDB operations to optimize the overall performance of your Flink jobs.</p>

<p>A good starting point is to adjust the way RocksDB keeps states in memory and transfers them to disk, using the following deployment options:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">state.backend.rocksdb.memory.write-buffer-ratio</code> (the default value is 0.5).</li>
  <li><code class="language-plaintext highlighter-rouge">state.backend.rocksdb.memory.high-prio-pool-ratio</code> (the default value is 0.1).</li>
  <li><code class="language-plaintext highlighter-rouge">state.backend.rocksdb.checkpoint.transfer.thread.num</code> (the default value is 4).</li>
</ul>

<p>For more information about tuning RocksDB, see the <a href="https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/ops/state/large_state_tuning/#tuning-rocksdb" target="_blank">Flink documentation</a>.</p>

<h3 id="configuring-parallelism">Configuring parallelism</h3>

<p>A Flink program consists of multiple tasks. A task can be split into several parallel instances for execution and each parallel instance processes a subset of the task’s input data. The number of parallel instances of a task is called its parallelism.</p>

<p>In order to increase the throughput of your Flink job, you can perform the following actions:</p>
<ul>
  <li>Increase the number of partitions in the Kafka ingress topics used by your Flink event sources.</li>
  <li>Set the Flink job parallelism to a value equal to this number of partitions.</li>
</ul>

<p>For more information, see <a href="../../advanced/deploying-development">Deploying jobs for development purposes</a> and <a href="../../advanced/deploying-production">Deploying jobs in a production environment</a>.</p>

<h2 id="configuring-event-processing">Configuring Event Processing</h2>

<h3 id="enabling-persistent-storage">Enabling persistent storage</h3>

<p>In order to persist the data input into a Event Processing instance, configure persistent storage in your <code class="language-plaintext highlighter-rouge">EventProcessing</code> configuration.</p>

<p>To enable persistent storage for <code class="language-plaintext highlighter-rouge">EventProcessing</code>, set <code class="language-plaintext highlighter-rouge">spec.authoring.storage.type</code> to <code class="language-plaintext highlighter-rouge">persistent-claim</code>.
Then configure storage in one of the following ways:</p>

<ul>
  <li><a href="#dynamic-provisioning">Dynamic provisioning</a></li>
  <li><a href="#providing-persistent-volume">Providing persistent volume</a></li>
  <li><a href="#providing-persistent-volume-and-persistent-volume-claim">Providing persistent volume and persistent volume claim</a>.</li>
</ul>

<p>Ensure that you have sufficient disk space for persistent storage.</p>

<p><strong>Note:</strong> <code class="language-plaintext highlighter-rouge">spec.authoring.storage.type</code> can also be set to <code class="language-plaintext highlighter-rouge">ephemeral</code>, although no persistence is provisioned with this configuration. This is not recommended for production usage because it results in lost data.</p>

<h3 id="dynamic-provisioning">Dynamic provisioning</h3>

<p>If there is a <a href="https://docs.openshift.com/container-platform/4.12/storage/dynamic-provisioning.html" target="_blank">dynamic storage provisioner</a> present on the system, Event Processing can use it to dynamically provision the persistence.
To configure this, set <code class="language-plaintext highlighter-rouge">spec.authoring.storage.storageClassName</code> to the name of the storage class provided by the provisioner.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">events.ibm.com/v1beta1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">EventProcessing</span>
<span class="c1"># ...</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">license</span><span class="pi">:</span>
    <span class="c1"># ...</span>
  <span class="s">authoring</span>
    <span class="s">storage</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">persistent-claim</span>
      <span class="na">storageClassName</span><span class="pi">:</span> <span class="s">csi-cephfs</span>
<span class="c1"># ...</span>

</code></pre></div></div>
<ul>
  <li>Optionally, specify the storage size in <code class="language-plaintext highlighter-rouge">storage.size</code> (for example, <code class="language-plaintext highlighter-rouge">"100GiB"</code>).</li>
  <li>Optionally, specify the root storage path where data is stored in <code class="language-plaintext highlighter-rouge">storage.root</code> (for example, <code class="language-plaintext highlighter-rouge">"/opt"</code>).</li>
  <li>Optionally, specify the retention setting for the storage if the instance is deleted in <code class="language-plaintext highlighter-rouge">storage.deleteClaim</code> (for example, <code class="language-plaintext highlighter-rouge">"true"</code>).</li>
</ul>

<h3 id="providing-persistent-volume">Providing persistent volume</h3>

<p>A persistent volume can be precreated for Event Processing to use as storage.
To use a precreated persistent volume set the <code class="language-plaintext highlighter-rouge">spec.authoring.storage.selectors</code> to match the labels on the precreated persistent volume.
The following example creates a persistent volume claim to bind to a persistent volume with the label <code class="language-plaintext highlighter-rouge">precreated-persistence: my-pv</code>.
Multiple labels can be added as selectors, the persistent volume must have all labels present to match.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">events.ibm.com/v1beta1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">EventProcessing</span>
<span class="c1"># ...</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">license</span><span class="pi">:</span>
    <span class="c1"># ...</span>
  <span class="s">authoring</span>
    <span class="s">storage</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">persistent-claim</span>
      <span class="na">selectors</span><span class="pi">:</span>
        <span class="na">precreated-persistence</span><span class="pi">:</span> <span class="s">my-pv</span>
<span class="c1"># ...</span>

</code></pre></div></div>

<ul>
  <li>Optionally, specify the storage size in <code class="language-plaintext highlighter-rouge">storage.size</code> (for example, <code class="language-plaintext highlighter-rouge">"100GiB"</code>).</li>
  <li>Optionally, specify the root storage path where data is stored in <code class="language-plaintext highlighter-rouge">storage.root</code> (for example, <code class="language-plaintext highlighter-rouge">"/opt"</code>).</li>
  <li>Optionally, specify the retention setting for the storage if the instance is deleted in <code class="language-plaintext highlighter-rouge">storage.deleteClaim</code> (for example, <code class="language-plaintext highlighter-rouge">"true"</code>).</li>
</ul>

<h3 id="providing-persistent-volume-and-persistent-volume-claim">Providing persistent volume and persistent volume claim</h3>

<p>A persistent volume and persistent volume claim can be precreated for Event Processing to use as storage.
To use this method set <code class="language-plaintext highlighter-rouge">spec.authoring.storage.existingClaimName</code> to match the name of the precreated persistent volume claim.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">events.ibm.com/v1beta1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">EventProcessing</span>
<span class="c1"># ...</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">license</span><span class="pi">:</span>
    <span class="c1"># ...</span>
  <span class="s">authoring</span>
    <span class="s">storage</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">persistent-claim</span>
      <span class="na">existingClaimName</span><span class="pi">:</span> 
<span class="c1"># ...</span>

</code></pre></div></div>

<h3 id="configuring-tls">Configuring TLS</h3>

<p>TLS can be configured for the <code class="language-plaintext highlighter-rouge">EventProcessing</code> instance in one of the following ways:</p>

<ul>
  <li><a href="#operator-configured-ca-certificate">Operator configured CA certificate</a></li>
  <li><a href="#user-provided-ca-certificate">User-provided CA certificate</a></li>
  <li><a href="#user-provided-certificates">User-provided certificates</a></li>
  <li><a href="#user-provided-ui-certificates">User-provided UI certificates</a></li>
</ul>

<h4 id="operator-configured-ca-certificate">Operator configured CA certificate</h4>

<p>By default the operator configures its own TLS.
The operator uses the IBM Certificate Manager installed on the system to generate a CA certificate with a self-signed issuer. It then uses this self signed CA certificate to sign the certificates used for secure communication by the Event Processing instance.
IBM Certificate manager puts the CA certificate into a secret named <code class="language-plaintext highlighter-rouge">&lt;my-instance&gt;-ibm-ep-manager-ca</code>. This secret can be used for configuring the <code class="language-plaintext highlighter-rouge">EventGateway</code> TLS communications.</p>

<h4 id="user-provided-ca-certificate">User-provided CA certificate</h4>

<p>A custom CA certificate can be provided to the Event Processing instance.
The operator uses the IBM Certificate Manager installed on the system to use this provided CA certificate to sign the certificates used for secure communication by the Event Processing instance.
To provide a custom CA certificate set <code class="language-plaintext highlighter-rouge">spec.authoring.tls.caSecretName</code> to be the name of the secret that contains the CA certificate.</p>

<p>The following snippet is an example of a configuration that uses a user provided CA certificate:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">events.ibm.com/v1beta1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">EventProcessing</span>
<span class="c1"># ...</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">license</span><span class="pi">:</span>
    <span class="c1"># ...</span>
  <span class="s">authoring</span>
    <span class="s">tls</span><span class="pi">:</span>
      <span class="na">caSecretName</span><span class="pi">:</span> <span class="s">myCASecret</span>
<span class="c1"># ...</span>

</code></pre></div></div>

<p><strong>Note:</strong> The secret that is referenced here must contain the keys <code class="language-plaintext highlighter-rouge">ca.crt</code>, <code class="language-plaintext highlighter-rouge">tls.crt</code>, <code class="language-plaintext highlighter-rouge">tls.key</code>. The <code class="language-plaintext highlighter-rouge">ca.crt</code> key and the <code class="language-plaintext highlighter-rouge">tls.crt</code> key can have the same value.</p>

<h4 id="user-provided-certificates">User-provided certificates</h4>

<p>A custom certificate can be used for secure communication by the Event Processing instance.
This method does not use the IBM Certificate Manager so the certificates that are provided must be managed by the user.
To use a custom certificate set <code class="language-plaintext highlighter-rouge">spec.authoring.tls.secretName</code> to be the name of the secret containing a CA certificate, server certificate, and a key that has the required DNS names for accessing the manager.</p>

<p>The following snippet is an example of a configuration that uses a user provided certificate:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">events.ibm.com/v1beta1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">EventProcessing</span>
<span class="c1"># ...</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">license</span><span class="pi">:</span>
    <span class="c1"># ...</span>
  <span class="s">authoring</span>
    <span class="s">tls</span><span class="pi">:</span>
      <span class="na">secretName</span><span class="pi">:</span> <span class="s">mySecret</span>
<span class="c1"># ...</span>
</code></pre></div></div>

<ul>
  <li>Optionally, specify the key in the secret that is pointing to the CA certificate <code class="language-plaintext highlighter-rouge">tls.caCertificate</code> (default, <code class="language-plaintext highlighter-rouge">ca.crt</code>).</li>
  <li>Optionally, specify the key in the secret that is pointing to the server certificate <code class="language-plaintext highlighter-rouge">tls.serverCertificate</code> (default, <code class="language-plaintext highlighter-rouge">tls.crt</code>).</li>
  <li>Optionally, specify the key in the secret that is pointing to the private key <code class="language-plaintext highlighter-rouge">tls.key</code> (default, <code class="language-plaintext highlighter-rouge">tls.key</code>).</li>
</ul>

<h4 id="user-provided-ui-certificates">User-provided UI certificates</h4>

<p>A separate custom certificate can be used for the UI. This certificate is presented to the browser when the Event Processing user interface is navigated.
To supply a custom certificate to the UI set <code class="language-plaintext highlighter-rouge">spec.authoring.tls.ui.secretName</code> to be the name of the secret containing the certificate.</p>

<p>The following snippet is an example of a configuration that uses a user provided certificate:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">events.ibm.com/v1beta1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">EventProcessing</span>
<span class="c1"># ...</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">license</span><span class="pi">:</span>
    <span class="c1"># ...</span>
  <span class="s">authoring</span>
    <span class="s">tls</span><span class="pi">:</span>
      <span class="na">ui</span><span class="pi">:</span>
        <span class="na">secretName</span><span class="pi">:</span> <span class="s">myUiSecret</span>
<span class="c1"># ...</span>
</code></pre></div></div>

<ul>
  <li>Optionally, specify the key in the secret that is pointing to the CA certificate <code class="language-plaintext highlighter-rouge">ui.caCertificate</code> (default, <code class="language-plaintext highlighter-rouge">ca.crt</code>).</li>
  <li>Optionally, specify the key in the secret that is pointing to the server certificate <code class="language-plaintext highlighter-rouge">ui.serverCertificate</code> (default, <code class="language-plaintext highlighter-rouge">tls.crt</code>).</li>
  <li>Optionally, specify the key in the secret that is pointing to the private key <code class="language-plaintext highlighter-rouge">ui.key</code> (default, <code class="language-plaintext highlighter-rouge">tls.key</code>).</li>
</ul>

<h3 id="deploy-networkpolicies">Deploy NetworkPolicies</h3>

<p>By default, the operator will deploy an instance specific NetworkPolicy when an instance of <code class="language-plaintext highlighter-rouge">EventProcessing</code> is created.
The deployment of these network policies can be turned off with the property <code class="language-plaintext highlighter-rouge">spec.deployNetworkPolicies</code></p>

<p>The following snippet is an example of a configuration that turns off the deployment of the NetworkPolicy:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">events.ibm.com/v1beta1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">EventProcessing</span>
<span class="c1"># ...</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">license</span><span class="pi">:</span>
    <span class="c1"># ...</span>
  <span class="na">deployNetworkPolicies</span><span class="pi">:</span> <span class="no">false</span>
<span class="c1"># ...</span>
</code></pre></div></div>

<p>For information, see <a href="../../security/network-policies">Network Policies</a>.</p>

          </div>


          
        </section>

        <aside class="sidebar__right ">
          
          <div class="fixedSidebar">
            <nav class="toc">
              <ul class="toc__menu">
  <li><a href="#configuring-flink">Configuring Flink</a>
    <ul>
      <li><a href="#before-you-begin">Before you begin</a></li>
      <li><a href="#configuring-flink-checkpointing">Configuring Flink checkpointing</a></li>
      <li><a href="#configuring-rocksdb">Configuring RocksDB</a></li>
      <li><a href="#configuring-parallelism">Configuring parallelism</a></li>
    </ul>
  </li>
  <li><a href="#configuring-event-processing">Configuring Event Processing</a>
    <ul>
      <li><a href="#enabling-persistent-storage">Enabling persistent storage</a></li>
      <li><a href="#dynamic-provisioning">Dynamic provisioning</a></li>
      <li><a href="#providing-persistent-volume">Providing persistent volume</a></li>
      <li><a href="#providing-persistent-volume-and-persistent-volume-claim">Providing persistent volume and persistent volume claim</a></li>
      <li><a href="#configuring-tls">Configuring TLS</a></li>
      <li><a href="#deploy-networkpolicies">Deploy NetworkPolicies</a></li>
    </ul>
  </li>
</ul>
            </nav>
          </div>
          
        </aside>


      </div>
      <div class="pageEnd">
        
          
  <nav class="pagination">
    
      <div class="previous" onclick="window.open('/event-automation/ep/installing/offline/','_self')">
        <div class="container">
          <a href="/event-automation/ep/installing/offline/" class="pagination--pager" title="Previous Item: Installing in an offline environment
">Previous</a>
          <h2 class="titlePreview">Installing in an offline environment
</h2>
        </div>
      </div>
    
    
      <div class="next" onclick="window.open('/event-automation/ep/installing/post-installation/','_self')">
        <div class="container">
          <a href="/event-automation/ep/installing/post-installation/" class="pagination--pager" title="Next Item: Post-installation tasks
">Next</a>
          <h2 class="titlePreview">Post-installation tasks
</h2>
        </div>
      </div>
      
  </nav>

        
      </div>
    </div>


  </div> <!-- Main content -->

</main></div>


    
      <div class="page__footer">
          <footer>
            <!-- start custom footer snippets -->

<!-- end custom footer snippets -->

            
<div class="page__footer-copyright"><a href="https://www.ibm.com/privacy/us/en/" rel="nofollow" target="_blank">Privacy Policy</a>  &nbsp;© Copyright IBM Corporation 2023</br>
<a href="http://localhost:4000/event-automation/accessibility/" rel="nofollow" target="_blank">Accessibility</a> </br> <a href="http://localhost:4000/event-automation/notices/" rel="nofollow" target="_blank">Notices</a></br>
          </footer>
      </div>      
    


    
  <script src="/event-automation/assets/js/main.min.js"></script>
  <!-- <script src="https://use.fontawesome.com/releases/v5.1.0/js/all.js"></script> -->






<script src="/event-automation/assets/js/design.js"></script>





<script src="/event-automation/assets/js/lunr/lunr.min.js"></script>
<script src="/event-automation/assets/js/lunr/lunr-store.js"></script>
<script src="/event-automation/assets/js/lunr/lunr-en.js"></script>





    

    
  </body>
</html>

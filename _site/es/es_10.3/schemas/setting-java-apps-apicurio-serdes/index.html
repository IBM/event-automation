<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Setting Java applications to use schemas with the Apicurio Registry serdes library - IBM Event Automation</title>
<meta name="description" content="Set up your Java applications to use schemas with the Apicurio Registry serdes library.">

<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="IBM Event Automation">
<meta property="og:url" content="http://localhost:4000/event-automation/es/es_10.3/schemas/setting-java-apps-apicurio-serdes/" />
<meta property="og:title" content="Event Streams | Setting Java applications to use schemas with the Apicurio Registry serdes library" />
<meta property="og:description" content="Set up your Java applications to use schemas with the Apicurio Registry serdes library." />

<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="IBM Event Automation | Setting Java applications to use schemas with the Apicurio Registry serdes library" />




  <meta property="og:description" content="Set up your Java applications to use schemas with the Apicurio Registry serdes library.">



  <meta property="og:image" content="http://localhost:4000/event-automation/assets/siteMeta/appIcon_og_fb.png">
  <meta name="twitter:image" content="http://localhost:4000/event-automation/assets/siteMeta/appIcon_og_square.png">



  <meta property="article:published_time" content="2023-06-28T12:13:19-04:00">






<link rel="canonical" href="http://localhost:4000/event-automation/es/es_10.3/schemas/setting-java-apps-apicurio-serdes/">





  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "http://localhost:4000/event-automation",
      "logo": "http://localhost:4000/event-automation/assets/siteMeta/appIcon_og_fb.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": null,
      "url": "http://localhost:4000/event-automation",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/event-automation/feed.xml" type="application/atom+xml" rel="alternate" title="IBM Event Automation Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/event-automation/assets/css/main.css">



<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<link rel="apple-touch-icon" sizes="180x180" href="http://localhost:4000/event-automation/assets/siteMeta/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-16x16.png">
<link rel="manifest" href="http://localhost:4000/event-automation/assets/siteMeta/site.webmanifest">
<link rel="mask-icon" href="http://localhost:4000/event-automation/assets/siteMeta/safari-pinned-tab.svg" color="#000000">
<link rel="shortcut icon" href="http://localhost:4000/event-automation/assets/siteMeta/favicon.ico">
<link rel="shortcut icon" type="image/png" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-16x16.png"/>
<link rel="shortcut icon" type="image/png" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-32x32.png"/>
<meta name="msapplication-TileColor" content="#000000">
<meta name="msapplication-config" content="http://localhost:4000/event-automation/assets/siteMeta/browserconfig.xml">
<meta name="theme-color" content="#000000">



<link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:400,600%7CIBM+Plex+Serif:300,400,500%7CIBM+Plex+Mono:300,400,500,700" rel="stylesheet">

<!-- end custom head snippets -->

    <link rel="shortcut icon" type="image/x-icon" href="/event-automation/assets/favicon.ico" >
    
    <base target="_parent">

  </head>
  <script src="/event-automation/assets/animation/lottie.js" type="text/javascript"></script>
  <script src="/event-automation/assets/js/connectors.js"></script>


  
  <body onload="urlChecker()" class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    




<div id="masthead" class="masthead">
  <!--
  <div class="masthead__goToIBMCloud">
  <div>
    You are viewing the documentation for the container-native version of IBM Event Automation.
  </div>
    <a class="link" target="_self" href="https://cloud.ibm.com/docs/EventStreams?topic=EventStreams-getting-started">Looking for the managed service on IBM Cloud? Click here.</a>
</div>
-->
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="mastheadNav">

      


        <div class="mastheadTitle">
          
          <a class="site-title" href="/event-automation/" target="_self"><span>IBM</span>&nbsp;Event Automation</a>
          <div class="viewOnIBMcom">
            <a href="https://www.ibm.com/products/event-automation" target="_blank">View product page</a>
          </div>
        </div>









        <div class="mastheadControls">
            <div class="menuScrollContainer">

        

                <ul id="visible-links" class="visible-links">
                  
                  
                  

                  




                  
                    <li class="masthead__menu-item active" onclick="window.open('http://localhost:4000/event-automation/es/','_self')">
                      <a href="http://localhost:4000/event-automation/es/" >Event Streams</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/eem/','_self')">
                      <a href="http://localhost:4000/event-automation/eem/" >Endpoint Management</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/ep/','_self')">
                      <a href="http://localhost:4000/event-automation/ep/" >Event Processing</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/connectors/','_self')">
                      <a href="http://localhost:4000/event-automation/connectors/" >Connectors</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/tutorials/','_self')">
                      <a href="http://localhost:4000/event-automation/tutorials/" >Tutorials</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/api/','_self')">
                      <a href="http://localhost:4000/event-automation/api/" >APIs...</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/support/','_self')">
                      <a href="http://localhost:4000/event-automation/support/" >Support</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/search/','_self')">
                      <button aria-label="Search Button" role="button" id="searchButton" class="search__toggle " type="button" name="search Button">
                        <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                          <path
                            d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z"
                            transform="translate(-.01)"></path>
                        </svg>
                      </button>
                    </li>
                  

                  
                </ul>
        

      </div>
    </div>
      </nav>
    </div>
  </div>
</div>


    <div id="initial-content" class="initial-content" role="main">






<main id="main" class="mainContainer" role="main">
    
      <div id="subMenu" class="subMenu">
        <div tabindex="0" class="menuIcon" id="menuIcon">
          <svg id="mobileMenu" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
            <g id="bottomLine">
              <line class="burgerLine" x1="14" y1="29" x2="34" y2="29" />
            </g>
            <g id="middleLine">
              <line class="burgerLine" x1="14" y1="24" x2="34" y2="24" />
            </g>
            <g id="topLine">
              <line class="burgerLine" x1="14" y1="19" x2="34" y2="19" />
            </g>
          </svg>
        </div>
        <div id="mobileVersionShortcut" class="versionContainer" tabindex="0">
          <a id="mobileVersionPillCurrent" class="versionPill">10.3</a>
        </div>
      </div>
    
  



<div id="sidebarMask" class="sidebarMask">

  </div>
  <div id="sidebar" class="sidebar sticky">
      <div aria-label="Change Version" role="button" aria-expanded="false"
      
        id="versionDropdown"
        tabindex="0"
        class="versionsBar"
       >
          <div class="selectedVersion" id="selectedVersion">
            <div class="versionContainer" >
              
                <a id="versionPillCurrent" class="versionPill">10.3</a>
                <a class="versionChange">Change Version</a>
              
            </div>
          </div>
          


          <div class="allVersions" id="allVersions">
            <ul>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/schemas/setting-java-apps-apicurio-serdes/" onclick="openVersion('/event-automation/es/schemas/setting-java-apps-apicurio-serdes/','es_11.2')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/schemas/setting-java-apps-apicurio-serdes/" class="versionPill inactive">11.2</a>
                      </div>
                      <div class="activeContainer">
                        
                      </div>
                      <div class="latest">
                        Latest
                      </div>
                    </li>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/es_11.1/schemas/setting-java-apps-apicurio-serdes/" onclick="openVersion('/event-automation/es/es_11.1/schemas/setting-java-apps-apicurio-serdes/','es_11.1')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/es_11.1/schemas/setting-java-apps-apicurio-serdes/" class="versionPill inactive">11.1</a>
                      </div>
                      <div class="activeContainer">
                        
                      </div>
                      <div class="latest">
                        
                      </div>
                    </li>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/es_11.0/schemas/setting-java-apps-apicurio-serdes/" onclick="openVersion('/event-automation/es/es_11.0/schemas/setting-java-apps-apicurio-serdes/','es_11.0')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/es_11.0/schemas/setting-java-apps-apicurio-serdes/" class="versionPill inactive">11.0</a>
                      </div>
                      <div class="activeContainer">
                        
                      </div>
                      <div class="latest">
                        
                      </div>
                    </li>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/es_10.5/schemas/setting-java-apps-apicurio-serdes/" onclick="openVersion('/event-automation/es/es_10.5/schemas/setting-java-apps-apicurio-serdes/','es_10.5')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/es_10.5/schemas/setting-java-apps-apicurio-serdes/" class="versionPill inactive">10.5</a>
                      </div>
                      <div class="activeContainer">
                        
                      </div>
                      <div class="latest">
                        
                      </div>
                    </li>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/es_10.4/schemas/setting-java-apps-apicurio-serdes/" onclick="openVersion('/event-automation/es/es_10.4/schemas/setting-java-apps-apicurio-serdes/','es_10.4')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/es_10.4/schemas/setting-java-apps-apicurio-serdes/" class="versionPill inactive">10.4</a>
                      </div>
                      <div class="activeContainer">
                        
                      </div>
                      <div class="latest">
                        
                      </div>
                    </li>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/es_10.3/schemas/setting-java-apps-apicurio-serdes/" onclick="openVersion('/event-automation/es/es_10.3/schemas/setting-java-apps-apicurio-serdes/','es_10.3')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/es_10.3/schemas/setting-java-apps-apicurio-serdes/" class="versionPill active">10.3</a>
                      </div>
                      <div class="activeContainer">
                        
                          <img alt="" src="http://localhost:4000/event-automation/images/checkbox.svg" />
                        
                      </div>
                      <div class="latest">
                        
                      </div>
                    </li>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/es_10.2/schemas/setting-java-apps-apicurio-serdes/" onclick="openVersion('/event-automation/es/es_10.2/schemas/setting-java-apps-apicurio-serdes/','es_10.2')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/es_10.2/schemas/setting-java-apps-apicurio-serdes/" class="versionPill inactive">10.2</a>
                      </div>
                      <div class="activeContainer">
                        
                      </div>
                      <div class="latest">
                        
                      </div>
                    </li>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/es_10.1/schemas/setting-java-apps-apicurio-serdes/" onclick="openVersion('/event-automation/es/es_10.1/schemas/setting-java-apps-apicurio-serdes/','es_10.1')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/es_10.1/schemas/setting-java-apps-apicurio-serdes/" class="versionPill inactive">10.1</a>
                      </div>
                      <div class="activeContainer">
                        
                      </div>
                      <div class="latest">
                        
                      </div>
                    </li>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/es_10.0/schemas/setting-java-apps-apicurio-serdes/" onclick="openVersion('/event-automation/es/es_10.0/schemas/setting-java-apps-apicurio-serdes/','es_10.0')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/es_10.0/schemas/setting-java-apps-apicurio-serdes/" class="versionPill inactive">10.0</a>
                      </div>
                      <div class="activeContainer">
                        
                      </div>
                      <div class="latest">
                        
                      </div>
                    </li>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/es_2019.4/schemas/setting-java-apps-apicurio-serdes/" onclick="openVersion('/event-automation/es/es_2019.4/schemas/setting-java-apps-apicurio-serdes/','es_2019.4')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/es_2019.4/schemas/setting-java-apps-apicurio-serdes/" class="versionPill inactive">2019.4</a>
                      </div>
                      <div class="activeContainer">
                        
                      </div>
                      <div class="latest">
                        
                      </div>
                    </li>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/es_2019.2.1/schemas/setting-java-apps-apicurio-serdes/" onclick="openVersion('/event-automation/es/es_2019.2.1/schemas/setting-java-apps-apicurio-serdes/','es_2019.2.1')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/es_2019.2.1/schemas/setting-java-apps-apicurio-serdes/" class="versionPill inactive">2019.2.1</a>
                      </div>
                      <div class="activeContainer">
                        
                      </div>
                      <div class="latest">
                        
                      </div>
                    </li>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/es_2019.1.1/schemas/setting-java-apps-apicurio-serdes/" onclick="openVersion('/event-automation/es/es_2019.1.1/schemas/setting-java-apps-apicurio-serdes/','es_2019.1.1')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/es_2019.1.1/schemas/setting-java-apps-apicurio-serdes/" class="versionPill inactive">2019.1.1</a>
                      </div>
                      <div class="activeContainer">
                        
                      </div>
                      <div class="latest">
                        
                      </div>
                    </li>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/es_2018.3.1/schemas/setting-java-apps-apicurio-serdes/" onclick="openVersion('/event-automation/es/es_2018.3.1/schemas/setting-java-apps-apicurio-serdes/','es_2018.3.1')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/es_2018.3.1/schemas/setting-java-apps-apicurio-serdes/" class="versionPill inactive">2018.3.1</a>
                      </div>
                      <div class="activeContainer">
                        
                      </div>
                      <div class="latest">
                        
                      </div>
                    </li>

                

            </ul>
          </div>
        </div>

  
    
      
      
      
    
    
      

<nav class="nav__list">
  
  <ul class="nav__items">

    
      <li>
        
          <span class="nav__sub-title">About</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/about/overview/" class="">Introduction</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/about/whats-new/" class="">What's new</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/about/key-concepts/" class="">Key concepts</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/about/producing-messages/" class="">Producing messages</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/about/consuming-messages/" class="">Consuming messages</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/about/partition-leadership/" class="">Partition leadership</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Installing and upgrading</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/installing/trying-out/" class="">Trying out Event Streams</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/installing/prerequisites/" class="">Prerequisites</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/installing/planning/" class="">Planning your installation</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/installing/capacity-planning/" class="">Performance and capacity planning</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/installing/preparing-multizone/" class="">Preparing for multizone clusters</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/installing/installing/" class="">Installing</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/installing/configuring/" class="">Configuring</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/installing/post-installation/" class="">Post-installation tasks</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/installing/moving-from-oss-kafka/" class="">Migrating from open-source Kafka</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/installing/uninstalling/" class="">Uninstalling</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/installing/upgrading/" class="">Upgrading and migrating</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/installing/migrating-to-apicurio/" class="">Migrating to Apicurio Registry</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Getting started</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/getting-started/logging-in/" class="">Logging in</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/getting-started/creating-topics/" class="">Creating a Kafka topic</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/getting-started/generating-starter-app/" class="">Running a starter application</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/getting-started/testing-loads/" class="">Creating and testing message loads</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/getting-started/client/" class="">Creating Kafka client applications</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/getting-started/connecting/" class="">Connecting clients</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/getting-started/using-kafka-console-tools/" class="">Using Apache Kafka console tools</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Schemas</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/schemas/overview/" class="">Schemas overview</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/schemas/creating/" class="">Creating and adding schemas</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/schemas/manage-lifecycle/" class="">Managing schema lifecycle</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/schemas/setting-java-apps/" class="">Setting Java applications to use schemas</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/schemas/setting-nonjava-apps/" class="">Setting non-Java applications to use schemas</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/schemas/migrating/" class="">Migrating to Event Streams schema registry</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/schemas/using-with-rest-producer/" class="">Using schemas with the REST producer API</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/schemas/schema-api/" class="">Using the schema API</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/schemas/setting-java-apps-apicurio-serdes/" class="active">Setting Java applications to use schemas with the Apicurio Registry serdes library</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Security</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/security/managing-access/" class="">Managing access</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/security/encrypting-data/" class="">Encrypting your data</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/security/secure-jmx-connections/" class="">Configuring secure JMX connections</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/security/network-policies/" class="">Network policies</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/security/gdpr-considerations/" class="">Considerations for GDPR</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Geo-replication</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/georeplication/about/" class="">About geo-replication</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/georeplication/planning/" class="">Planning for geo-replication</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/georeplication/setting-up/" class="">Setting up geo-replication</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/georeplication/health/" class="">Monitoring and managing geo-replication</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/georeplication/failover/" class="">Switching clusters</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Connecting external systems</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/connecting/rest-api/" class="">Event Streams producer API</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/connecting/connectors/" class="">Kafka Connect and connectors</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/connecting/setting-up-connectors/" class="">Setting up and running connectors</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/connecting/mq/" class="">Connecting to IBM MQ</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/connecting/mq/source/" class="">Running the MQ source connector</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/connecting/mq/sink/" class="">Running the MQ sink connector</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/connecting/mq/zos/" class="">Running connectors on IBM z/OS</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Administering</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/administering/deployment-health/" class="">Monitoring deployment health</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/administering/cluster-health/" class="">Monitoring Kafka cluster health</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/administering/topic-health/" class="">Monitoring topic health</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/administering/consumer-lag/" class="">Monitoring consumer group lag</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/administering/tracing/" class="">Monitoring applications with distributed tracing</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/administering/external-monitoring/" class="">Monitoring with external tools</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/administering/modifying-installation/" class="">Modifying installation settings</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/administering/cruise-control/" class="">Optimizing Kafka cluster with Cruise Control</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/administering/scaling/" class="">Scaling</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/administering/quotas/" class="">Setting client quotas</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/administering/managing-multizone/" class="">Managing a multizone setup</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/administering/stopping-starting/" class="">Stopping and starting Event Streams</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Troubleshooting</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/troubleshooting/intro/" class="">Troubleshooting overview</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/troubleshooting/gathering-logs/" class="">Gathering logs</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/troubleshooting/resources-not-available/" class="">Resources not available</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/troubleshooting/georeplication-error/" class="">Error when creating multiple geo-replicators</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/troubleshooting/kafka-producer-error/" class="">TimeoutException when using standard Kafka producer</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/troubleshooting/kafka-consumer-hangs/" class="">Standard Kafka consumer hangs</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/troubleshooting/cloudctl-es-not-registered/" class="">Command 'cloudctl es' fails with 'not a registered command' error</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/troubleshooting/cloudctl-es-fails/" class="">Command 'cloudctl es' produces 'FAILED' message</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/troubleshooting/chrome-ubuntu-issue/" class="">UI does not open when using Chrome on Ubuntu</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/troubleshooting/error-removing-destination/" class="">Unable to remove destination cluster</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/troubleshooting/ui-403-error/" class="">403 error when signing in</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/troubleshooting/problem-with-piping/" class="">The UI cannot load data</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/troubleshooting/firefox-black-images/" class="">UI shows black images in Firefox</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/troubleshooting/default-scc-issues/" class="">Event Streams not installing due to Security Context Constraint (SCC) issues</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/troubleshooting/schema-registry-not-authorized-error/" class="">Not authorized error when building maven schema registry project</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/troubleshooting/authorization-failed-exceptions/" class="">Client receives AuthorizationException when communicating with brokers</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/troubleshooting/504-ui-consumer-groups/" class="">504 timeout error when viewing consumer groups in the Event Streams UI</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/troubleshooting/kafka-exporter-not-deployed/" class="">Kafka exporter is not deployed</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/troubleshooting/overriding-route-hostnames/" class="">Unable to override external listener route host</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/troubleshooting/metrics-not-available/" class="">Event Streams metrics unavailable</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/troubleshooting/failed-status-during-cs-install/" class="">Event Streams installation reports failed status</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/troubleshooting/kcs2i-airgapped/" class="">KafkaConnectS2I build fails in an air-gapped installation</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_10.3/troubleshooting/dockerio-image-pull-fails/" class="">Pulling images for Event Streams 10.3.0 fails</a>
            </li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>
    
  
  </div>


  <div class="mainContent">
    
    <div id="pageContainer" class="page" itemscope itemtype="http://schema.org/CreativeWork">
      
      <div class="page__inner-wrap">
      

        
        <section class="page__content pageSpacing" itemprop="text">
          
        
          <header>
            <h1 id="page-title" class="page__title" itemprop="headline">
              Setting Java applications to use schemas with the Apicurio Registry serdes library
</h1>
            
          </header>  
        
        

                    
          <div class="content">
            <p>If you have Kafka producer or consumer applications written in Java, use the following guidance to set them up to use schemas and the Apicurio Registry <code class="language-plaintext highlighter-rouge">serdes</code> library.</p>

<p><strong>Note:</strong> If you have Kafka clients written in other languages than Java, see the guidance about <a href="../setting-nonjava-apps">setting up non-Java applications</a> to use schemas.</p>

<h2 id="preparing-the-setup">Preparing the setup</h2>

<p>To use schemas stored in the Apicurio Registry in Event Streams, your client applications need to be able to serialize and deserialize messages based on schemas.</p>

<ul>
  <li>Producing applications use a serializer to produce messages conforming to a specific schema, and use unique identifiers in the message headers to determine which schema is being used.</li>
  <li>Consuming applications then use a deserializer to consume messages that have been serialized using the same schema. The schema is retrieved from the schema registry based on the unique identifiers in the message headers.</li>
</ul>

<p>The Event Streams UI provides help with setting up your Java applications to use schemas.</p>

<p><strong>Note:</strong> Apicurio Registry in Event Streams works with multiple schema registry <code class="language-plaintext highlighter-rouge">serdes</code> libraries, including the Event Streams schema registry <code class="language-plaintext highlighter-rouge">serdes</code> library and the Apicurio Registry <code class="language-plaintext highlighter-rouge">serdes</code> library. You can use either <code class="language-plaintext highlighter-rouge">serdes</code> library in your applications by adding Maven dependencies to your project <code class="language-plaintext highlighter-rouge">pom.xml</code> files. The following instructions and code snippets use the Apicurio Registry <code class="language-plaintext highlighter-rouge">serdes</code> library. To use the Event Streams schema registry <code class="language-plaintext highlighter-rouge">serdes</code> library, see the guidance about <a href="../setting-java-apps">setting up Java applications</a> to use schemas.</p>

<p>To set up your Java applications to use the Apicurio Registry <code class="language-plaintext highlighter-rouge">serdes</code> library with Apicurio Registry in Event Streams, prepare the connection for your application as follows:</p>

<ol>
  <li>Log in to your Event Streams UI as an administrator from a supported web browser (see how to determine the <a href="../../getting-started/logging-in/">login URL</a> for your Event Streams UI).</li>
  <li>Ensure you have <a href="../creating">added schemas</a> to the registry.</li>
  <li>Click <strong>Schema registry</strong> in the primary navigation.</li>
  <li>Select a schema from the list and click the row for the schema.</li>
  <li>Click <strong>Connect to the latest version</strong>. Alternatively, if you want to use a different version of the schema, click the row for the schema version, and click <strong>Connect to this version</strong>.</li>
  <li>
    <p>Set the preferences for your connection in the <strong>Configure the schema connection</strong> section. Use the defaults or change them by clicking <strong>Change configuration</strong>.</p>

    <ul>
      <li>
        <p>For producers, set the method for <strong>Message encoding</strong>.</p>

        <ul>
          <li><strong>Binary</strong> (default): Binary-encoded messages are smaller and typically quicker to process. However the message data is not human-readable without an application that is able to apply the schema.</li>
          <li><strong>JSON</strong>: JSON-encoded messages are human-readable and can still be used by consumers that are not using the Event Streams schema registry.</li>
        </ul>
      </li>
      <li>
        <p>For consumers, set the <strong>Message deserialization behavior</strong> for the behavior to use when an application encounters messages that do not conform to the schema.</p>

        <ul>
          <li><strong>Strict</strong> (default): Strict behavior means the message deserializer will fail to process non-conforming messages, throwing an exception if one is encountered.</li>
          <li><strong>Permissive</strong>: Permissive behavior means the message deserializer will return a null message when a non-conforming message is encountered. It will not throw an exception, and will allow a Kafka consumer to continue to process further messages.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>If any configuration was changed, click <strong>Save</strong>.</li>
  <li>Click <strong>Generate credentials</strong> to generate SCRAM or Mutual TLS credentials and follow the instructions.<br />
<strong>Important:</strong> Ensure you make note of the information provided upon completion as you will need this later.<br />
Alternatively you can generate credentials later by using the Event Streams <a href="../../security/managing-access#creating-a-kafkauser-in-the-ibm-event-streams-ui">UI</a> or <a href="../../security/managing-access#creating-a-kafkauser-in-the-ibm-event-streams-cli">CLI</a>.</li>
  <li>Click <strong>Generate connection details</strong>.</li>
  <li>Click <strong>Download certificate</strong> to download the cluster PKCS12 certificate. This is the Java truststore file which contains the server certificate. Take a copy of the <strong>Certificate password</strong> for use with the certificate in your application.</li>
  <li>
    <p>Add the following dependency to your project Maven <code class="language-plaintext highlighter-rouge">pom.xml</code> file to use the Apicurio Registry  <code class="language-plaintext highlighter-rouge">serdes</code> library:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;dependency&gt;
    &lt;groupId&gt;io.apicurio&lt;/groupId&gt;
    &lt;artifactId&gt;apicurio-registry-utils-serde&lt;/artifactId&gt;
    &lt;version&gt;1.3.1.Final&lt;/version&gt;
&lt;/dependency&gt;
</code></pre></div>    </div>
  </li>
  <li>
    <p>If you want to generate specific schema classes from your project Avro schema files, add the following Avro plugin to your project Maven <code class="language-plaintext highlighter-rouge">pom.xml</code> file, replacing <code class="language-plaintext highlighter-rouge">SCHEMA-FILE-NAME</code> with the name of your schema file.</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;profile&gt;
  &lt;id&gt;avro&lt;/id&gt;
  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.avro&lt;/groupId&gt;
        &lt;artifactId&gt;avro-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;1.9.2&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;phase&gt;generate-sources&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;schema&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
                &lt;sourceDirectory&gt;${project.basedir}/src/main/resources/avro-schemas/&lt;/sourceDirectory&gt;
                &lt;includes&gt;
                    &lt;include&gt;SCHEMA-FILE-NAME.avsc&lt;/include&gt;
                &lt;/includes&gt;
                &lt;outputDirectory&gt;${project.build.directory}/generated-sources&lt;/outputDirectory&gt;
            &lt;/configuration&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;
&lt;/profile&gt;
</code></pre></div>    </div>
  </li>
  <li>Add snippets into your application code as described in the following sections.
    <ul>
      <li><a href="#setting-up-producers-to-use-schemas">Setting up producers to use schemas</a></li>
      <li><a href="#setting-up-consumers-to-use-schemas">Setting up consumers to use schemas</a></li>
    </ul>
  </li>
</ol>

<h2 id="additional-configuration-options-for-apicurio-serdes-library">Additional configuration options for Apicurio <code class="language-plaintext highlighter-rouge">serdes</code> library</h2>

<p>The Apicurio <code class="language-plaintext highlighter-rouge">serdes</code> library supports the following configuration options that can be specified to change how data is serialized.</p>

<table>
  <tbody>
    <tr>
      <td>Key</td>
      <td>Value</td>
      <td>Description</td>
    </tr>
    <tr>
      <td>apicurio.registry.use.headers</td>
      <td>true</td>
      <td>Use this option to store the schema ID in the header of the message rather than within the payload.</td>
    </tr>
    <tr>
      <td>apicurio.avro.encoding</td>
      <td>JSON or BINARY</td>
      <td>Specify whether to use BINARY (default) or JSON encoding within the Avro serializer</td>
    </tr>
  </tbody>
</table>

<p><strong>Note:</strong> If you are using headers to store the schema ID, you can override the keys used in the header with the following values:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">apicurio.key.artifactId.name</code></li>
  <li><code class="language-plaintext highlighter-rouge">apicurio.value.artifactId.name</code></li>
  <li><code class="language-plaintext highlighter-rouge">apicurio.key.version.name</code></li>
  <li><code class="language-plaintext highlighter-rouge">apicurio.value.version.name</code></li>
  <li><code class="language-plaintext highlighter-rouge">apicurio.key.globalId.name</code></li>
  <li><code class="language-plaintext highlighter-rouge">apicurio.value.globalId.name</code></li>
</ul>

<p>By setting these values you can change the name of the header that the Apicurio <code class="language-plaintext highlighter-rouge">serdes</code> library uses when adding headers for the <code class="language-plaintext highlighter-rouge">artifactId</code>, <code class="language-plaintext highlighter-rouge">version</code>, or <code class="language-plaintext highlighter-rouge">globalId</code> in the Kafka message.</p>

<h2 id="setting-up-producers-to-use-schemas">Setting up producers to use schemas</h2>

<ol>
  <li>Ensure you have <a href="#preparing-the-setup">prepared</a> for the setup, including configuring connection settings, downloading Java dependencies if not using Maven, and copying code snippets for a producing application.</li>
  <li>If your project does not use Maven, ensure you add the location of the JAR files to the build path of your producer Kafka application.</li>
  <li>Add the following code snippets to your application code.</li>
</ol>

<h3 id="imports">Imports</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import java.io.File;
import java.util.Properties;

import io.apicurio.registry.utils.serde.AbstractKafkaStrategyAwareSerDe;
import io.apicurio.registry.utils.serde.AvroKafkaSerializer;

import org.apache.avro.Schema;
import org.apache.avro.generic.GenericData;
import org.apache.avro.generic.GenericRecord;

import org.apache.kafka.clients.CommonClientConfigs;
import org.apache.kafka.common.config.SaslConfigs;
import org.apache.kafka.common.config.SslConfigs;

import org.apache.kafka.clients.producer.KafkaProducer;
import org.apache.kafka.clients.producer.ProducerRecord;
</code></pre></div></div>

<h3 id="connection-properties">Connection properties</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Properties props = new Properties();

// TLS Properties
props.put(SslConfigs.SSL_PROTOCOL_CONFIG, "TLSv1.2");
props.put(SslConfigs.SSL_TRUSTSTORE_LOCATION_CONFIG, "&lt;ca_p12_file_location&gt;");
props.put(SslConfigs.SSL_TRUSTSTORE_PASSWORD_CONFIG, "&lt;ca_p12_password&gt;");

//If your Kafka and Schema registry endpoints do not use the same authentication method, you will need
//to duplicate the properties object - and add the Schema Registry authentication and connection properties
//to 'props', and the Kafka authentication and connection properties to 'kafkaProps'. The different properties objects
//are then supplied to the Serializer and Producer/Consumer respectively.
//Uncomment the next two lines.
//Properties kafkaProps = new Properties();
//kafkaProps.putAll(props);

// TLS Properties for Apicurio Registry connection
props.put(AbstractKafkaStrategyAwareSerDe.REGISTRY_REQUEST_TRUSTSTORE_LOCATION, "&lt;ca_p12_file_location&gt;");
props.put(AbstractKafkaStrategyAwareSerDe.REGISTRY_REQUEST_TRUSTSTORE_PASSWORD, "&lt;ca_p12_password&gt;");

// SCRAM authentication properties - uncomment to connect using Scram
//props.put(CommonClientConfigs.SECURITY_PROTOCOL_CONFIG, "SASL_SSL");
//props.put(SaslConfigs.SASL_MECHANISM, "SCRAM-SHA-512");
//String saslJaasConfig = "org.apache.kafka.common.security.scram.ScramLoginModule required "
//+ "username=\"&lt;username&gt;\" password=\"&lt;password&gt;\";";
//props.put(SaslConfigs.SASL_JAAS_CONFIG, saslJaasConfig);
//
// URL for Apicurio Registry connection including basic auth parameters
//props.put(AbstractKafkaStrategyAwareSerDe.REGISTRY_URL_CONFIG_PARAM, "https://&lt;username&gt;:&lt;password&gt;@&lt;Schema registry endpoint&gt;");

// Mutual authentication properties - uncomment to connect using Mutual authentication
//props.put(CommonClientConfigs.SECURITY_PROTOCOL_CONFIG, "SSL");
//props.put(SslConfigs.SSL_KEYSTORE_LOCATION_CONFIG, "&lt;user_p12_file_location&gt;");
//props.put(SslConfigs.SSL_KEYSTORE_PASSWORD_CONFIG, "&lt;user_p12_password&gt;");
//
// Mutual authentication properties for Apicurio Registry connection
//props.put(AbstractKafkaStrategyAwareSerDe.REGISTRY_REQUEST_KEYSTORE_LOCATION, "&lt;user_p12_file_location&gt;");
//props.put(AbstractKafkaStrategyAwareSerDe.REGISTRY_REQUEST_KEYSTORE_LOCATION, "&lt;user_p12_file_location&gt;");
//
// URL for Apicurio Registry connection
//props.put(AbstractKafkaStrategyAwareSerDe.REGISTRY_URL_CONFIG_PARAM, "https://&lt;Schema registry endpoint&gt;");

// Set the ID strategy to use the fully-qualified schema name (including namespace)
props.put(AbstractKafkaStrategyAwareSerDe.REGISTRY_ARTIFACT_ID_STRATEGY_CONFIG_PARAM, "io.apicurio.registry.utils.serde.strategy.RecordIdStrategy");

// Kafka connection
props.put(CommonClientConfigs.BOOTSTRAP_SERVERS_CONFIG, "&lt;Kafka listener&gt;");
</code></pre></div></div>

<p><strong>Note:</strong> Uncomment lines depending on your authentication settings. Replace:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;ca_p12_file_location&gt;</code> with the path to the Java truststore file you downloaded earlier.</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;ca_p12_password&gt;</code> with the truststore password which has the permissions needed for your application.</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;Kafka listener&gt;</code> with the bootstrap address (find out how to <a href="../../getting-started/connecting/#obtaining-the-bootstrap-address">obtain the address</a>)</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;Schema registry endpoint&gt;</code> with the endpoint address for Apicurio Registry in Event Streams.</li>
  <li>For SCRAM, replace <code class="language-plaintext highlighter-rouge">&lt;username&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;password&gt;</code> with the SCRAM username and password.</li>
  <li>For Mutual authentication, replace <code class="language-plaintext highlighter-rouge">&lt;user_p12_file_location&gt;</code> with the path to the <code class="language-plaintext highlighter-rouge">user.p12</code> file extracted from the <code class="language-plaintext highlighter-rouge">.zip</code> file downloaded earlier and <code class="language-plaintext highlighter-rouge">&lt;user_p12_password&gt;</code> with the contents of the <code class="language-plaintext highlighter-rouge">user.password</code> file in the same <code class="language-plaintext highlighter-rouge">.zip</code> file.</li>
</ul>

<h3 id="producer-code-example">Producer code example</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// Set the value serializer for produced messages to use the Apicurio Registry serializer
props.put("key.serializer", "org.apache.kafka.common.serialization.StringSerializer");
props.put("value.serializer", "io.apicurio.registry.utils.serde.AvroKafkaSerializer");

// Get a new Generic KafkaProducer
KafkaProducer&lt;String, GenericRecord&gt; producer = new KafkaProducer&lt;&gt;(props);

// Read in the local schema file
Schema.Parser schemaDefinitionParser = new Schema.Parser();
Schema schema = schemaDefinitionParser.parse(new File("&lt;path_to_schema_file.avsc&gt;"));

// Get a new Generic record based on the schema
GenericRecord genericRecord = new GenericData.Record(schema);

// Add fields and values to the genericRecord, for example:
// genericRecord.put("title", "this is the value for a title field");

// Prepare the record
ProducerRecord&lt;String, GenericRecord&gt; producerRecord =
    new ProducerRecord&lt;String, GenericRecord&gt;("&lt;my_topic&gt;", genericRecord);

// Send the record to Kafka
producer.send(producerRecord);

// Close the producer
producer.close();

</code></pre></div></div>

<p>The Kafka configuration property <code class="language-plaintext highlighter-rouge">value.serializer</code> is set to <code class="language-plaintext highlighter-rouge">io.apicurio.registry.utils.serde.AvroKafkaSerializer</code>, telling Kafka to use the Apicurio Registry Avro serializer for message values when producing messages. You can also use the Apicurio Registry Avro serializer for message keys.</p>

<p><strong>Note:</strong> Use the <code class="language-plaintext highlighter-rouge">put</code> method in the <code class="language-plaintext highlighter-rouge">GenericRecord</code> class to set field names and values in your message.</p>

<p><strong>Note:</strong> Replace:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;my_topic&gt;</code> with the name of the topic to produce messages to.</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;path_to_schema_file.avsc&gt;</code> with the path to the Avro schema file.</li>
</ul>

<p><strong>Note:</strong> If you want to retrieve the schema from the registry instead of loading the file locally, you can use the following code:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// Convert kafka connection properties to a Map
Map&lt;String, Object&gt; config = (Map) props;
// Create the client
RegistryRestClient client = RegistryRestClientFactory.create(REGISTRY_URL, config);

try {
    // Get the schema from apicurio and convert to an avro schema
    Schema schema = new Schema.Parser().parse(client.getLatestArtifact(artifactId));
} catch (Exception e) {
    e.printStackTrace();
}
</code></pre></div></div>

<h2 id="setting-up-consumers-to-use-schemas">Setting up consumers to use schemas</h2>

<ol>
  <li>Ensure you have <a href="#preparing-the-setup">prepared</a> for the setup, including configuring connection settings, downloading Java dependencies if not using Maven, and copying code snippets for a consuming application.</li>
  <li>If your project does not use Maven, ensure you add the location of the JAR files to the build path of your consumer Kafka application.</li>
  <li>Add the following code snippets to your application code.</li>
</ol>

<h3 id="imports-1">Imports</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import java.time.Duration;
import java.util.Arrays;
import java.util.Properties;

import io.apicurio.registry.utils.serde.AbstractKafkaSerDe;

import org.apache.avro.generic.GenericData;
import org.apache.avro.generic.GenericRecord;

import org.apache.kafka.clients.CommonClientConfigs;
import org.apache.kafka.common.config.SaslConfigs;
import org.apache.kafka.common.config.SslConfigs;
import org.apache.kafka.clients.consumer.ConsumerRecords;
import org.apache.kafka.clients.consumer.ConsumerRecord;
import org.apache.kafka.clients.consumer.KafkaConsumer;
</code></pre></div></div>

<h3 id="connection-properties-1">Connection properties</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Properties props = new Properties();

// TLS Properties
props.put(SslConfigs.SSL_PROTOCOL_CONFIG, "TLSv1.2");
props.put(SslConfigs.SSL_TRUSTSTORE_LOCATION_CONFIG, "&lt;ca_p12_file_location&gt;");
props.put(SslConfigs.SSL_TRUSTSTORE_PASSWORD_CONFIG, "&lt;ca_p12_password&gt;");

//If your Kafka and Schema registry endpoints do not use the same authentication method, you will need
//to duplicate the properties object - and add the Schema Registry authentication and connection properties
//to 'props', and the Kafka authentication and connection properties to 'kafkaProps'. The different properties objects
//are then supplied to the Serializer and Producer/Consumer respectively.
//Uncomment the next two lines.
//Properties kafkaProps = new Properties();
//kafkaProps.putAll(props);

// TLS Properties for Apicurio Registry connection
props.put(AbstractKafkaSerDe.REGISTRY_REQUEST_TRUSTSTORE_LOCATION, "&lt;ca_p12_file_location&gt;");
props.put(AbstractKafkaSerDe.REGISTRY_REQUEST_TRUSTSTORE_PASSWORD, "&lt;ca_p12_password&gt;");

// SCRAM authentication properties - uncomment to connect using Scram
//props.put(CommonClientConfigs.SECURITY_PROTOCOL_CONFIG, "SASL_SSL");
//props.put(SaslConfigs.SASL_MECHANISM, "SCRAM-SHA-512");
//String saslJaasConfig = "org.apache.kafka.common.security.scram.ScramLoginModule required "
//+ "username=\"&lt;username&gt;\" password=\"&lt;password&gt;\";";
//props.put(SaslConfigs.SASL_JAAS_CONFIG, saslJaasConfig);
//
// URL for Apicurio Registry connection including basic auth parameters
//props.put(AbstractKafkaSerDe.REGISTRY_URL_CONFIG_PARAM, "https://&lt;username&gt;:&lt;password&gt;@&lt;Schema registry endpoint&gt;");

// Mutual authentication properties - uncomment to connect using Mutual authentication
//props.put(CommonClientConfigs.SECURITY_PROTOCOL_CONFIG, "SSL");
//props.put(SslConfigs.SSL_KEYSTORE_LOCATION_CONFIG, "&lt;user_p12_file_location&gt;");
//props.put(SslConfigs.SSL_KEYSTORE_PASSWORD_CONFIG, "&lt;user_p12_password&gt;");
//
// Mutual authentication properties for Apicurio Registry connection
//props.put(AbstractKafkaSerDe.REGISTRY_REQUEST_KEYSTORE_LOCATION, "&lt;user_p12_file_location&gt;");
//props.put(AbstractKafkaSerDe.REGISTRY_REQUEST_KEYSTORE_LOCATION, "&lt;user_p12_file_location&gt;");
//
// URL for Apicurio Registry connection
//props.put(AbstractKafkaSerDe.REGISTRY_URL_CONFIG_PARAM, "https://&lt;Schema registry endpoint&gt;");

// Kafka connection
props.put(CommonClientConfigs.BOOTSTRAP_SERVERS_CONFIG, "&lt;Kafka listener&gt;");
</code></pre></div></div>

<p><strong>Note:</strong> Uncomment lines depending on your authentication settings. Replace:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;ca_p12_file_location&gt;</code> with the path to the Java truststore file you downloaded earlier.</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;ca_p12_password&gt;</code> with the truststore password which has the permissions needed for your application.</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;Kafka listener&gt;</code> with the bootstrap address (find out how to <a href="../../getting-started/connecting/#obtaining-the-bootstrap-address">obtain the address</a>)</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;Schema registry endpoint&gt;</code> with the endpoint address for Apicurio Registry in Event Streams.</li>
  <li>For SCRAM, replace <code class="language-plaintext highlighter-rouge">&lt;username&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;password&gt;</code> with the SCRAM username and password.</li>
  <li>For Mutual authentication, replace <code class="language-plaintext highlighter-rouge">&lt;user_p12_file_location&gt;</code> with the path to the <code class="language-plaintext highlighter-rouge">user.p12</code> file extracted from the <code class="language-plaintext highlighter-rouge">.zip</code> file downloaded earlier and <code class="language-plaintext highlighter-rouge">&lt;user_p12_password&gt;</code> with the contents of the <code class="language-plaintext highlighter-rouge">user.password</code> file in the same <code class="language-plaintext highlighter-rouge">.zip</code> file.</li>
</ul>

<h3 id="consumer-code-example">Consumer code example</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// Set the value deserializer for consumed messages to use the Apicurio Registry deserializer
props.put("key.deserializer", "org.apache.kafka.common.serialization.StringDeserializer");
props.put("value.deserializer", "io.apicurio.registry.utils.serde.AvroKafkaDeserializer");

// Set the consumer group ID in the properties
props.put("group.id", "&lt;my_consumer_group&gt;");

KafkaConsumer&lt;String, GenericRecord&gt; consumer = new KafkaConsumer&lt;&gt;(props);

// Subscribe to the topic
consumer.subscribe(Arrays.asList("&lt;my_topic&gt;"));

// Poll the topic to retrieve records
while(true) {

    ConsumerRecords&lt;String, GenericRecord&gt; records = consumer.poll(Duration.ofSeconds(5));

    for (ConsumerRecord&lt;String, GenericRecord&gt; record : records) {
        GenericRecord genericRecord = record.value();

        // Get fields and values from the genericRecord, for example:
        // String titleValue = genericRecord.get("title").toString();
    }
}
</code></pre></div></div>

<p>The Kafka configuration property <code class="language-plaintext highlighter-rouge">value.serializer</code> is set to <code class="language-plaintext highlighter-rouge">io.apicurio.registry.utils.serde.AvroKafkaDeserializer</code>, telling Kafka to use the Apicurio Registry Avro deserializer for message values when consuming messages. You can also use the Apicurio Registry Avro deserializer for message keys.</p>

<p><strong>Note:</strong> Use the <code class="language-plaintext highlighter-rouge">get</code> method in the <code class="language-plaintext highlighter-rouge">GenericRecord</code> class to get field names and values.</p>

<p><strong>Note:</strong> Replace:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;my_consumer_group&gt;</code> with the name of the consumer group to use.</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;my_topic&gt;</code> with the name of the topic to consume messages from.</li>
</ul>

<h2 id="setting-up-kafka-streams-applications">Setting up Kafka Streams applications</h2>

<p>Kafka Streams applications can also use the Apicurio Registry <code class="language-plaintext highlighter-rouge">serdes</code> library to serialize and deserialize messages. In particular, the <code class="language-plaintext highlighter-rouge">io.apicurio.registry.utils.serde.AvroSerde</code> class can be used to provide the Apicurio Avro serializer and deserializer for the <code class="language-plaintext highlighter-rouge">"default.value.serde"</code> or <code class="language-plaintext highlighter-rouge">"default.key.serdes"</code> properties. Additionally, setting the <code class="language-plaintext highlighter-rouge">"apicurio.registry.use-specific-avro-reader"</code> property to <code class="language-plaintext highlighter-rouge">"true"</code> tells the Apicurio Registry <code class="language-plaintext highlighter-rouge">serdes</code> library to use specific schema classes that have been generated from your project Avro schema files. For example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import io.apicurio.registry.utils.serde.AbstractKafkaSerDe;
import io.apicurio.registry.utils.serde.AvroSerde;
import io.apicurio.registry.utils.serde.avro.AvroDatumProvider;

import org.apache.kafka.common.serialization.Serdes;
import org.apache.kafka.streams.StreamsConfig;

import java.util.Properties;


...

final Properties streamsConfiguration = new Properties();

// URL for Apicurio Registry connection (including basic auth parameters)
streamsConfiguration.put(AbstractKafkaSerDe.REGISTRY_URL_CONFIG_PARAM, "https://&lt;username&gt;:&lt;password&gt;@&lt;Schema registry endpoint&gt;");

// Specify default serializer and deserializer for record keys and for record values.
streamsConfiguration.put(StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.String().getClass().getName());
streamsConfiguration.put(StreamsConfig.DEFAULT_VALUE_SERDE_CLASS_CONFIG, AvroSerde.class);

// Specify using specific (generated) Avro schema classes
streamsConfiguration.put(AvroDatumProvider.REGISTRY_USE_SPECIFIC_AVRO_READER_CONFIG_PARAM, "true");
</code></pre></div></div>

<h2 id="setting-up-kafka-connect-connectors">Setting up Kafka Connect connectors</h2>

<p>The Apicurio Registry <code class="language-plaintext highlighter-rouge">converter</code> library can be used in Kafka Connect to provide the converters that are required to convert between Kafka Connects format and the Avro serialized format. Source connectors can use the converter to write Avro-formatted values, keys, and headers to Kafka. Sink connectors can use the converter to read Avro-formatted values, keys, and headers from Kafka. In particular, the <code class="language-plaintext highlighter-rouge">io.apicurio.registry.utils.converter.AvroConverter</code> class can be used to provide the Apicurio Avro converter for the <code class="language-plaintext highlighter-rouge">"key.converter"</code>, <code class="language-plaintext highlighter-rouge">"value.converter"</code>, or <code class="language-plaintext highlighter-rouge">"header.converter"</code> properties. For example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>key.converter=io.apicurio.registry.utils.converter.AvroConverter
key.converter.apicurio.registry.url=https://&lt;username&gt;:&lt;password&gt;@&lt;Schema registry endpoint&gt;

value.converter=io.apicurio.registry.utils.converter.AvroConverter
value.converter.apicurio.registry.url=https://&lt;username&gt;:&lt;password&gt;@&lt;Schema registry endpoint&gt;
</code></pre></div></div>

<p>To use the Apicurio Registry  <code class="language-plaintext highlighter-rouge">converter</code> library, add the following dependency to your project Maven <code class="language-plaintext highlighter-rouge">pom.xml</code> file:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;dependency&gt;
    &lt;groupId&gt;io.apicurio&lt;/groupId&gt;
    &lt;artifactId&gt;apicurio-registry-utils-converter&lt;/artifactId&gt;
    &lt;version&gt;1.3.1.Final&lt;/version&gt;
&lt;/dependency&gt;
</code></pre></div></div>
<p>Alternatively, if you are not building your connector, you can download the Apicurio converter artifacts from <a href="https://repo1.maven.org/maven2/io/apicurio/apicurio-registry-distro-connect-converter/1.3.1.Final/apicurio-registry-distro-connect-converter-1.3.1.Final-converter.tar.gz" target="_blank">Maven</a>.</p>

<p>After downloading, extract the <code class="language-plaintext highlighter-rouge">tar.gz</code> file and place the folder with all the JARs into a subdirectory within the folder where you are building your <code class="language-plaintext highlighter-rouge">KafkaConnectS2I</code> image.</p>

<p>To enable Kafka properties to be pulled from a file, add the following to your <code class="language-plaintext highlighter-rouge">KafkaConnector</code> or <code class="language-plaintext highlighter-rouge">KafkaConnectS2I</code> custom resource definition:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>config.providers: file
config.providers.file.class: org.apache.kafka.common.config.provider.FileConfigProvider
</code></pre></div></div>

<p>Then reference the Kafka connection details in the <code class="language-plaintext highlighter-rouge">KafkaConnector</code> custom resource of your connector. For example, the following shows a value converter with SCRAM credentials specified in the custom resource:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>value.converter.apicurio.registry.url: &lt;username&gt;:&lt;password&gt;@&lt;Schema registry endpoint&gt;
value.converter.apicurio.registry.global-id: io.apicurio.registry.utils.serde.strategy.GetOrCreateIdStrategy
value.converter.apicurio.registry.request.ssl.truststore.location: "${file:/tmp/strimzi-connect.properties:ssl.truststore.location}"
value.converter.apicurio.registry.request.ssl.truststore.password: "${file:/tmp/strimzi-connect.properties:ssl.truststore.password}"
value.converter.apicurio.registry.request.ssl.truststore.type: "${file:/tmp/strimzi-connect.properties:ssl.truststore.type}"
</code></pre></div></div>

          </div>


          
        </section>

        <aside class="sidebar__right ">
          
          <div class="fixedSidebar">
            <nav class="toc">
              <ul class="toc__menu">
  <li><a href="#preparing-the-setup">Preparing the setup</a></li>
  <li><a href="#additional-configuration-options-for-apicurio-serdes-library">Additional configuration options for Apicurio serdes library</a></li>
  <li><a href="#setting-up-producers-to-use-schemas">Setting up producers to use schemas</a>
    <ul>
      <li><a href="#imports">Imports</a></li>
      <li><a href="#connection-properties">Connection properties</a></li>
      <li><a href="#producer-code-example">Producer code example</a></li>
    </ul>
  </li>
  <li><a href="#setting-up-consumers-to-use-schemas">Setting up consumers to use schemas</a>
    <ul>
      <li><a href="#imports-1">Imports</a></li>
      <li><a href="#connection-properties-1">Connection properties</a></li>
      <li><a href="#consumer-code-example">Consumer code example</a></li>
    </ul>
  </li>
  <li><a href="#setting-up-kafka-streams-applications">Setting up Kafka Streams applications</a></li>
  <li><a href="#setting-up-kafka-connect-connectors">Setting up Kafka Connect connectors</a></li>
</ul>
            </nav>
          </div>
          
        </aside>


      </div>
      <div class="pageEnd">
        
          
  <nav class="pagination">
    
      <div class="previous" onclick="window.open('/event-automation/es/es_10.3/schemas/schema-api/','_self')">
        <div class="container">
          <a href="/event-automation/es/es_10.3/schemas/schema-api/" class="pagination--pager" title="Previous Item: Using the schema API
">Previous</a>
          <h2 class="titlePreview">Using the schema API
</h2>
        </div>
      </div>
    
    
      <div class="next" onclick="window.open('/event-automation/es/es_10.3/security/managing-access/','_self')">
        <div class="container">
          <a href="/event-automation/es/es_10.3/security/managing-access/" class="pagination--pager" title="Next Item: Managing access
">Next</a>
          <h2 class="titlePreview">Managing access
</h2>
        </div>
      </div>
      
  </nav>

        
      </div>
    </div>


  </div> <!-- Main content -->

</main></div>


    
      <div class="page__footer">
          <footer>
            <!-- start custom footer snippets -->

<!-- end custom footer snippets -->

            
<div class="page__footer-copyright"><a href="https://www.ibm.com/privacy/us/en/" rel="nofollow" target="_blank">Privacy Policy</a>  &nbsp; Copyright IBM Corporation 2023</br>
<a href="http://localhost:4000/event-automation/accessibility/" rel="nofollow" target="_blank">Accessibility</a> </br> <a href="http://localhost:4000/event-automation/notices/" rel="nofollow" target="_blank">Notices</a></br>
          </footer>
      </div>      
    


    
  <script src="/event-automation/assets/js/main.min.js"></script>
  <!-- <script src="https://use.fontawesome.com/releases/v5.1.0/js/all.js"></script> -->






<script src="/event-automation/assets/js/design.js"></script>





<script src="/event-automation/assets/js/lunr/lunr.min.js"></script>
<script src="/event-automation/assets/js/lunr/lunr-store.js"></script>
<script src="/event-automation/assets/js/lunr/lunr-en.js"></script>





    

    
  </body>
</html>

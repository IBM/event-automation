<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Managing access - IBM Event Automation</title>
<meta name="description" content="Managing access for users and applications.">

<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="IBM Event Automation">
<meta property="og:url" content="http://localhost:4000/event-automation/eem/security/managing-access/" />
<meta property="og:title" content="Endpoint Management | Managing access" />
<meta property="og:description" content="Managing access for users and applications." />

<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="IBM Event Automation | Managing access" />




  <meta property="og:description" content="Managing access for users and applications.">



  <meta property="og:image" content="http://localhost:4000/event-automation/assets/siteMeta/appIcon_og_fb.png">
  <meta name="twitter:image" content="http://localhost:4000/event-automation/assets/siteMeta/appIcon_og_square.png">



  <meta property="article:published_time" content="2023-06-28T12:13:19-04:00">






<link rel="canonical" href="http://localhost:4000/event-automation/eem/security/managing-access/">





  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "http://localhost:4000/event-automation",
      "logo": "http://localhost:4000/event-automation/assets/siteMeta/appIcon_og_fb.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": null,
      "url": "http://localhost:4000/event-automation",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/event-automation/feed.xml" type="application/atom+xml" rel="alternate" title="IBM Event Automation Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/event-automation/assets/css/main.css">



<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<link rel="apple-touch-icon" sizes="180x180" href="http://localhost:4000/event-automation/assets/siteMeta/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-16x16.png">
<link rel="manifest" href="http://localhost:4000/event-automation/assets/siteMeta/site.webmanifest">
<link rel="mask-icon" href="http://localhost:4000/event-automation/assets/siteMeta/safari-pinned-tab.svg" color="#000000">
<link rel="shortcut icon" href="http://localhost:4000/event-automation/assets/siteMeta/favicon.ico">
<link rel="shortcut icon" type="image/png" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-16x16.png"/>
<link rel="shortcut icon" type="image/png" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-32x32.png"/>
<meta name="msapplication-TileColor" content="#000000">
<meta name="msapplication-config" content="http://localhost:4000/event-automation/assets/siteMeta/browserconfig.xml">
<meta name="theme-color" content="#000000">



<link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:400,600%7CIBM+Plex+Serif:300,400,500%7CIBM+Plex+Mono:300,400,500,700" rel="stylesheet">

<!-- end custom head snippets -->

    <link rel="shortcut icon" type="image/x-icon" href="/event-automation/assets/favicon.ico" >
    
    <base target="_parent">

  </head>
  <script src="/event-automation/assets/animation/lottie.js" type="text/javascript"></script>
  <script src="/event-automation/assets/js/connectors.js"></script>


  
  <body onload="" class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    




<div id="masthead" class="masthead">
  <!--
  <div class="masthead__goToIBMCloud">
  <div>
    You are viewing the documentation for the container-native version of IBM Event Automation.
  </div>
    <a class="link" target="_self" href="https://cloud.ibm.com/docs/EventStreams?topic=EventStreams-getting-started">Looking for the managed service on IBM Cloud? Click here.</a>
</div>
-->
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="mastheadNav">

      


        <div class="mastheadTitle">
          
          <a class="site-title" href="/event-automation/" target="_self"><span>IBM</span>&nbsp;Event Automation</a>
          <div class="viewOnIBMcom">
            <a href="https://www.ibm.com/products/event-automation" target="_blank">View product page</a>
          </div>
        </div>









        <div class="mastheadControls">
            <div class="menuScrollContainer">

        

                <ul id="visible-links" class="visible-links">
                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/es/','_self')">
                      <a href="http://localhost:4000/event-automation/es/" >Event Streams</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item active" onclick="window.open('http://localhost:4000/event-automation/eem/','_self')">
                      <a href="http://localhost:4000/event-automation/eem/" >Endpoint Management</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/ep/','_self')">
                      <a href="http://localhost:4000/event-automation/ep/" >Event Processing</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/connectors/','_self')">
                      <a href="http://localhost:4000/event-automation/connectors/" >Connectors</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/tutorials/','_self')">
                      <a href="http://localhost:4000/event-automation/tutorials/" >Tutorials</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/api/','_self')">
                      <a href="http://localhost:4000/event-automation/api/" >APIs...</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/support/','_self')">
                      <a href="http://localhost:4000/event-automation/support/" >Support</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/search/','_self')">
                      <button aria-label="Search Button" role="button" id="searchButton" class="search__toggle " type="button" name="search Button">
                        <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                          <path
                            d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z"
                            transform="translate(-.01)"></path>
                        </svg>
                      </button>
                    </li>
                  

                  
                </ul>
        

      </div>
    </div>
      </nav>
    </div>
  </div>
</div>


    <div id="initial-content" class="initial-content" role="main">






<main id="main" class="mainContainer" role="main">
    
      <div id="subMenu" class="subMenu">
        <div tabindex="0" class="menuIcon" id="menuIcon">
          <svg id="mobileMenu" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
            <g id="bottomLine">
              <line class="burgerLine" x1="14" y1="29" x2="34" y2="29" />
            </g>
            <g id="middleLine">
              <line class="burgerLine" x1="14" y1="24" x2="34" y2="24" />
            </g>
            <g id="topLine">
              <line class="burgerLine" x1="14" y1="19" x2="34" y2="19" />
            </g>
          </svg>
        </div>
        <div id="mobileVersionShortcut" class="versionContainer" tabindex="0">
          <a id="mobileVersionPillCurrent" class="versionPill">11.0</a>
        </div>
      </div>
    
  



<div id="sidebarMask" class="sidebarMask">

  </div>
  <div id="sidebar" class="sidebar sticky">
      <div aria-label="Change Version" role="button" aria-expanded="false"
      
        id="versionDropdown"
        tabindex="0"
        class="versionsBar"
       >
          <div class="selectedVersion" id="selectedVersion">
            <div class="versionContainer" >
              
                <a id="versionPillCurrent" class="versionPill">11.0</a>
                <a class="versionChange">Change Version</a>
              
            </div>
          </div>
          


          <div class="allVersions" id="allVersions">
            <ul>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/eem/security/managing-access/" onclick="openVersion('/event-automation/eem/security/managing-access/','eem_11.0')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/eem/security/managing-access/" class="versionPill active">11.0</a>
                      </div>
                      <div class="activeContainer">
                        
                          <img alt="" src="http://localhost:4000/event-automation/images/checkbox.svg" />
                        
                      </div>
                      <div class="latest">
                        Latest
                      </div>
                    </li>

                

            </ul>
          </div>
        </div>

  
    
      
      
      
    
    
      

<nav class="nav__list">
  
  <ul class="nav__items">

    
      <li>
        
          <span class="nav__sub-title">About</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/about/overview/" class="">Introduction</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/about/whats-new/" class="">What's new</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/about/key-concepts/" class="">Key concepts</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Installing</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/prerequisites/" class="">Prerequisites</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/planning/" class="">Planning your installation</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/overview/" class="">Installation overview</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/installing/" class="">Installing the Manager in an online environment</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/offline/" class="">Installing the Manager in an offline environment</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/deploy-gateways/" class="">Installing Event Gateways on the same cluster</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/standalone-gateways/" class="">Installing stand-alone Event Gateways</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/configuring/" class="">Configuring</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/post-installation/" class="">Post-installation tasks</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/backup-restore/" class="">Backing up and restoring</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/uninstalling/" class="">Uninstalling</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/upgrading/" class="">Upgrading</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Getting started</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/getting-started/logging-in/" class="">Logging in</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Security</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/security/managing-access/" class="active">Managing access</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/security/user-roles/" class="">Managing user roles</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/security/verifying-signature/" class="">Verifying container image signatures</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/security/network-policies/" class="">Network policies</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/security/gdpr-considerations/" class="">Considerations for GDPR</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Describe and publish</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/describe/adding-topics/" class="">Describing event sources</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/describe/managing-topics/" class="">Managing topics</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/describe/managing-clusters/" class="">Managing clusters</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/describe/publishing-topics/" class="">Publishing topics</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/describe/managing-user-access-to-topics/" class="">Managing user access to topics</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/describe/managing-gateways/" class="">Managing gateways</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Consume and subscribe</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/consume-subscribe/discovering-topics/" class="">Discovering topics</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/consume-subscribe/subscribing-to-topics/" class="">Subscribing to topics</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/consume-subscribe/setting-your-application-to-consume/" class="">Setting your application to consume from a topic</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Integrating with IBM API Connect</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/integrating-with-apic/overview/" class="">Integration overview</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/integrating-with-apic/configure-eem-for-apic/" class="">Configure the Manager as an Event Gateway Service</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/integrating-with-apic/export-asyncapi/" class="">Export an AsyncAPI for use in API Connect</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Reference</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/reference/api-reference/" class="">API reference for the CRDs</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Troubleshooting</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/troubleshooting/intro/" class="">Troubleshooting overview</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/troubleshooting/gathering-logs/" class="">Gathering logs</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/troubleshooting/trace-logging/" class="">Configuring trace logging</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/troubleshooting/no-such-algorithm-log/" class="">No such algorithm exception log</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/troubleshooting/evicted-gateway/" class="">Event Gateway in 'Evicted' state</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/troubleshooting/invalid-async-api/" class="">Invalid exported Async API for API Connect</a>
            </li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>
    
  
  </div>


  <div class="mainContent">
    
    <div id="pageContainer" class="page" itemscope itemtype="http://schema.org/CreativeWork">
      
      <div class="page__inner-wrap  latestVersion">
      

        
        <section class="page__content pageSpacing" itemprop="text">
          
        
          <header>
            <h1 id="page-title" class="page__title" itemprop="headline">
              Managing access
</h1>
            
          </header>  
        
        

                    
          <div class="content">
            <p>You can manage access to your Event Endpoint Management instance through access controls. Users can be defined through custom configuration files or by different login services and identity providers such as <a href="https://www.keycloak.org/" target="_blank">Keycloak</a>. Users can be authorized and given permissions based on their roles. For more information, see <a href="../user-roles">managing roles</a>.</p>

<p>Event Endpoint Management supports locally defined authorization for testing purposes and OpenID Connect (OIDC) authorization.</p>

<p><strong>Important:</strong> Before you begin, ensure you have <a href="../../installing/installing">installed the Event Endpoint Management operator</a>.</p>

<h2 id="setting-up-local-authentication">Setting up Local authentication</h2>
<p>You can define users explicitly with usernames and passwords, which is typically helpful for testing or prototype instances.</p>

<p><strong>Important:</strong> Despite being a valid OIDC provider with secure network traffic, the local authentication provider stores user credentials in a single JSON file as unencrypted strings. Therefore, passwords are at a higher risk of being exposed.</p>

<h3 id="using-openshift-container-platform-ui">Using OpenShift Container Platform UI</h3>

<ol>
  <li>Log in to the OpenShift Container Platform <a href="https://docs.openshift.com/container-platform/4.12/web_console/web-console.html" target="_blank">web console</a> using your login credentials.</li>
  <li>Click the <strong>+</strong> button in the navigation on the top. The text editor opens.</li>
  <li>
    <p>Paste the following YAML into the editor to create a custom resource that defines an instance of Event Endpoint Management called <code class="language-plaintext highlighter-rouge">local-auth</code>:</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="na">apiVersion</span><span class="pi">:</span> <span class="s">events.ibm.com/v1beta1</span>
 <span class="na">kind</span><span class="pi">:</span> <span class="s">EventEndpointManagement</span>
 <span class="na">metadata</span><span class="pi">:</span>
   <span class="na">name</span><span class="pi">:</span> <span class="s">local-auth</span>
   <span class="na">namespace</span><span class="pi">:</span> <span class="s">eem</span>
 <span class="na">spec</span><span class="pi">:</span>
   <span class="na">license</span><span class="pi">:</span>
     <span class="na">accept</span><span class="pi">:</span> <span class="no">true</span>
   <span class="na">manager</span><span class="pi">:</span>
     <span class="na">authConfig</span><span class="pi">:</span>
       <span class="na">authType</span><span class="pi">:</span> <span class="s">LOCAL</span>
</code></pre></div>    </div>

    <p>This will create two secrets: <code class="language-plaintext highlighter-rouge">&lt;custom-resource-name&gt;-ibm-eem-user-credentials</code> and <code class="language-plaintext highlighter-rouge">&lt;custom-resource-name&gt;-ibm-eem-user-roles</code>. You can use these secrets to define the credentials and roles (permissions) of your users.</p>
  </li>
  <li>Expand <strong>Workloads</strong> in the navigation on the left and click <strong>Secrets</strong>. This lists the secrets available in this project (namespace).</li>
  <li>To edit the secret <code class="language-plaintext highlighter-rouge">&lt;custom-resource-name&gt;-ibm-eem-user-credentials</code> with your local user credentials, go to <strong>Actions</strong> and click <strong>Editing Secret</strong>. For example:
    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="nl">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
         </span><span class="p">{</span><span class="w">
             </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"author1"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Password1$"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
             </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"viewer1"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Password2$"</span><span class="w">
         </span><span class="p">}</span><span class="w">
     </span><span class="p">]</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li>Similarly, edit the secret <code class="language-plaintext highlighter-rouge">&lt;custom-resource-name&gt;-ibm-eem-user-roles</code> to configure the roles and permissions of your users. For more information, see <a href="../user-roles">managing roles</a>.
The changed configuration files are automatically picked up by the Event Endpoint Management instance, and you can then log in with these users. For more information, see <a href="../../getting-started/logging-in">logging into Event Endpoint Management instance</a>.</li>
</ol>

<h3 id="using-the-openshift-container-platform-cli">Using the OpenShift Container Platform CLI</h3>

<ol>
  <li>Log in to your Red Hat OpenShift Container Platform as a cluster administrator by using the <a href="https://docs.openshift.com/container-platform/4.12/cli_reference/openshift_cli/getting-started-cli.html#cli-logging-in_cli-developer-commands" target="_blank"><code class="language-plaintext highlighter-rouge">oc</code> CLI</a> (<code class="language-plaintext highlighter-rouge">oc login</code>).</li>
  <li>
    <p>Run the following command to create an instance of Event Endpoint Management:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> | oc apply -f -
 apiVersion: events.ibm.com/v1beta1
 kind: EventEndpointManagement
 metadata:
   name: local-auth
   namespace: eem
 spec:
   license:
     accept: true
   manager:
     authConfig:
        authType: LOCAL
</span><span class="no"> EOF
</span></code></pre></div>    </div>

    <p>This will create two secrets: <code class="language-plaintext highlighter-rouge">&lt;custom-resource-name&gt;-ibm-eem-user-credentials</code> and <code class="language-plaintext highlighter-rouge">&lt;custom-resource-name&gt;-ibm-eem-user-roles</code>. You can use these secrets to define the credentials and roles (permissions) of your users.</p>
  </li>
  <li>
    <p>To edit the secret <code class="language-plaintext highlighter-rouge">&lt;custom-resource-name&gt;-ibm-eem-user-credentials</code> with the local user credentials, run the following command:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> oc edit secret/&lt;custom-resource-name&gt;-ibm-eem-user-credentials <span class="nt">-o</span> json
</code></pre></div>    </div>

    <p>The following is an example configuration:</p>

    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">     </span><span class="p">{</span><span class="w">
         </span><span class="nl">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
             </span><span class="p">{</span><span class="w">
                 </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"author1"</span><span class="p">,</span><span class="w">
                 </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Password1$"</span><span class="w">
             </span><span class="p">},</span><span class="w">
             </span><span class="p">{</span><span class="w">
                 </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"viewer1"</span><span class="p">,</span><span class="w">
                 </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Password2$"</span><span class="w">
             </span><span class="p">}</span><span class="w">
         </span><span class="p">]</span><span class="w">
     </span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li>Similarly, edit the secret <code class="language-plaintext highlighter-rouge">&lt;custom-resource-name&gt;-ibm-eem-user-roles</code> to configure the roles and permissions of your users. For more information, see <a href="../user-roles">managing roles</a>.
The changed configuration files are automatically picked up by the Event Endpoint Management instance, and you can then log in with these users. For more information, see <a href="../../getting-started/logging-in">logging into Event Endpoint Management instance</a>.</li>
</ol>

<h2 id="setting-up-openid-connect-oidc-based-authentication">Setting up OpenID Connect (OIDC) based authentication</h2>

<p>You can authenticate users from an OIDC Identification Provider as follows:</p>

<h3 id="using-openshift-container-platform-ui-1">Using OpenShift Container Platform UI</h3>

<ol>
  <li>Access your OIDC provider and create a client.
    <ul>
      <li>If your OIDC provider asks for redirect urls, this needs to be set to the Event Endpoint Management URL. If you have already installed Event Endpoint Management then see step 9 for the value of these URLs before proceeding. Otherwise, add the URL <code class="language-plaintext highlighter-rouge">http://www.example.com/</code>, and proceed with client creation. We will come back to update the redirect urls at a later stage.</li>
    </ul>
  </li>
  <li>Retrieve the following properties from the OIDC provider
    <ul>
      <li>Client ID</li>
      <li>Client Secret</li>
      <li>OIDC Provider Site</li>
    </ul>
  </li>
  <li>Log in to the OpenShift Container Platform <a href="https://docs.openshift.com/container-platform/4.12/web_console/web-console.html" target="_blank">web console</a> using your login credentials.</li>
  <li>Click the <strong>+</strong> button in the navigation on the top. The text editor opens.</li>
  <li>
    <p>Paste the following Secret YAML into the editor:</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="na">kind</span><span class="pi">:</span> <span class="s">Secret</span>
 <span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
 <span class="na">metadata</span><span class="pi">:</span>
   <span class="na">name</span><span class="pi">:</span> <span class="s">oidc-secret</span>
   <span class="na">namespace</span><span class="pi">:</span> <span class="s">eem</span>
 <span class="na">data</span><span class="pi">:</span>
   <span class="na">client-id</span><span class="pi">:</span> <span class="s">&lt;base_64_encoded_client_id&gt;</span>
   <span class="na">client-secret</span><span class="pi">:</span> <span class="s">&lt;base_64_encoded_client_secret&gt;</span>
 <span class="na">type</span><span class="pi">:</span> <span class="s">Opaque</span>
</code></pre></div>    </div>
  </li>
  <li>Click the <strong>+</strong> button in the navigation on the top. The text editor opens.</li>
  <li>
    <p>Paste the following YAML content, into the editor, to create a custom resource that defines an instance of Event Endpoint Management called <code class="language-plaintext highlighter-rouge">oidc-auth</code>:</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="na">apiVersion</span><span class="pi">:</span> <span class="s">events.ibm.com/v1beta1</span>
 <span class="na">kind</span><span class="pi">:</span> <span class="s">EventEndpointManagement</span>
 <span class="na">metadata</span><span class="pi">:</span>
   <span class="na">name</span><span class="pi">:</span> <span class="s">oidc-auth</span>
   <span class="na">namespace</span><span class="pi">:</span> <span class="s">eem</span>
 <span class="na">spec</span><span class="pi">:</span>
   <span class="na">license</span><span class="pi">:</span>
     <span class="na">accept</span><span class="pi">:</span> <span class="no">true</span>
   <span class="na">manager</span><span class="pi">:</span>
     <span class="na">authConfig</span><span class="pi">:</span>
       <span class="na">authType</span><span class="pi">:</span> <span class="s">OIDC</span>
       <span class="na">oidcConfig</span><span class="pi">:</span>
         <span class="na">clientIDKey</span><span class="pi">:</span> <span class="s">client-id</span>
         <span class="na">clientSecretKey</span><span class="pi">:</span> <span class="s">client-secret</span>
         <span class="na">discovery</span><span class="pi">:</span> <span class="no">true</span>
         <span class="na">secretName</span><span class="pi">:</span> <span class="s">oidc-secret</span>
         <span class="na">site</span><span class="pi">:</span> <span class="s">&lt;oidc_provider_site&gt;</span>
</code></pre></div>    </div>

    <p><strong>Note:</strong> If your OIDC provider does not support <strong>OIDC Discovery</strong>, add the following parameters in the <code class="language-plaintext highlighter-rouge">oidcConfig</code> block:</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="na">tokenPath</span><span class="pi">:</span> <span class="s">(required) &lt;path to the token endpoint of this provider&gt;</span>
 <span class="na">authorizationPath</span><span class="pi">:</span> <span class="s">(required) &lt;path to the authorization endpoint of this provider&gt;</span>
 <span class="na">endSessionPath</span><span class="pi">:</span> <span class="s">(optional) &lt;path to the end session endpoint of this provider&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>You can now log in with these users. For more information, see <a href="../../getting-started/logging-in">logging into Event Endpoint Management instance</a>.</li>
  <li>
    <p>Retrieve the login URL, open the client configuration of your OIDC provider, and update the redirect URLs to include the following addresses:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> https://&lt;login_url_domain&gt;/eem/callback
 https://&lt;login_url_domain&gt;/logout/callback
</code></pre></div>    </div>
  </li>
  <li>Retrieve the <code class="language-plaintext highlighter-rouge">subject</code> value of your user either from your OIDC provider, or by logging into the Event Endpoint Management UI by adding <code class="language-plaintext highlighter-rouge">/auth/protected/userinfo</code> to the URL.</li>
  <li>Open the secret <code class="language-plaintext highlighter-rouge">&lt;custom-resource-name&gt;-ibm-eem-user-roles</code> to configure the roles and permissions of your user with the <code class="language-plaintext highlighter-rouge">subject</code> value. For more information, see <a href="../user-roles">managing roles</a>.</li>
</ol>

<h3 id="using-the-openshift-container-platform-cli-1">Using the OpenShift Container Platform CLI</h3>

<ol>
  <li>Access your OIDC provider and create a client.
    <ul>
      <li>If your OIDC provider asks for redirect urls, this needs to be set to the Event Endpoint Management URL. If you have already installed Event Endpoint Management then see step 7 for the value of these URLs before proceeding. Otherwise, add the URL <code class="language-plaintext highlighter-rouge">http://www.example.com/</code>, and proceed with client creation. We will come back to update the redirect urls at a later stage.</li>
    </ul>
  </li>
  <li>Retrieve the following properties from the OIDC provider
    <ul>
      <li>Client ID</li>
      <li>Client Secret</li>
      <li>OIDC Provider Site</li>
    </ul>
  </li>
  <li>Log in to your Red Hat OpenShift Container Platform as a cluster administrator by using the <a href="https://docs.openshift.com/container-platform/4.12/cli_reference/openshift_cli/getting-started-cli.html#cli-logging-in_cli-developer-commands" target="_blank"><code class="language-plaintext highlighter-rouge">oc</code> CLI</a> (<code class="language-plaintext highlighter-rouge">oc login</code>).</li>
  <li>
    <p>Run the following command to create a secret containing the OIDC credentials:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> | oc apply -f -
kind: Secret
apiVersion: v1
metadata:
  name: oidc-secret
  namespace: eem
data:
  client-id: &lt;base_64_encoded_client_id&gt;
  client-secret: &lt;base_64_encoded_client_secret&gt;
type: Opaque
</span><span class="no">EOF
</span></code></pre></div>    </div>
  </li>
  <li>
    <p>Run the following command to create an instance of Event Endpoint Management:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> | oc apply -f -
apiVersion: events.ibm.com/v1beta1
kind: EventEndpointManagement
metadata:
    name: oidc-auth
    namespace: eem
spec:
    license:
    accept: true
    manager:
       authConfig:
        authType: OIDC
        oidcConfig:
          clientIDKey: client-id
          clientSecretKey: client-secret
          discovery: true
          secretName: oidc-secret
          site: &lt;oidc_provider_site&gt;
</span><span class="no">EOF
</span></code></pre></div>    </div>

    <p>This will create the secret <code class="language-plaintext highlighter-rouge">&lt;custom-resource-name&gt;-ibm-eem-user-roles</code> and can be used to define user roles (permissions).</p>

    <p><strong>Note:</strong> If your OIDC provider does not support <strong>OIDC Discovery</strong>, then you will need to add the following parameters in the <code class="language-plaintext highlighter-rouge">oidcConfig</code> block:</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="na">tokenPath</span><span class="pi">:</span> <span class="s">(required) &lt;path to the token endpoint of this provider&gt;</span>
 <span class="na">authorizationPath</span><span class="pi">:</span> <span class="s">(required) &lt;path to the authorization endpoint of this provider&gt;</span>
 <span class="na">endSessionPath</span><span class="pi">:</span> <span class="s">(optional) &lt;path to the end session endpoint of this provider&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>You can now log in with these users. For more information, see <a href="../../getting-started/logging-in">logging into Event Endpoint Management instance</a>.</li>
  <li>
    <p>Retrieve the login URL, open the client configuration of your OIDC provider, and update the redirect URLs to include the following addresses:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> https://&lt;login_url_domain&gt;/eem/callback
 https://&lt;login_url_domain&gt;/logout/callback
</code></pre></div>    </div>
  </li>
  <li>Retrieve the <code class="language-plaintext highlighter-rouge">subject</code> value of your user either from your OIDC provider, or by logging into the Event Endpoint Management UI by adding <code class="language-plaintext highlighter-rouge">/auth/protected/userinfo</code> to the URL.</li>
  <li>
    <p>Run the following command to edit the secret <code class="language-plaintext highlighter-rouge">&lt;custom-resource-name&gt;-ibm-eem-user-roles</code> to <a href="../user-roles">manage the user roles</a>.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> oc edit secret/&lt;custom-resource-name&gt;-ibm-eem-user-roles <span class="nt">-o</span> json
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="setting-up-oidc-based-authorization-with-a-custom-role-identifier">Setting up OIDC based authorization with a custom role identifier</h3>

<p>You can use the custom role identifiers from the OIDC provider for defining user roles and permissions. This means the <code class="language-plaintext highlighter-rouge">user-roles</code> secret does not need to be updated every time a new user id is created.</p>

<p>This is done by asking the OIDC provider to send back additional properties in the authorization token which can be used as the <code class="language-plaintext highlighter-rouge">subject</code> in the <code class="language-plaintext highlighter-rouge">user-roles</code> secrets to identify and assign roles.</p>

<p>For this functionality to work, you must add some parameters to the Event Endpoint Management Custom Resource YAML before applying it to a cluster. Add the following parameters under <code class="language-plaintext highlighter-rouge">spec.manager.authConfig.oidcConfig</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">authorizationClaimPointer</span><span class="pi">:</span> <span class="s">&lt;path to properties in OIDC token&gt;</span>
<span class="na">additionalScopes</span><span class="pi">:</span> <span class="s">&lt;additional scopes to be request during OIDC connection to retrieve properties&gt;</span>
</code></pre></div></div>

<p>The following example shows the default OIDC token:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"sub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user-xyz-123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xyz-123"</span><span class="p">,</span><span class="w">
  </span><span class="err">...</span><span class="w">
  </span><span class="nl">"exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">123456</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>The following example shows requesting the OIDC with <code class="language-plaintext highlighter-rouge">additionalScopes: roles</code>:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"sub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user-xyz-123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xyz-123"</span><span class="p">,</span><span class="w">
  </span><span class="err">...</span><span class="w">
  </span><span class="nl">"exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">123456</span><span class="w">
  </span><span class="nl">"resource_access"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"demonstration-id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"org-admin"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"org-viewer"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Now Event Endpoint Management can use the <code class="language-plaintext highlighter-rouge">roles</code> values to define permissions for all users who have these roles in their OIDC token.</p>

<p>To do this, the Event Endpoint Management Custom Resource should set <code class="language-plaintext highlighter-rouge">authorizationClaimPointer: /resource_access/demonstration-id/roles</code>, which allows the Event Endpoint Management instance to read the properties from this path in the token.</p>

<p><strong>Note:</strong> The referenced path must contain a value of type string or array of strings.</p>

<p>Finally, you can edit the secret <code class="language-plaintext highlighter-rouge">&lt;custom-resource-name&gt;-ibm-eem-user-roles</code> to <a href="../user-roles">manage the user roles</a>.</p>

<h3 id="setting-up-oidc-based-authentication-and-authorization-with-custom-certificates">Setting up OIDC based authentication and authorization with custom certificates</h3>

<p>If you want to use an OIDC provider with custom certificates that are not publicly available, then the Event Endpoint Management Custom Resource can be extended to contain reference to the certificates.</p>

<p>For example:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">events.ibm.com/v1beta1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">EventEndpointManagement</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">custom-certs-auth</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">eem</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">license</span><span class="pi">:</span>
    <span class="na">accept</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">manager</span><span class="pi">:</span>
    <span class="na">authConfig</span><span class="pi">:</span>
      <span class="na">authType</span><span class="pi">:</span> <span class="s">OIDC</span>
      <span class="na">oidcConfig</span><span class="pi">:</span>
        <span class="na">clientIDKey</span><span class="pi">:</span> <span class="s">client-id</span>
        <span class="na">clientSecretKey</span><span class="pi">:</span> <span class="s">client-secret</span>
        <span class="na">discovery</span><span class="pi">:</span> <span class="no">true</span>
        <span class="na">secretName</span><span class="pi">:</span> <span class="s">oidc-secret</span>
        <span class="na">site</span><span class="pi">:</span> <span class="s">&lt;oidc_provider_site&gt;</span>
    <span class="na">tlsConfigSpec</span><span class="pi">:</span>
      <span class="na">trustedCertificates</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">certificate</span><span class="pi">:</span> <span class="s">ca.crt</span>
          <span class="na">secretName</span><span class="pi">:</span> <span class="s">oidc-ca</span>
        <span class="pi">-</span> <span class="s">...</span>
</code></pre></div></div>

          </div>


          
        </section>

        <aside class="sidebar__right ">
          
          <div class="fixedSidebar">
            <nav class="toc">
              <ul class="toc__menu">
  <li><a href="#setting-up-local-authentication">Setting up Local authentication</a>
    <ul>
      <li><a href="#using-openshift-container-platform-ui">Using OpenShift Container Platform UI</a></li>
      <li><a href="#using-the-openshift-container-platform-cli">Using the OpenShift Container Platform CLI</a></li>
    </ul>
  </li>
  <li><a href="#setting-up-openid-connect-oidc-based-authentication">Setting up OpenID Connect (OIDC) based authentication</a>
    <ul>
      <li><a href="#using-openshift-container-platform-ui-1">Using OpenShift Container Platform UI</a></li>
      <li><a href="#using-the-openshift-container-platform-cli-1">Using the OpenShift Container Platform CLI</a></li>
      <li><a href="#setting-up-oidc-based-authorization-with-a-custom-role-identifier">Setting up OIDC based authorization with a custom role identifier</a></li>
      <li><a href="#setting-up-oidc-based-authentication-and-authorization-with-custom-certificates">Setting up OIDC based authentication and authorization with custom certificates</a></li>
    </ul>
  </li>
</ul>
            </nav>
          </div>
          
        </aside>


      </div>
      <div class="pageEnd">
        
          
  <nav class="pagination">
    
      <div class="previous" onclick="window.open('/event-automation/eem/getting-started/logging-in/','_self')">
        <div class="container">
          <a href="/event-automation/eem/getting-started/logging-in/" class="pagination--pager" title="Previous Item: Logging in and Logging out
">Previous</a>
          <h2 class="titlePreview">Logging in and Logging out
</h2>
        </div>
      </div>
    
    
      <div class="next" onclick="window.open('/event-automation/eem/security/user-roles/','_self')">
        <div class="container">
          <a href="/event-automation/eem/security/user-roles/" class="pagination--pager" title="Next Item: Managing user roles
">Next</a>
          <h2 class="titlePreview">Managing user roles
</h2>
        </div>
      </div>
      
  </nav>

        
      </div>
    </div>


  </div> <!-- Main content -->

</main></div>


    
      <div class="page__footer">
          <footer>
            <!-- start custom footer snippets -->

<!-- end custom footer snippets -->

            
<div class="page__footer-copyright"><a href="https://www.ibm.com/privacy/us/en/" rel="nofollow" target="_blank">Privacy Policy</a>  &nbsp;© Copyright IBM Corporation 2023</br>
<a href="http://localhost:4000/event-automation/accessibility/" rel="nofollow" target="_blank">Accessibility</a> </br> <a href="http://localhost:4000/event-automation/notices/" rel="nofollow" target="_blank">Notices</a></br>
          </footer>
      </div>      
    


    
  <script src="/event-automation/assets/js/main.min.js"></script>
  <!-- <script src="https://use.fontawesome.com/releases/v5.1.0/js/all.js"></script> -->






<script src="/event-automation/assets/js/design.js"></script>





<script src="/event-automation/assets/js/lunr/lunr.min.js"></script>
<script src="/event-automation/assets/js/lunr/lunr-store.js"></script>
<script src="/event-automation/assets/js/lunr/lunr-en.js"></script>





    

    
  </body>
</html>

<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Performance and capacity planning - IBM Event Automation</title>
<meta name="description" content="Consider the following when planning for the performance and capacity requirements of your installation.">

<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="IBM Event Automation">
<meta property="og:url" content="http://localhost:4000/event-automation/es/es_2019.4/installing/capacity-planning/" />
<meta property="og:title" content="Event Streams | Performance and capacity planning" />
<meta property="og:description" content="Consider the following when planning for the performance and capacity requirements of your installation." />

<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="IBM Event Automation | Performance and capacity planning" />




  <meta property="og:description" content="Consider the following when planning for the performance and capacity requirements of your installation.">



  <meta property="og:image" content="http://localhost:4000/event-automation/assets/siteMeta/appIcon_og_fb.png">
  <meta name="twitter:image" content="http://localhost:4000/event-automation/assets/siteMeta/appIcon_og_square.png">



  <meta property="article:published_time" content="2023-06-28T12:13:19-04:00">






<link rel="canonical" href="http://localhost:4000/event-automation/es/es_2019.4/installing/capacity-planning/">





  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "http://localhost:4000/event-automation",
      "logo": "http://localhost:4000/event-automation/assets/siteMeta/appIcon_og_fb.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": null,
      "url": "http://localhost:4000/event-automation",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/event-automation/feed.xml" type="application/atom+xml" rel="alternate" title="IBM Event Automation Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/event-automation/assets/css/main.css">



<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<link rel="apple-touch-icon" sizes="180x180" href="http://localhost:4000/event-automation/assets/siteMeta/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-16x16.png">
<link rel="manifest" href="http://localhost:4000/event-automation/assets/siteMeta/site.webmanifest">
<link rel="mask-icon" href="http://localhost:4000/event-automation/assets/siteMeta/safari-pinned-tab.svg" color="#000000">
<link rel="shortcut icon" href="http://localhost:4000/event-automation/assets/siteMeta/favicon.ico">
<link rel="shortcut icon" type="image/png" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-16x16.png"/>
<link rel="shortcut icon" type="image/png" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-32x32.png"/>
<meta name="msapplication-TileColor" content="#000000">
<meta name="msapplication-config" content="http://localhost:4000/event-automation/assets/siteMeta/browserconfig.xml">
<meta name="theme-color" content="#000000">



<link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:400,600%7CIBM+Plex+Serif:300,400,500%7CIBM+Plex+Mono:300,400,500,700" rel="stylesheet">

<!-- end custom head snippets -->

    <link rel="shortcut icon" type="image/x-icon" href="/event-automation/assets/favicon.ico" >
    
    <base target="_parent">

  </head>
  <script src="/event-automation/assets/animation/lottie.js" type="text/javascript"></script>
  <script src="/event-automation/assets/js/connectors.js"></script>


  
  <body onload="urlChecker()" class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    




<div id="masthead" class="masthead">
  <!--
  <div class="masthead__goToIBMCloud">
  <div>
    You are viewing the documentation for the container-native version of IBM Event Automation.
  </div>
    <a class="link" target="_self" href="https://cloud.ibm.com/docs/EventStreams?topic=EventStreams-getting-started">Looking for the managed service on IBM Cloud? Click here.</a>
</div>
-->
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="mastheadNav">

      


        <div class="mastheadTitle">
          
          <a class="site-title" href="/event-automation/" target="_self"><span>IBM</span>&nbsp;Event Automation</a>
          <div class="viewOnIBMcom">
            <a href="https://www.ibm.com/products/event-automation" target="_blank">View product page</a>
          </div>
        </div>









        <div class="mastheadControls">
            <div class="menuScrollContainer">

        

                <ul id="visible-links" class="visible-links">
                  
                  
                  

                  




                  
                    <li class="masthead__menu-item active" onclick="window.open('http://localhost:4000/event-automation/es/','_self')">
                      <a href="http://localhost:4000/event-automation/es/" >Event Streams</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/eem/','_self')">
                      <a href="http://localhost:4000/event-automation/eem/" >Endpoint Management</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/ep/','_self')">
                      <a href="http://localhost:4000/event-automation/ep/" >Event Processing</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/connectors/','_self')">
                      <a href="http://localhost:4000/event-automation/connectors/" >Connectors</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/tutorials/','_self')">
                      <a href="http://localhost:4000/event-automation/tutorials/" >Tutorials</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/api/','_self')">
                      <a href="http://localhost:4000/event-automation/api/" >APIs...</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/support/','_self')">
                      <a href="http://localhost:4000/event-automation/support/" >Support</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/search/','_self')">
                      <button aria-label="Search Button" role="button" id="searchButton" class="search__toggle " type="button" name="search Button">
                        <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                          <path
                            d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z"
                            transform="translate(-.01)"></path>
                        </svg>
                      </button>
                    </li>
                  

                  
                </ul>
        

      </div>
    </div>
      </nav>
    </div>
  </div>
</div>


    <div id="initial-content" class="initial-content" role="main">






<main id="main" class="mainContainer" role="main">
    
      <div id="subMenu" class="subMenu">
        <div tabindex="0" class="menuIcon" id="menuIcon">
          <svg id="mobileMenu" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
            <g id="bottomLine">
              <line class="burgerLine" x1="14" y1="29" x2="34" y2="29" />
            </g>
            <g id="middleLine">
              <line class="burgerLine" x1="14" y1="24" x2="34" y2="24" />
            </g>
            <g id="topLine">
              <line class="burgerLine" x1="14" y1="19" x2="34" y2="19" />
            </g>
          </svg>
        </div>
        <div id="mobileVersionShortcut" class="versionContainer" tabindex="0">
          <a id="mobileVersionPillCurrent" class="versionPill">2019.4</a>
        </div>
      </div>
    
  



<div id="sidebarMask" class="sidebarMask">

  </div>
  <div id="sidebar" class="sidebar sticky">
      <div aria-label="Change Version" role="button" aria-expanded="false"
      
        id="versionDropdown"
        tabindex="0"
        class="versionsBar"
       >
          <div class="selectedVersion" id="selectedVersion">
            <div class="versionContainer" >
              
                <a id="versionPillCurrent" class="versionPill">2019.4</a>
                <a class="versionChange">Change Version</a>
              
            </div>
          </div>
          


          <div class="allVersions" id="allVersions">
            <ul>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/installing/capacity-planning/" onclick="openVersion('/event-automation/es/installing/capacity-planning/','es_11.2')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/installing/capacity-planning/" class="versionPill inactive">11.2</a>
                      </div>
                      <div class="activeContainer">
                        
                      </div>
                      <div class="latest">
                        Latest
                      </div>
                    </li>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/es_11.1/installing/capacity-planning/" onclick="openVersion('/event-automation/es/es_11.1/installing/capacity-planning/','es_11.1')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/es_11.1/installing/capacity-planning/" class="versionPill inactive">11.1</a>
                      </div>
                      <div class="activeContainer">
                        
                      </div>
                      <div class="latest">
                        
                      </div>
                    </li>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/es_11.0/installing/capacity-planning/" onclick="openVersion('/event-automation/es/es_11.0/installing/capacity-planning/','es_11.0')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/es_11.0/installing/capacity-planning/" class="versionPill inactive">11.0</a>
                      </div>
                      <div class="activeContainer">
                        
                      </div>
                      <div class="latest">
                        
                      </div>
                    </li>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/es_10.5/installing/capacity-planning/" onclick="openVersion('/event-automation/es/es_10.5/installing/capacity-planning/','es_10.5')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/es_10.5/installing/capacity-planning/" class="versionPill inactive">10.5</a>
                      </div>
                      <div class="activeContainer">
                        
                      </div>
                      <div class="latest">
                        
                      </div>
                    </li>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/es_10.4/installing/capacity-planning/" onclick="openVersion('/event-automation/es/es_10.4/installing/capacity-planning/','es_10.4')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/es_10.4/installing/capacity-planning/" class="versionPill inactive">10.4</a>
                      </div>
                      <div class="activeContainer">
                        
                      </div>
                      <div class="latest">
                        
                      </div>
                    </li>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/es_10.3/installing/capacity-planning/" onclick="openVersion('/event-automation/es/es_10.3/installing/capacity-planning/','es_10.3')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/es_10.3/installing/capacity-planning/" class="versionPill inactive">10.3</a>
                      </div>
                      <div class="activeContainer">
                        
                      </div>
                      <div class="latest">
                        
                      </div>
                    </li>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/es_10.2/installing/capacity-planning/" onclick="openVersion('/event-automation/es/es_10.2/installing/capacity-planning/','es_10.2')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/es_10.2/installing/capacity-planning/" class="versionPill inactive">10.2</a>
                      </div>
                      <div class="activeContainer">
                        
                      </div>
                      <div class="latest">
                        
                      </div>
                    </li>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/es_10.1/installing/capacity-planning/" onclick="openVersion('/event-automation/es/es_10.1/installing/capacity-planning/','es_10.1')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/es_10.1/installing/capacity-planning/" class="versionPill inactive">10.1</a>
                      </div>
                      <div class="activeContainer">
                        
                      </div>
                      <div class="latest">
                        
                      </div>
                    </li>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/es_10.0/installing/capacity-planning/" onclick="openVersion('/event-automation/es/es_10.0/installing/capacity-planning/','es_10.0')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/es_10.0/installing/capacity-planning/" class="versionPill inactive">10.0</a>
                      </div>
                      <div class="activeContainer">
                        
                      </div>
                      <div class="latest">
                        
                      </div>
                    </li>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/es_2019.4/installing/capacity-planning/" onclick="openVersion('/event-automation/es/es_2019.4/installing/capacity-planning/','es_2019.4')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/es_2019.4/installing/capacity-planning/" class="versionPill active">2019.4</a>
                      </div>
                      <div class="activeContainer">
                        
                          <img alt="" src="http://localhost:4000/event-automation/images/checkbox.svg" />
                        
                      </div>
                      <div class="latest">
                        
                      </div>
                    </li>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/es_2019.2.1/installing/capacity-planning/" onclick="openVersion('/event-automation/es/es_2019.2.1/installing/capacity-planning/','es_2019.2.1')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/es_2019.2.1/installing/capacity-planning/" class="versionPill inactive">2019.2.1</a>
                      </div>
                      <div class="activeContainer">
                        
                      </div>
                      <div class="latest">
                        
                      </div>
                    </li>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/es_2019.1.1/installing/capacity-planning/" onclick="openVersion('/event-automation/es/es_2019.1.1/installing/capacity-planning/','es_2019.1.1')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/es_2019.1.1/installing/capacity-planning/" class="versionPill inactive">2019.1.1</a>
                      </div>
                      <div class="activeContainer">
                        
                      </div>
                      <div class="latest">
                        
                      </div>
                    </li>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/es/es_2018.3.1/installing/capacity-planning/" onclick="openVersion('/event-automation/es/es_2018.3.1/installing/capacity-planning/','es_2018.3.1')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/es/es_2018.3.1/installing/capacity-planning/" class="versionPill inactive">2018.3.1</a>
                      </div>
                      <div class="activeContainer">
                        
                      </div>
                      <div class="latest">
                        
                      </div>
                    </li>

                

            </ul>
          </div>
        </div>

  
    
      
      
      
    
    
      

<nav class="nav__list">
  
  <ul class="nav__items">

    
      <li>
        
          <span class="nav__sub-title">About</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/about/overview/" class="">Introduction</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/about/whats-new/" class="">What's new</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/about/key-concepts/" class="">Key concepts</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/about/producing-messages/" class="">Producing messages</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/about/consuming-messages/" class="">Consuming messages</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/about/partition-leadership/" class="">Partition leadership</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Installing and upgrading</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/installing/trying-out/" class="">Trying out Event Streams</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/installing/prerequisites/" class="">Pre-requisites</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/installing/planning/" class="">Planning for installation</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/installing/capacity-planning/" class="active">Performance and capacity planning</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/installing/preparing-multizone/" class="">Preparing for multizone clusters</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/installing/installing/" class="">Installing on IBM Cloud Private</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/installing/installing-openshift/" class="">Installing on OpenShift</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/installing/configuring/" class="">Configuring</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/installing/post-installation/" class="">Post-installation tasks</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/installing/migrating/" class="">Migrating from Community Edition</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/installing/moving-from-oss-kafka/" class="">Migrating from open source Kafka</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/installing/uninstalling/" class="">Uninstalling</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/installing/upgrading/" class="">Upgrading</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/installing/rolling-back/" class="">Rolling back</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Getting started</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/getting-started/logging-in/" class="">Logging in</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/getting-started/generating-starter-app/" class="">Generating a starter application</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/getting-started/testing-loads/" class="">Creating and testing message loads</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/getting-started/client/" class="">Creating Kafka Java client applications</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/getting-started/using-kafka-console-tools/" class="">Using Apache Kafka console tools</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Schemas</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/schemas/overview/" class="">Schemas overview</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/schemas/creating/" class="">Creating and adding schemas</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/schemas/manage-lifecycle/" class="">Managing schema lifecycle</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/schemas/setting-java-apps/" class="">Setting Java applications to use schemas</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/schemas/setting-nonjava-apps/" class="">Setting non-Java applications to use schemas</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/schemas/migrating/" class="">Migrating to Event Streams schema registry</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/schemas/using-with-rest-producer/" class="">Using schemas with the REST producer API</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/schemas/schema-api/" class="">Using the schema API</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Security</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/security/managing-access/" class="">Managing access</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/security/encrypting-data/" class="">Encrypting your data</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/security/secure-jmx-connections/" class="">Configuring secure JMX connections</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/security/updating-certificates/" class="">Updating certificates</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/security/network-policies/" class="">Network policies</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/security/gdpr-considerations/" class="">Considerations for GDPR</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Geo-replication</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/georeplication/about/" class="">About geo-replication</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/georeplication/planning/" class="">Planning for geo-replication</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/georeplication/setting-up/" class="">Setting up geo-replication</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/georeplication/health/" class="">Monitoring and managing geo-replication</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Connecting external systems</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/connecting/rest-api/" class="">Producing messages using REST</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/connecting/connectors/" class="">Kafka Connect and connectors</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/connecting/setting-up-connectors/" class="">Setting up and running connectors</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/connecting/mq/" class="">Connecting to IBM MQ</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/connecting/mq/source/" class="">Running the MQ source connector</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/connecting/mq/sink/" class="">Running the MQ sink connector</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/connecting/mq/zos/" class="">Running connectors on IBM z/OS</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/connecting/icp/" class="">Running connectors on IBM Cloud Private</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Administering</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/administering/deployment-health/" class="">Monitoring deployment health</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/administering/cluster-health/" class="">Monitoring Kafka cluster health</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/administering/topic-health/" class="">Monitoring topic health</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/administering/external-monitoring/" class="">Monitoring with external tools</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/administering/modifying-configs/" class="">Modifying Kafka broker configurations</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/administering/modifying-installation/" class="">Modifying installation settings</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/administering/helm-upgrade-command/" class="">Running Helm upgrade commands</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/administering/scaling/" class="">Scaling</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/administering/quotas/" class="">Setting client quotas</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/administering/managing-multizone/" class="">Managing a multizone setup</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/administering/stopping-starting/" class="">Stopping and starting Event Streams</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Troubleshooting</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/intro/" class="">Troubleshooting overview</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/diagnosing-installation-issues/" class="">Diagnosing installation issues</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/gathering-logs/" class="">Gathering logs</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/resources-not-available/" class="">Resources not available</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/cleanup-uninstall/" class="">Full cleanup after uninstallation</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/pod-timeout-error/" class="">ConsumerTimeoutException when pods available</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/georeplication-error/" class="">Error when creating multiple geo-replicators</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/kafka-producer-error/" class="">TimeoutException when using standard Kafka producer</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/kafka-consumer-hangs/" class="">Standard Kafka consumer hangs</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/cloudctl-es-not-registered/" class="">Command 'cloudctl es' fails with 'not a registered command' error</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/cloudctl-es-fails/" class="">Command 'cloudctl es' produces 'FAILED' message</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/chrome-ubuntu-issue/" class="">UI does not open when using Chrome on Ubuntu</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/no-image-policy/" class="">Chart deployment fails with 'no ImagePolicies' error</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/image-policy-missing-repository/" class="">Chart deployment fails with 'no matching repositories in the ImagePolicies' error</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/no-helm-release-is-created/" class="">Chart deployment starts but no helm release is created</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/messages-page-blank/" class="">The Messages page is blank</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/kafka-connection-issue/" class="">Unable to connect to Kafka cluster</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/error-removing-destination/" class="">Unable to remove destination cluster</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/georeplication-connect-error/" class="">Geo-replication fails to start</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/ui-403-error/" class="">403 error when signing in</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/client-connect-error/" class="">Kafka client apps unable to connect to cluster</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/problem-with-piping/" class="">The UI cannot load data</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/helm-cli-team-administrator/" class="">Helm commands fail when running as Team Administrator</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/chrome-macos-issue/" class="">UI does not open when using Chrome on macOS Catalina</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/georeplication-version-error/" class="">Error when geo-replicating to an earlier version of Event Streams</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/schemaregistry-java-deps-download-error/" class="">Error when downloading Java dependencies for schema registry</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/failed-to-read-log/" class="">Failed to read 'log header' errors in Kafka logs</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/operator-keeps-reconcilling/" class="">Operator is generating constant log output</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/openshift-route-incorrect/" class="">Kafka cluster is not accessible by using OpenShift routes</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/es/es_2019.4/troubleshooting/invalid-negative-offset/" class="">UI is unable to display consumer groups for a topic</a>
            </li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>
    
  
  </div>


  <div class="mainContent">
    
    <div id="pageContainer" class="page" itemscope itemtype="http://schema.org/CreativeWork">
      
      <div class="page__inner-wrap">
      

        
        <section class="page__content pageSpacing" itemprop="text">
          
        
          <header>
            <h1 id="page-title" class="page__title" itemprop="headline">
              Performance and capacity planning
</h1>
            
          </header>  
        
        

                    
          <div class="content">
            <p>When preparing for your Event Streams installation, consider the performance and capacity requirements for your system.</p>

<!--, including the disk space required for persistent volumes, and the memory and CPU resource limits for your Kafka brokers and geo-replicator containers-->

<!--It's important to understand your requirements so that you set up your deployment to handle the intended workload. In addition,  [licensing](../planning/#licensing) is based on the number of virtual cores available to all Kafka and Geo-replicator containers deployed.-->

<h2 id="guidance-for-production-environments">Guidance for production environments</h2>

<p>The <a href="../prerequisites/#helm-resource-requirements">prerequisites</a> for Event Streams provide information about the minimum resources requirements for a test environment. For a baseline production deployment of Event Streams, increase the following values.</p>

<ul>
  <li>Set the CPU request and limit values for Kafka brokers to <code class="language-plaintext highlighter-rouge">4000m</code>.<br />
 You can use the <code class="language-plaintext highlighter-rouge">kafka.resources.requests.cpu</code> and <code class="language-plaintext highlighter-rouge">kafka.resources.limits.cpu</code> options if you are using the command line, or enter the values in the <strong>CPU request for Kafka brokers</strong> and <strong>CPU limit for Kafka brokers</strong> fields of the <strong>Configure</strong> page if using the UI.</li>
  <li>Set the memory request and limit values for Kafka brokers to at least <code class="language-plaintext highlighter-rouge">6Gi</code>.<br />
 You can use the <code class="language-plaintext highlighter-rouge">kafka.resources.requests.memory</code> and <code class="language-plaintext highlighter-rouge">kafka.resources.limits.memory</code> options if you are using the command line, or enter the values in the <strong>Memory request for Kafka brokers</strong> and <strong>Memory limit for Kafka brokers</strong> fields of the <strong>Configure</strong> page if using the UI.</li>
</ul>

<p>You can set higher values when <a href="../configuring">configuring</a> your installation, or set them <a href="../../administering/scaling/">later</a>.</p>

<p><strong>Note:</strong> This guidance sets the requests and limits to the same values. You might need to set the limits to higher values depending on your intended workload. Remember to add the increases to the minimum <a href="../prerequisites/#helm-resource-requirements">resource requirement values</a>, and ensure the increased settings can be served by your system.</p>

<p><strong>Important:</strong> For high throughput environments, also ensure you <a href="#performance-considerations-for-ibm-cloud-private">prepare</a> your IBM Cloud Private installation beforehand.</p>

<p>Depending on your workload, you can further scale Event Streams and fine tune Kafka performance to accommodate the increased requirements.</p>

<h3 id="scaling-event-streams">Scaling Event Streams</h3>

<p>If required by your planned workload, you can further increase the number of Kafka brokers, and the amount of CPU and memory available to them. For changing other values, see the guidance about <a href="../../administering/scaling/">scaling</a> Event Streams.</p>

<p>A <a href="../../../pdfs/Performance Report 2019.4.1 v1.0.pdf" target="_blank">performance report</a> based on example case studies is available to provide guidance for setting these values.</p>

<h3 id="tuning-event-streams-kafka-performance">Tuning Event Streams Kafka performance</h3>

<p>You can further fine-tune the performance settings of your Event Streams Kafka brokers to suit your requirements. Kafka provides a range of parameters to set, but consider the following ones when reviewing performance requirements. You can set these parameters when installing Event Streams, or you can modify them later.</p>

<ul>
  <li>The <code class="language-plaintext highlighter-rouge">num.replica.fetchers</code> parameter sets the number of threads available on each broker to replicate messages from topic leaders. Increasing this setting increases
I/O parallelism in the follower broker, and can help reduce bottlenecks and message latency. You can start by setting this value to match the number of brokers deployed in the system.<br />
 <strong>Note:</strong> Increasing this value results in brokers using more CPU resources and network bandwidth.</li>
  <li>The <code class="language-plaintext highlighter-rouge">num.io.threads</code> parameter sets the number of threads available to a broker for processing requests. As the load on each broker increases, handling requests can become a bottleneck. Increasing this parameter value can help mitigate this issue. The value to set depends on the overall system load and the processing power of the worker nodes, which varies for each deployment. There is a correlation between this setting and the <code class="language-plaintext highlighter-rouge">num.network.threads</code> setting.</li>
  <li>The <code class="language-plaintext highlighter-rouge">num.network.threads</code> parameter sets the number of threads available to the broker for receiving and sending requests and responses to the network. The value to set depends on the overall network load, which varies for each deployment. There is a correlation between this setting and the <code class="language-plaintext highlighter-rouge">num.io.threads</code> setting.</li>
  <li>The <code class="language-plaintext highlighter-rouge">replica.fetch.min.bytes</code>, <code class="language-plaintext highlighter-rouge">replica.fetch.max.bytes</code>, and <code class="language-plaintext highlighter-rouge">replica.fetch.response.max.bytes</code> parameters control the minimum and maximum sizes for message payloads when
performing inter-broker replication. Set these values to be greater than the <code class="language-plaintext highlighter-rouge">message.max.bytes</code> parameter to ensure that all messages sent by a producer can be replicated
between brokers. The value to set depends on message throughput and average size, which varies for each deployment.</li>
</ul>

<p>To set these parameter values, you can use a ConfigMap that specifies Kafka configuration settings for your Event Streams installation.</p>

<h4 id="setting-before-installation">Setting before installation</h4>

<p>If you are creating the ConfigMap and setting the parameters when installing Event Streams, you can add these parameters to the properties file with the required values.</p>

<ol>
  <li>Add the parameters and their values to the Kafka <code class="language-plaintext highlighter-rouge">server.properties</code> file, for example:<br />
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>num.io.threads=24
num.network.threads=9
num.replica.fetchers=3
replica.fetch.max.bytes=5242880
replica.fetch.min.bytes=1048576
replica.fetch.response.max.bytes=20971520
</code></pre></div>    </div>
  </li>
  <li>Create the ConfigMap as described in the <a href="../planning/#configmap-for-kafka-static-configuration">planning for installation</a> section, for example:<br />
<code class="language-plaintext highlighter-rouge">kubectl -n &lt;namespace_name&gt; create configmap &lt;configmap_name&gt; --from-env-file=&lt;full_path/server.properties&gt;</code></li>
  <li>When installing Event Streams, ensure you <a href="../configuring/#specifying-a-configmap-for-kafka-configuration">provide</a> the ConfigMap to the installation.</li>
</ol>

<h4 id="modifying-an-existing-installation">Modifying an existing installation</h4>

<p>If you are updating an existing Event Streams installation, you can use the ConfigMap you already have for the Kafka configuration settings, and include the parameters and their values in the ConfigMap. You can then apply the new settings by updating the ConfigMap as described <a href="../../administering/modifying-configs/#modifying-broker-and-cluster-settings">modifying Kafka broker configurations</a>, for example:</p>

<p><code class="language-plaintext highlighter-rouge">helm upgrade --reuse-values --set kafka.configMapName=&lt;configmap_name&gt; &lt;release_name&gt; &lt;charts.tgz&gt;</code></p>

<p>Alternatively, you can modify broker configuration settings dynamically by using the Event Streams CLI as described in <a href="../../administering/modifying-configs/#modifying-broker-and-cluster-settings">modifying Kafka broker configurations</a>, for example:</p>

<p><code class="language-plaintext highlighter-rouge">cloudctl es cluster-config --config num.replica.fetchers=4</code></p>

<p><strong>Important:</strong> Using the Event Streams CLI overrides the values specified in the ConfigMap. In addition, the CLI enforces constraints to avoid certain parameters to be misconfigured. For example, you cannot set <code class="language-plaintext highlighter-rouge">num.replica.fetches</code> to a value greater than double its current value. This means that you might have to make incremental updates to the value, for example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cloudctl es cluster-config --config num.replica.fetchers=2
cloudctl es cluster-config --config num.replica.fetchers=4
cloudctl es cluster-config --config num.replica.fetchers=8
cloudctl es cluster-config --config num.replica.fetchers=9
</code></pre></div></div>

<h2 id="performance-considerations-for-ibm-cloud-private">Performance considerations for IBM Cloud Private</h2>

<p>For high throughput environments, consider the following configuration options when setting up your IBM Cloud Private environment.</p>
<ul>
  <li>Set up an external load balancer for your IBM Cloud Private cluster to provide a dedicated external access point for the cluster that provides intelligent routing algorithms.</li>
  <li>Set up a dedicated internal network for inter-broker traffic to avoid contention between internal processes and external traffic.</li>
</ul>

<p><strong>Important:</strong> You must consider and set these IBM Cloud Private configuration options before installing Event Streams.</p>

<h3 id="setting-up-a-load-balancer">Setting up a load balancer</h3>

<p>In high throughput environments, <a href="https://www.ibm.com/support/knowledgecenter/SSBS6K_3.2.1/installing/set_loadbalancer.html" target="_blank">configure an external load balancer</a> for your IBM Cloud Private cluster.</p>

<p>Without a load balancer, a typical Event Streams installation includes a master node for allowing external traffic into the cluster. There are also worker nodes that host Kafka brokers. Each broker has an advertised listener that consists of the master node’s IP address and a unique node port within the cluster. This means the worker nodes can be identified without being exposed externally.</p>

<p>When a producer connects to the Event Streams master node through the bootstrap port, they are sent metadata that identifies partition leaders for the topics hosted by the brokers. So, access to the cluster is based on the address <code class="language-plaintext highlighter-rouge">&lt;master_node:bootstrap_port&gt;</code>, and identification is based on the advertised listener addresses within the cluster, which has a node port to uniquely identify the specific broker.</p>

<p>For example, the connection is made to the <code class="language-plaintext highlighter-rouge">&lt;master_node:bootstrap_port&gt;</code> address, for example: <code class="language-plaintext highlighter-rouge">192.0.2.24:30724</code></p>

<p>The advertised listener is then made up of the <code class="language-plaintext highlighter-rouge">&lt;master_node:unique_port&gt;</code> address, for example: <code class="language-plaintext highlighter-rouge">192.0.2.24:88945</code></p>

<p>The producer then sends messages to the advertised listener for a partition leader of a topic. These requests go through the master node and are passed to the right worker node in Event Streams based on the internal IP address for that specific advertised listener that identifies the broker.</p>

<p>This means all traffic is routed through the master node before being distributed across the cluster. If the master node is overloaded by service requests, network traffic, or system operations, it becomes a bottleneck for incoming requests.</p>

<p><img src="../../../images/No_Load_Balancer.svg" alt="Schemas: Setup without a load balancer diagram." title="Diagram representing flow of message data through the master node where there is no load balancer." /></p>

<p>A load balancer replaces the master node as the entry point into the cluster, providing a dedicated service that typically runs on a separate node. In this case the bootstrap address points to the load balancer instead of the master node. The load balancer passes incoming requests to any of the available worker nodes. The worker node then forwards the request onto the correct broker within the cluster based on its advertised listener address.</p>

<p>Setting up a load balancer provides more control over how requests are forwarded into the cluster (for example, round-robin, least congested, and so on), and frees up the master node for system operations.</p>

<p><img src="../../../images/Load_Balancer.svg" alt="Schemas: Setup with a load balancer diagram." title="Diagram representing flow of message data when a load balancer is set up." /></p>

<p>For more information about configuring an external load balancer for your cluster, see the <a href="https://www.ibm.com/support/knowledgecenter/SSBS6K_3.2.1/installing/set_loadbalancer.html" target="_blank">IBM Cloud Private documentation</a>.</p>

<p><strong>Important:</strong> When using a load balancer for IBM Cloud Private, ensure you set the address for your endpoint in the <a href="../configuring/#configuring-external-access">External hostname/IP address field</a> field when installing your Event Streams instance.</p>

<h3 id="setting-up-an-internal-network">Setting up an internal network</h3>

<p>Communication between brokers can generate significant network traffic in high usage scenarios. Topic configuration such as replication factor settings can also impact traffic volume. For high performance setups, enable an internal network to handle workload traffic within the cluster.</p>

<p>To configure an internal network for inter-broker workload traffic, enable a second network interface on each node, and configure the <code class="language-plaintext highlighter-rouge">config.yaml</code> before installing IBM Cloud Private. For example, use the <code class="language-plaintext highlighter-rouge">calico_ip_autodetection_method</code> setting to configure the master node IP address on the second network as follows:</p>

<p><code class="language-plaintext highlighter-rouge">calico_ip_autodetection_method: can-reach=&lt;internal_ip_address_for_master_node&gt;</code></p>

<p>For more information about setting up a second network, see the <a href="https://www.ibm.com/support/knowledgecenter/SSBS6K_3.2.1/installing/config_yaml.html" target="_blank">IBM Cloud Private documentation</a>.</p>

<h2 id="disk-space-for-persistent-volumes">Disk space for persistent volumes</h2>

<p>You need to ensure you have sufficient disk space in the persistent storage for the Kafka brokers to meet your expected throughput and retention requirements. In Kafka, unlike other messaging systems, the messages on a topic are not immediately removed after they are consumed. Instead, the configuration of each topic determines how much space the topic is permitted and how it is managed.</p>

<p>Each partition of a topic consists of a sequence of files called log segments. The size of the log segments is determined by the cluster configuration <code class="language-plaintext highlighter-rouge">log.segment.bytes</code> (default is 1 GB). This can be overridden by using the topic-level configuration <code class="language-plaintext highlighter-rouge">segment.bytes</code>.</p>

<p>For each log segment, there are two index files called the time index and the offset index. The size of the index is determined by the cluster configuration <code class="language-plaintext highlighter-rouge">log.index.size.max.bytes</code> (default is 10 MB). This can be overridden by using the topic-level configuration <code class="language-plaintext highlighter-rouge">segment.index.bytes</code>.</p>

<p>Log segments can be deleted or compacted, or both, to manage their size. The topic-level configuration <code class="language-plaintext highlighter-rouge">cleanup.policy</code> determines the way the log segments for the topic are managed.</p>

<p>For more information about the broker configurations and topic-level configurations, see <a href="https://kafka.apache.org/documentation/#configuration" target="_blank">the Kafka documentation</a>.</p>

<p>You can specify the cluster and topic-level configurations by using <a href="../../administering/modifying-configs/#modifying-broker-and-cluster-settings">the Event Streams CLI</a>. You can also set topic-level configuration when setting up the topic in the Event Streams UI (click <strong>Topics</strong> in the primary navigation, then click <strong>Create topic</strong>, and set <strong>Show all available options</strong> to <strong>On</strong>).</p>

<h3 id="log-cleanup-by-deletion">Log cleanup by deletion</h3>

<p>If the topic-level configuration <code class="language-plaintext highlighter-rouge">cleanup.policy</code> is set to <code class="language-plaintext highlighter-rouge">delete</code> (the default value), old log segments are discarded when the retention time or size limit is reached, as set by the following properties:</p>

<ul>
  <li>Retention time is set by <code class="language-plaintext highlighter-rouge">retention.ms</code>, and is the maximum time in milliseconds that a log segment is retained before being discarded to free up space.</li>
  <li>Size limit is set by <code class="language-plaintext highlighter-rouge">retention.bytes</code>, and is the maximum size that a partition can grow to before old log segments are discarded.</li>
</ul>

<p>By default, there is no size limit, only a time limit. The default time limit is 7 days (604,800,000 ms).</p>

<p>You also need to have sufficient disk space for the log segment deletion mechanism to operate. The broker configuration <code class="language-plaintext highlighter-rouge">log.retention.check.interval.ms</code> (default is 5 minutes) controls how often the broker checks to see whether log segments should be deleted. The broker configuration <code class="language-plaintext highlighter-rouge">log.segment.delete.delay.ms</code> (default is 1 minute) controls how long the broker waits before deleting the log segments. This means that by default you also need to ensure you have enough disk space to store log segments for an additional 6 minutes for each partition.</p>

<h4 id="worked-example-1">Worked example 1</h4>

<p>Consider a cluster that has 3 brokers, and 1 topic with 1 partition with a replication factor of 3. The expected throughput is 3,000 bytes per second. The retention time period is 7 days (604,800 seconds).</p>

<p>Each broker hosts 1 replica of the topic’s single partition.</p>

<p>The log capacity required for the 7 days retention period can be determined as follows: 3,000 * (604,800 + 6 * 60) = 1,815,480,000 bytes.</p>

<p>So, each broker requires approximately 2GB of disk space allocated in its persistent volume, plus approximately 20 MB of space for index files. In addition, allow at least 1 log segment of extra space to make room for the actual cleanup process. Altogether, you need a total of just over 3 GB disk space for persistent volumes.</p>

<h4 id="worked-example-2">Worked example 2</h4>

<p>Consider a cluster that has 3 brokers, and 1 topic with 1 partition with a replication factor of 3. The expected throughput is 3,000 bytes per second.  The retention size configuration is set to 2.5 GB.</p>

<p>Each broker hosts 1 replica of the topic’s single partition.</p>

<p>The number of log segments for 2.5 GB is 3, but you should also allow 1 extra log segment after cleanup.</p>

<p>So, each broker needs approximately 4 GB of disk space allocated in its persistent volume, plus approximately 40 MB of space for index files.</p>

<p>The retention period achieved at this rate is approximately 2,684,354,560 / 3,000 = 894,784 seconds, or 10.36 days.</p>

<h3 id="log-cleanup-by-compaction">Log cleanup by compaction</h3>

<p>If the topic-level configuration <code class="language-plaintext highlighter-rouge">cleanup.policy</code> is set to <code class="language-plaintext highlighter-rouge">compact</code>, the log for the topic is compacted periodically in the background by the log cleaner. In a compacted topic, each message has a key. The log only needs to contain the most recent message for each key, while earlier messages can be discarded. The log cleaner calculates the offset of the most recent message for each key, and then copies the log from start to finish, discarding keys which have later messages in the log. As each copied segment is created, they are swapped into the log right away to keep the amount of additional space required to a minimum.</p>

<p>Estimating the amount of space that a compacted topic will require is complex, and depends on factors such as the number of unique keys in the messages, the frequency with which each key appears in the uncompacted log, and the size of the messages.</p>

<h3 id="log-cleanup-by-using-both">Log cleanup by using both</h3>

<p>You can specify both <code class="language-plaintext highlighter-rouge">delete</code> and <code class="language-plaintext highlighter-rouge">compact</code> values for the <code class="language-plaintext highlighter-rouge">cleanup.policy</code> configuration at the same time. In this case, the log is compacted, but the cleanup process also follows the retention time or size limit settings.</p>

<p>When both methods are enabled, capacity planning is simpler than when you only have compaction set for a topic. However, some use cases for log compaction depend on messages not being deleted by log cleanup, so consider whether using both is right for your scenario.</p>

<!--
## Memory requirements

TBD

## CPU requirements

TBD
-->

          </div>


          
        </section>

        <aside class="sidebar__right ">
          
          <div class="fixedSidebar">
            <nav class="toc">
              <ul class="toc__menu">
  <li><a href="#guidance-for-production-environments">Guidance for production environments</a>
    <ul>
      <li><a href="#scaling-event-streams">Scaling Event Streams</a></li>
      <li><a href="#tuning-event-streams-kafka-performance">Tuning Event Streams Kafka performance</a></li>
    </ul>
  </li>
  <li><a href="#performance-considerations-for-ibm-cloud-private">Performance considerations for IBM Cloud Private</a>
    <ul>
      <li><a href="#setting-up-a-load-balancer">Setting up a load balancer</a></li>
      <li><a href="#setting-up-an-internal-network">Setting up an internal network</a></li>
    </ul>
  </li>
  <li><a href="#disk-space-for-persistent-volumes">Disk space for persistent volumes</a>
    <ul>
      <li><a href="#log-cleanup-by-deletion">Log cleanup by deletion</a></li>
      <li><a href="#log-cleanup-by-compaction">Log cleanup by compaction</a></li>
      <li><a href="#log-cleanup-by-using-both">Log cleanup by using both</a></li>
    </ul>
  </li>
</ul>
            </nav>
          </div>
          
        </aside>


      </div>
      <div class="pageEnd">
        
          
  <nav class="pagination">
    
      <div class="previous" onclick="window.open('/event-automation/es/es_2019.4/installing/planning/','_self')">
        <div class="container">
          <a href="/event-automation/es/es_2019.4/installing/planning/" class="pagination--pager" title="Previous Item: Planning for installation
">Previous</a>
          <h2 class="titlePreview">Planning for installation
</h2>
        </div>
      </div>
    
    
      <div class="next" onclick="window.open('/event-automation/es/es_2019.4/installing/preparing-multizone/','_self')">
        <div class="container">
          <a href="/event-automation/es/es_2019.4/installing/preparing-multizone/" class="pagination--pager" title="Next Item: Preparing for multizone clusters
">Next</a>
          <h2 class="titlePreview">Preparing for multizone clusters
</h2>
        </div>
      </div>
      
  </nav>

        
      </div>
    </div>


  </div> <!-- Main content -->

</main></div>


    
      <div class="page__footer">
          <footer>
            <!-- start custom footer snippets -->

<!-- end custom footer snippets -->

            
<div class="page__footer-copyright"><a href="https://www.ibm.com/privacy/us/en/" rel="nofollow" target="_blank">Privacy Policy</a>  &nbsp;© Copyright IBM Corporation 2023</br>
<a href="http://localhost:4000/event-automation/accessibility/" rel="nofollow" target="_blank">Accessibility</a> </br> <a href="http://localhost:4000/event-automation/notices/" rel="nofollow" target="_blank">Notices</a></br>
          </footer>
      </div>      
    


    
  <script src="/event-automation/assets/js/main.min.js"></script>
  <!-- <script src="https://use.fontawesome.com/releases/v5.1.0/js/all.js"></script> -->






<script src="/event-automation/assets/js/design.js"></script>





<script src="/event-automation/assets/js/lunr/lunr.min.js"></script>
<script src="/event-automation/assets/js/lunr/lunr-store.js"></script>
<script src="/event-automation/assets/js/lunr/lunr-en.js"></script>





    

    
  </body>
</html>

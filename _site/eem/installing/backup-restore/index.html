<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Backing up and restoring - IBM Event Automation</title>
<meta name="description" content="Find out how you can back up and restore your {{site.data.reuse.eem_name}} instance.">

<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="IBM Event Automation">
<meta property="og:url" content="http://localhost:4000/event-automation/eem/installing/backup-restore/" />
<meta property="og:title" content="Endpoint Management | Backing up and restoring" />
<meta property="og:description" content="Find out how you can back up and restore your {{site.data.reuse.eem_name}} instance." />

<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="IBM Event Automation | Backing up and restoring" />




  <meta property="og:description" content="Find out how you can back up and restore your {{site.data.reuse.eem_name}} instance.">



  <meta property="og:image" content="http://localhost:4000/event-automation/assets/siteMeta/appIcon_og_fb.png">
  <meta name="twitter:image" content="http://localhost:4000/event-automation/assets/siteMeta/appIcon_og_square.png">



  <meta property="article:published_time" content="2023-06-28T12:13:19-04:00">






<link rel="canonical" href="http://localhost:4000/event-automation/eem/installing/backup-restore/">





  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "http://localhost:4000/event-automation",
      "logo": "http://localhost:4000/event-automation/assets/siteMeta/appIcon_og_fb.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": null,
      "url": "http://localhost:4000/event-automation",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/event-automation/feed.xml" type="application/atom+xml" rel="alternate" title="IBM Event Automation Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/event-automation/assets/css/main.css">



<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<link rel="apple-touch-icon" sizes="180x180" href="http://localhost:4000/event-automation/assets/siteMeta/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-16x16.png">
<link rel="manifest" href="http://localhost:4000/event-automation/assets/siteMeta/site.webmanifest">
<link rel="mask-icon" href="http://localhost:4000/event-automation/assets/siteMeta/safari-pinned-tab.svg" color="#000000">
<link rel="shortcut icon" href="http://localhost:4000/event-automation/assets/siteMeta/favicon.ico">
<link rel="shortcut icon" type="image/png" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-16x16.png"/>
<link rel="shortcut icon" type="image/png" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-32x32.png"/>
<meta name="msapplication-TileColor" content="#000000">
<meta name="msapplication-config" content="http://localhost:4000/event-automation/assets/siteMeta/browserconfig.xml">
<meta name="theme-color" content="#000000">



<link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:400,600%7CIBM+Plex+Serif:300,400,500%7CIBM+Plex+Mono:300,400,500,700" rel="stylesheet">

<!-- end custom head snippets -->

    <link rel="shortcut icon" type="image/x-icon" href="/event-automation/assets/favicon.ico" >
    
    <base target="_parent">

  </head>
  <script src="/event-automation/assets/animation/lottie.js" type="text/javascript"></script>
  <script src="/event-automation/assets/js/connectors.js"></script>


  
  <body onload="" class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    




<div id="masthead" class="masthead">
  <!--
  <div class="masthead__goToIBMCloud">
  <div>
    You are viewing the documentation for the container-native version of IBM Event Automation.
  </div>
    <a class="link" target="_self" href="https://cloud.ibm.com/docs/EventStreams?topic=EventStreams-getting-started">Looking for the managed service on IBM Cloud? Click here.</a>
</div>
-->
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="mastheadNav">

      


        <div class="mastheadTitle">
          
          <a class="site-title" href="/event-automation/" target="_self"><span>IBM</span>&nbsp;Event Automation</a>
          <div class="viewOnIBMcom">
            <a href="https://www.ibm.com/products/event-automation" target="_blank">View product page</a>
          </div>
        </div>









        <div class="mastheadControls">
            <div class="menuScrollContainer">

        

                <ul id="visible-links" class="visible-links">
                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/es/','_self')">
                      <a href="http://localhost:4000/event-automation/es/" >Event Streams</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item active" onclick="window.open('http://localhost:4000/event-automation/eem/','_self')">
                      <a href="http://localhost:4000/event-automation/eem/" >Endpoint Management</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/ep/','_self')">
                      <a href="http://localhost:4000/event-automation/ep/" >Event Processing</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/connectors/','_self')">
                      <a href="http://localhost:4000/event-automation/connectors/" >Connectors</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/tutorials/','_self')">
                      <a href="http://localhost:4000/event-automation/tutorials/" >Tutorials</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/api/','_self')">
                      <a href="http://localhost:4000/event-automation/api/" >APIs...</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/support/','_self')">
                      <a href="http://localhost:4000/event-automation/support/" >Support</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/search/','_self')">
                      <button aria-label="Search Button" role="button" id="searchButton" class="search__toggle " type="button" name="search Button">
                        <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                          <path
                            d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z"
                            transform="translate(-.01)"></path>
                        </svg>
                      </button>
                    </li>
                  

                  
                </ul>
        

      </div>
    </div>
      </nav>
    </div>
  </div>
</div>


    <div id="initial-content" class="initial-content" role="main">






<main id="main" class="mainContainer" role="main">
    
      <div id="subMenu" class="subMenu">
        <div tabindex="0" class="menuIcon" id="menuIcon">
          <svg id="mobileMenu" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
            <g id="bottomLine">
              <line class="burgerLine" x1="14" y1="29" x2="34" y2="29" />
            </g>
            <g id="middleLine">
              <line class="burgerLine" x1="14" y1="24" x2="34" y2="24" />
            </g>
            <g id="topLine">
              <line class="burgerLine" x1="14" y1="19" x2="34" y2="19" />
            </g>
          </svg>
        </div>
        <div id="mobileVersionShortcut" class="versionContainer" tabindex="0">
          <a id="mobileVersionPillCurrent" class="versionPill">11.0</a>
        </div>
      </div>
    
  



<div id="sidebarMask" class="sidebarMask">

  </div>
  <div id="sidebar" class="sidebar sticky">
      <div aria-label="Change Version" role="button" aria-expanded="false"
      
        id="versionDropdown"
        tabindex="0"
        class="versionsBar"
       >
          <div class="selectedVersion" id="selectedVersion">
            <div class="versionContainer" >
              
                <a id="versionPillCurrent" class="versionPill">11.0</a>
                <a class="versionChange">Change Version</a>
              
            </div>
          </div>
          


          <div class="allVersions" id="allVersions">
            <ul>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/eem/installing/backup-restore/" onclick="openVersion('/event-automation/eem/installing/backup-restore/','eem_11.0')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/eem/installing/backup-restore/" class="versionPill active">11.0</a>
                      </div>
                      <div class="activeContainer">
                        
                          <img alt="" src="http://localhost:4000/event-automation/images/checkbox.svg" />
                        
                      </div>
                      <div class="latest">
                        Latest
                      </div>
                    </li>

                

            </ul>
          </div>
        </div>

  
    
      
      
      
    
    
      

<nav class="nav__list">
  
  <ul class="nav__items">

    
      <li>
        
          <span class="nav__sub-title">About</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/about/overview/" class="">Introduction</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/about/whats-new/" class="">What's new</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/about/key-concepts/" class="">Key concepts</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Installing</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/prerequisites/" class="">Prerequisites</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/planning/" class="">Planning your installation</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/overview/" class="">Installation overview</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/installing/" class="">Installing the Manager in an online environment</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/offline/" class="">Installing the Manager in an offline environment</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/deploy-gateways/" class="">Installing Event Gateways on the same cluster</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/standalone-gateways/" class="">Installing stand-alone Event Gateways</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/configuring/" class="">Configuring</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/post-installation/" class="">Post-installation tasks</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/backup-restore/" class="active">Backing up and restoring</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/uninstalling/" class="">Uninstalling</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/installing/upgrading/" class="">Upgrading</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Getting started</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/getting-started/logging-in/" class="">Logging in</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Security</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/security/managing-access/" class="">Managing access</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/security/user-roles/" class="">Managing user roles</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/security/verifying-signature/" class="">Verifying container image signatures</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/security/network-policies/" class="">Network policies</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/security/gdpr-considerations/" class="">Considerations for GDPR</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Describe and publish</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/describe/adding-topics/" class="">Describing event sources</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/describe/managing-topics/" class="">Managing topics</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/describe/managing-clusters/" class="">Managing clusters</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/describe/publishing-topics/" class="">Publishing topics</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/describe/managing-user-access-to-topics/" class="">Managing user access to topics</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/describe/managing-gateways/" class="">Managing gateways</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Consume and subscribe</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/consume-subscribe/discovering-topics/" class="">Discovering topics</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/consume-subscribe/subscribing-to-topics/" class="">Subscribing to topics</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/consume-subscribe/setting-your-application-to-consume/" class="">Setting your application to consume from a topic</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Integrating with IBM API Connect</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/integrating-with-apic/overview/" class="">Integration overview</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/integrating-with-apic/configure-eem-for-apic/" class="">Configure the Manager as an Event Gateway Service</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/integrating-with-apic/export-asyncapi/" class="">Export an AsyncAPI for use in API Connect</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Reference</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/reference/api-reference/" class="">API reference for the CRDs</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Troubleshooting</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/troubleshooting/intro/" class="">Troubleshooting overview</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/troubleshooting/gathering-logs/" class="">Gathering logs</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/troubleshooting/trace-logging/" class="">Configuring trace logging</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/troubleshooting/no-such-algorithm-log/" class="">No such algorithm exception log</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/troubleshooting/evicted-gateway/" class="">Event Gateway in 'Evicted' state</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/eem/troubleshooting/invalid-async-api/" class="">Invalid exported Async API for API Connect</a>
            </li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>
    
  
  </div>


  <div class="mainContent">
    
    <div id="pageContainer" class="page" itemscope itemtype="http://schema.org/CreativeWork">
      
      <div class="page__inner-wrap  latestVersion">
      

        
        <section class="page__content pageSpacing" itemprop="text">
          
        
          <header>
            <h1 id="page-title" class="page__title" itemprop="headline">
              Backing up and restoring
</h1>
            
          </header>  
        
        

                    
          <div class="content">
            <p>To back up and restore your Event Endpoint Management instance, use a storage class that supports the <a href="../prerequisites#data-storage-requirements" target="_blank">Container Storage Interface (CSI) snapshotting</a> (for example, the <a href="https://docs.ceph.com/en/latest/cephfs/" target="_blank">Ceph File System</a>).</p>

<p>You can use a backup tool such as <a href="https://velero.io/" target="_blank">Velero</a> to perform backups. The <a href="https://docs.openshift.com/container-platform/4.12/backup_and_restore/index.html#application-backup-restore-operations-overview" target="_blank">OADP operator</a> on the Red Hat OpenShift Container Platform uses Velero. The OADP operator simplifies the installation of the backup software on your cluster, and the management of your backups and restorations.</p>

<p>Follow these instructions to back up and restore your Event Endpoint Management instance.</p>

<p><strong>Note:</strong> Event Gateway instances do not need to be backed up because an Event Gateway instance uses the Event Endpoint Management Manager to store data. If an Event Gateway instance is lost from a cluster and needs recovering, install the instance again, and reference the recovered  instance.</p>

<h2 id="before-you-begin">Before you begin</h2>

<ul>
  <li>
    <p>To back up and restore an Event Endpoint Management instance, you must back up the following:</p>

    <ul>
      <li>The main encryption key that is stored on a Kubernetes secret.</li>
      <li>The data that is added to the instance. This is stored on Kubernetes Persistent Volumes (PVs) and within Kubernetes Persistent Volume Claims (PVCs).</li>
    </ul>

    <p>This means that your backup location and configuration must be able to store both Kubernetes objects and volumes. For more information about the solutions you can use to back up PVs and PVCs, see the <a href="https://docs.openshift.com/container-platform/4.12/backup_and_restore/application_backup_and_restore/oadp-features-plugins.html#oadp-plugins_oadp-features-plugin" target="_blank">OpenShift Container Platform documentation</a>. For example, you can use a remote object store such as <code class="language-plaintext highlighter-rouge">AWS S3</code> and a <code class="language-plaintext highlighter-rouge">CSI</code> compliant storage class to create the PVC for your instance.</p>
  </li>
  <li>
    <p>If you are using the OADP operator to back up your instance, you must specify backup and snapshot configurations in the <code class="language-plaintext highlighter-rouge">DataProtectionApplication</code> custom resource. For more information about installing and configuring the <code class="language-plaintext highlighter-rouge">DataProtectionApplication</code> custom resource, see the <a href="https://docs.openshift.com/container-platform/4.12/backup_and_restore/application_backup_and_restore/installing/about-installing-oadp.html" target="_blank">OpenShift Container Platform documentation</a> and select the storage type you want to configure.</p>
  </li>
  <li>
    <p>In your CSI supported storage provider (such as Ceph), ensure you have the <code class="language-plaintext highlighter-rouge">VolumeSnapshotClass</code> configured for the <code class="language-plaintext highlighter-rouge">CSI</code> storage provider in your cluster.</p>
  </li>
</ul>

<h2 id="backing-up">Backing up</h2>

<p>After your <code class="language-plaintext highlighter-rouge">DataProtectionApplication</code> is configured and other dependencies are prepared, you can create a backup of your Event Endpoint Management instance. Create a <code class="language-plaintext highlighter-rouge">Backup</code> custom resource for the main encryption key and the PVCs containing the data of your instance.</p>

<ol>
  <li>To ensure that only the main encryption key and the PVCs that contain the data are being backed up, and to easily separate them from the other resources that are related to the Event Endpoint Management instance, add the <code class="language-plaintext highlighter-rouge">events.ibm.com/backup: required</code> label to the following resources:</li>
</ol>

<ul>
  <li>The secret in the Event Endpoint Management instance namespace with the name that ends with <code class="language-plaintext highlighter-rouge">-mek-bak</code>. For example, <code class="language-plaintext highlighter-rouge">&lt;eem_instance_name&gt;-ibm-eem-mek-bak</code>.</li>
  <li>The PVCs in the Event Endpoint Management instance namespace with the name <code class="language-plaintext highlighter-rouge">manager-storage-&lt;eem_instance_name&gt;-ibm-eem-manager-0</code>.</li>
</ul>

<ol>
  <li>After the labels are applied, create a <code class="language-plaintext highlighter-rouge">Backup</code> custom resource as follows that backs up only the two required resources for Event Endpoint Management. Also, include the snapshots in the custom resource if you are using a <code class="language-plaintext highlighter-rouge">CSI</code> storage provider.</li>
</ol>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">velero.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Backup</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">&lt;unique_name&gt;</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-adp</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">includedResources</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">secrets</span>
    <span class="pi">-</span> <span class="s">persistentvolumeclaims</span>
    <span class="c1"># To ensure the volume data is backed up when using CSI</span>
    <span class="pi">-</span> <span class="s">volumesnapshots</span> 
    <span class="pi">-</span> <span class="s">volumesnapshotcontents</span>
  <span class="na">ttl</span><span class="pi">:</span> <span class="s">720h0m0s</span>
  <span class="na">storageLocation</span><span class="pi">:</span> <span class="s">&lt;backup_location_cr_name&gt;</span>
  <span class="na">includeClusterResources</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">labelSelector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="s">app.kubernetes.io/instance</span><span class="pi">:</span> <span class="s">&lt;eem_instance_name&gt;</span>
      <span class="s">app.kubernetes.io/name</span><span class="pi">:</span> <span class="s">ibm-event-endpoint-management</span>
      <span class="s">events.ibm.com/backup</span><span class="pi">:</span> <span class="s">required</span>
  <span class="na">includedNamespaces</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">&lt;eem_instance_namespace&gt;</span>
  <span class="na">excludedResources</span><span class="pi">:</span> <span class="pi">[]</span>
</code></pre></div></div>

<p>See the <a href="https://docs.openshift.com/container-platform/4.12/backup_and_restore/application_backup_and_restore/installing/about-installing-oadp.html" target="_blank">OADP</a> and <a href="https://velero.io/" target="_blank">Velero</a> documentation for more configuration options for the <code class="language-plaintext highlighter-rouge">Backup</code> custom resource.</p>

<ol>
  <li>After the backup is completed, check whether the <code class="language-plaintext highlighter-rouge">Backup</code> custom resource is updated with status information similar to the following:</li>
</ol>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">status</span><span class="pi">:</span>
  <span class="na">progress</span><span class="pi">:</span>
    <span class="na">itemsBackedUp</span><span class="pi">:</span> <span class="m">4</span>
    <span class="na">totalItems</span><span class="pi">:</span> <span class="m">4</span>
  <span class="na">csiVolumeSnapshotsCompleted</span><span class="pi">:</span> <span class="m">1</span>
  <span class="na">csiVolumeSnapshotsAttempted</span><span class="pi">:</span> <span class="m">1</span>
  <span class="na">phase</span><span class="pi">:</span> <span class="s">Completed</span>
</code></pre></div></div>

<p>If you are facing problems in creating a backup, see the <a href="https://docs.openshift.com/container-platform/4.12/backup_and_restore/application_backup_and_restore/troubleshooting.html" target="_blank">troubleshooting information for OADP</a>.</p>

<p><strong>Important:</strong> The name of your <code class="language-plaintext highlighter-rouge">Backup</code> custom resource is required to <a href="#restoring">restore</a> your instance from the backup.</p>

<h2 id="restoring">Restoring</h2>

<p>Restoring your instance might be required for a number of reasons:</p>

<ul>
  <li>Loss of the entire Kubernetes cluster.</li>
  <li>Loss of a namespace.</li>
  <li>Loss of the Event Endpoint Management data or the encryption key.</li>
  <li>To wind back the data to a previous state.</li>
</ul>

<p>You can restore a backed up instance as follows.</p>

<p>Before restoring your instance, the Event Endpoint Management operator must be installed again if it was lost, and the namespace for the Event Endpoint Management instance must be created again.</p>

<p><strong>Note:</strong> In the namespace that you are restoring to, ensure that you do not have an instance with the same name as the one you are restoring. You cannot restore an Event Endpoint Management instance in the namespace if another instance with the same name already exists there. If you are trying to rewind your data, you must <a href="../uninstalling">uninstall</a> the instance of Event Endpoint Management you are restoring.</p>

<p>To restore your instance, follow these steps.</p>

<ol>
  <li>
    <p>Create a <code class="language-plaintext highlighter-rouge">Restore</code> custom resource similar to the following YAML:</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="na">apiVersion</span><span class="pi">:</span> <span class="s">velero.io/v1</span>
 <span class="na">kind</span><span class="pi">:</span> <span class="s">Restore</span>
 <span class="na">metadata</span><span class="pi">:</span>
   <span class="na">name</span><span class="pi">:</span> <span class="s">&lt;unique_name&gt;</span>
   <span class="na">namespace</span><span class="pi">:</span> <span class="s">openshift-adp</span>
 <span class="na">spec</span><span class="pi">:</span>
   <span class="na">backupName</span><span class="pi">:</span> <span class="s">&lt;name_of_the_backup_to_restore&gt;</span>
   <span class="na">excludedResources</span><span class="pi">:</span> <span class="pi">[]</span>
   <span class="na">includedResources</span><span class="pi">:</span> <span class="pi">[]</span>
   <span class="na">restorePVs</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div>    </div>

    <p>See the <a href="https://docs.openshift.com/container-platform/4.12/backup_and_restore/application_backup_and_restore/installing/about-installing-oadp.html" target="_blank">OADP</a> and <a href="https://velero.io/" target="_blank">Velero</a> documentation for more configuration options for the <code class="language-plaintext highlighter-rouge">Restore</code> custom resource. For example, you can configure your custom resource to restore to an alternative namespace.</p>
  </li>
  <li>
    <p>When you are applying this custom resource, the OADP operator loads the backup from the backup location and re-creates the <code class="language-plaintext highlighter-rouge">&lt;eem_instance_name&gt;-ibm-eem-mek-bak</code> secret and <code class="language-plaintext highlighter-rouge">manager-storage-&lt;eem_instance_name&gt;-ibm-eem-manager-0</code> PVC. Before proceeding to the next step, check that both these resources are created and ensure that the resources are in <code class="language-plaintext highlighter-rouge">Ready</code> state.</p>

    <p><strong>Note:</strong> Velero removes some labels and annotations such as the <code class="language-plaintext highlighter-rouge">volume.beta.kubernetes.io/storage-provisioner</code> annotation when restoring PVCs. For some providers, this might leave the PVC in a <code class="language-plaintext highlighter-rouge">Pending</code> state. To fix this manually, add the <code class="language-plaintext highlighter-rouge">volume.beta.kubernetes.io/storage-provisioner</code> annotation back into the PVC with the same value as the <code class="language-plaintext highlighter-rouge">volume.kubernetes.io/storage-provisioner</code> annotation.</p>
  </li>
  <li>
    <p>After the resources are restored and are in <code class="language-plaintext highlighter-rouge">Ready</code> state, the Event Endpoint Management instance can be restored. To restore your instance, follow the steps for <a href="../../installing/installing/">installing</a> with the following additional requirements:</p>

    <ul>
      <li>Have the same instance name as the instance that was backed up.</li>
      <li>Use the <code class="language-plaintext highlighter-rouge">manager.storage.storageClassName</code> that matches the <code class="language-plaintext highlighter-rouge">storageClass</code> in use by the restored PVC or enter the restored PVC directly by using <code class="language-plaintext highlighter-rouge">manager.storage.existingClaimName</code>.</li>
    </ul>
  </li>
  <li>
    <p>Secure your access again by following guidance in the <a href="../../security/managing-access">managing access</a> and <a href="../../security/user-roles">managing roles</a> topics.</p>
  </li>
</ol>

<p>You can access the Event Endpoint Management instance again and see the data as it was when the instance was backed up.</p>

          </div>


          
        </section>

        <aside class="sidebar__right ">
          
          <div class="fixedSidebar">
            <nav class="toc">
              <ul class="toc__menu">
  <li><a href="#before-you-begin">Before you begin</a></li>
  <li><a href="#backing-up">Backing up</a></li>
  <li><a href="#restoring">Restoring</a></li>
</ul>
            </nav>
          </div>
          
        </aside>


      </div>
      <div class="pageEnd">
        
          
  <nav class="pagination">
    
      <div class="previous" onclick="window.open('/event-automation/eem/installing/post-installation/','_self')">
        <div class="container">
          <a href="/event-automation/eem/installing/post-installation/" class="pagination--pager" title="Previous Item: Post-installation tasks
">Previous</a>
          <h2 class="titlePreview">Post-installation tasks
</h2>
        </div>
      </div>
    
    
      <div class="next" onclick="window.open('/event-automation/eem/installing/uninstalling/','_self')">
        <div class="container">
          <a href="/event-automation/eem/installing/uninstalling/" class="pagination--pager" title="Next Item: Uninstalling
">Next</a>
          <h2 class="titlePreview">Uninstalling
</h2>
        </div>
      </div>
      
  </nav>

        
      </div>
    </div>


  </div> <!-- Main content -->

</main></div>


    
      <div class="page__footer">
          <footer>
            <!-- start custom footer snippets -->

<!-- end custom footer snippets -->

            
<div class="page__footer-copyright"><a href="https://www.ibm.com/privacy/us/en/" rel="nofollow" target="_blank">Privacy Policy</a>  &nbsp;© Copyright IBM Corporation 2023</br>
<a href="http://localhost:4000/event-automation/accessibility/" rel="nofollow" target="_blank">Accessibility</a> </br> <a href="http://localhost:4000/event-automation/notices/" rel="nofollow" target="_blank">Notices</a></br>
          </footer>
      </div>      
    


    
  <script src="/event-automation/assets/js/main.min.js"></script>
  <!-- <script src="https://use.fontawesome.com/releases/v5.1.0/js/all.js"></script> -->






<script src="/event-automation/assets/js/design.js"></script>





<script src="/event-automation/assets/js/lunr/lunr.min.js"></script>
<script src="/event-automation/assets/js/lunr/lunr-store.js"></script>
<script src="/event-automation/assets/js/lunr/lunr-en.js"></script>





    

    
  </body>
</html>

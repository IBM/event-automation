---
title: "Error when logging in to UI after changing CA certificate"
excerpt: "Logging in to UI fails with error `Failed to create SSL connection.`"
categories: troubleshooting
slug: changing-ca-certificate
toc: true
---

<!-- DRAFT COMMENT: Won't this problem also manifest with all the other manager endpoints, like admin api? -->
<!-- FUTURE: I'd like to update this page, and perhaps move it to a dedicated TLS troubleshooting section - this isn't the only difficulty users could get into with TLS config -->

## Symptoms

After the [CA certificate](../../security/config-tls#custom-ca-certificate-manager) is changed, when attempting to log in to the UI, the following error is presented.

```json
{
  "error_code" : 500,
  "message" : "Failed to create SSL connection"
}
```

## Causes

When an instance of the {{site.data.reuse.eem_manager}} is created, a CA certificate secret can be referenced in the `EventEndpointManagement` custom resource YAML. If a CA certificate secret is not referenced, then the {{site.data.reuse.eem_name}} operator creates a default one during the deployment process.

This failure occurs when the referenced CA certificate secret is changed or added after the instance has been created.

The {{site.data.reuse.eem_name}} operator will pick up on the change to the configuration. It will mount the new CA certificate secret into the instance. It will change the Issuer custom resource used by the certificate manager to generate the leaf certificates.

However, due to the way cert-manager works, the leaf certificates are not regenerated with the Issuer change. This means the new CA does not trust the previous leaf certificate, both of which are mounted into the {{site.data.reuse.eem_manager}} pod. This failure in trust causes the SSLHandshakeException.

## Resolving the problem

This error can be resolved by forcing a refresh of the leaf certificate.
To refresh the leaf certificate, delete the secret that is generated by the certificate manager. The name of the secret that is generated by the certificate manager is `<my-instance>-ibm-eem-manager`.

<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Planning your installation - IBM Event Automation</title>
<meta name="description" content="Planning your installation of Event Processing.">

<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="IBM Event Automation">
<meta property="og:url" content="http://localhost:4000/event-automation/ep/installing/planning/" />
<meta property="og:title" content="Event Processing | Planning your installation" />
<meta property="og:description" content="Planning your installation of Event Processing." />

<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="IBM Event Automation | Planning your installation" />




  <meta property="og:description" content="Planning your installation of Event Processing.">



  <meta property="og:image" content="http://localhost:4000/event-automation/assets/siteMeta/appIcon_og_fb.png">
  <meta name="twitter:image" content="http://localhost:4000/event-automation/assets/siteMeta/appIcon_og_square.png">



  <meta property="article:published_time" content="2023-06-28T12:13:19-04:00">






<link rel="canonical" href="http://localhost:4000/event-automation/ep/installing/planning/">





  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "http://localhost:4000/event-automation",
      "logo": "http://localhost:4000/event-automation/assets/siteMeta/appIcon_og_fb.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": null,
      "url": "http://localhost:4000/event-automation",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/event-automation/feed.xml" type="application/atom+xml" rel="alternate" title="IBM Event Automation Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/event-automation/assets/css/main.css">



<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<link rel="apple-touch-icon" sizes="180x180" href="http://localhost:4000/event-automation/assets/siteMeta/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-16x16.png">
<link rel="manifest" href="http://localhost:4000/event-automation/assets/siteMeta/site.webmanifest">
<link rel="mask-icon" href="http://localhost:4000/event-automation/assets/siteMeta/safari-pinned-tab.svg" color="#000000">
<link rel="shortcut icon" href="http://localhost:4000/event-automation/assets/siteMeta/favicon.ico">
<link rel="shortcut icon" type="image/png" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-16x16.png"/>
<link rel="shortcut icon" type="image/png" href="http://localhost:4000/event-automation/assets/siteMeta/favicon-32x32.png"/>
<meta name="msapplication-TileColor" content="#000000">
<meta name="msapplication-config" content="http://localhost:4000/event-automation/assets/siteMeta/browserconfig.xml">
<meta name="theme-color" content="#000000">



<link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:400,600%7CIBM+Plex+Serif:300,400,500%7CIBM+Plex+Mono:300,400,500,700" rel="stylesheet">

<!-- end custom head snippets -->

    <link rel="shortcut icon" type="image/x-icon" href="/event-automation/assets/favicon.ico" >
    
    <base target="_parent">

  </head>
  <script src="/event-automation/assets/animation/lottie.js" type="text/javascript"></script>
  <script src="/event-automation/assets/js/connectors.js"></script>


  
  <body onload="" class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    




<div id="masthead" class="masthead">
  <!--
  <div class="masthead__goToIBMCloud">
  <div>
    You are viewing the documentation for the container-native version of IBM Event Automation.
  </div>
    <a class="link" target="_self" href="https://cloud.ibm.com/docs/EventStreams?topic=EventStreams-getting-started">Looking for the managed service on IBM Cloud? Click here.</a>
</div>
-->
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="mastheadNav">

      


        <div class="mastheadTitle">
          
          <a class="site-title" href="/event-automation/" target="_self"><span>IBM</span>&nbsp;Event Automation</a>
          <div class="viewOnIBMcom">
            <a href="https://www.ibm.com/products/event-automation" target="_blank">View product page</a>
          </div>
        </div>









        <div class="mastheadControls">
            <div class="menuScrollContainer">

        

                <ul id="visible-links" class="visible-links">
                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/es/','_self')">
                      <a href="http://localhost:4000/event-automation/es/" >Event Streams</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/eem/','_self')">
                      <a href="http://localhost:4000/event-automation/eem/" >Endpoint Management</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item active" onclick="window.open('http://localhost:4000/event-automation/ep/','_self')">
                      <a href="http://localhost:4000/event-automation/ep/" >Event Processing</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/connectors/','_self')">
                      <a href="http://localhost:4000/event-automation/connectors/" >Connectors</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/tutorials/','_self')">
                      <a href="http://localhost:4000/event-automation/tutorials/" >Tutorials</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/api/','_self')">
                      <a href="http://localhost:4000/event-automation/api/" >APIs...</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/support/','_self')">
                      <a href="http://localhost:4000/event-automation/support/" >Support</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('http://localhost:4000/event-automation/search/','_self')">
                      <button aria-label="Search Button" role="button" id="searchButton" class="search__toggle " type="button" name="search Button">
                        <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                          <path
                            d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z"
                            transform="translate(-.01)"></path>
                        </svg>
                      </button>
                    </li>
                  

                  
                </ul>
        

      </div>
    </div>
      </nav>
    </div>
  </div>
</div>


    <div id="initial-content" class="initial-content" role="main">






<main id="main" class="mainContainer" role="main">
    
      <div id="subMenu" class="subMenu">
        <div tabindex="0" class="menuIcon" id="menuIcon">
          <svg id="mobileMenu" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
            <g id="bottomLine">
              <line class="burgerLine" x1="14" y1="29" x2="34" y2="29" />
            </g>
            <g id="middleLine">
              <line class="burgerLine" x1="14" y1="24" x2="34" y2="24" />
            </g>
            <g id="topLine">
              <line class="burgerLine" x1="14" y1="19" x2="34" y2="19" />
            </g>
          </svg>
        </div>
        <div id="mobileVersionShortcut" class="versionContainer" tabindex="0">
          <a id="mobileVersionPillCurrent" class="versionPill">1.0</a>
        </div>
      </div>
    
  



<div id="sidebarMask" class="sidebarMask">

  </div>
  <div id="sidebar" class="sidebar sticky">
      <div aria-label="Change Version" role="button" aria-expanded="false"
      
        id="versionDropdown"
        tabindex="0"
        class="versionsBar"
       >
          <div class="selectedVersion" id="selectedVersion">
            <div class="versionContainer" >
              
                <a id="versionPillCurrent" class="versionPill">1.0</a>
                <a class="versionChange">Change Version</a>
              
            </div>
          </div>
          


          <div class="allVersions" id="allVersions">
            <ul>

                

                        


                    
                    
                    

                    

                    <li class="version" data-url="/event-automation/ep/installing/planning/" onclick="openVersion('/event-automation/ep/installing/planning/','ep_1.0')">
                      <div class="pillContainer">
                        
                        <a tabindex="-1" href="/event-automation/ep/installing/planning/" class="versionPill active">1.0</a>
                      </div>
                      <div class="activeContainer">
                        
                          <img alt="" src="http://localhost:4000/event-automation/images/checkbox.svg" />
                        
                      </div>
                      <div class="latest">
                        Latest
                      </div>
                    </li>

                

            </ul>
          </div>
        </div>

  
    
      
      
      
    
    
      

<nav class="nav__list">
  
  <ul class="nav__items">

    
      <li>
        
          <span class="nav__sub-title">About</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/about/overview/" class="">Introduction</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/about/whats-new/" class="">What's new</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/about/key-concepts/" class="">Key concepts</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Installing</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/installing/prerequisites/" class="">Prerequisites</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/installing/planning/" class="active">Planning your installation</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/installing/installing/" class="">Installing in an online environment</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/installing/offline/" class="">Installing in an offline environment</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/installing/configuring/" class="">Configuring</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/installing/post-installation/" class="">Post-installation tasks</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/installing/backup-restore/" class="">Backing up and restoring</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/installing/uninstalling/" class="">Uninstalling</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/installing/upgrading/" class="">Upgrading</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Getting started with Authoring</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/getting-started/logging-in/" class="">Logging in</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/getting-started/canvas/" class="">Building a simple flow</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Security</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/security/managing-access/" class="">Managing access</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/security/user-roles/" class="">Managing user roles</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/security/verifying-signature/" class="">Verifying container image signatures</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/security/network-policies/" class="">Network policies</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/security/gdpr-considerations/" class="">Considerations for GDPR</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Administering</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/administering/flink-health/" class="">Monitoring Flink health</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Nodes</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/nodes/summary/" class="">Node overview</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/nodes/eventnodes/" class="">Events</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/nodes/processornodes/" class="">Processors</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/nodes/joins/" class="">Joins</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Deploying advanced flows</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/advanced/exporting-flows/" class="">Exporting and importing flows</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/advanced/deploying-development/" class="">Deploying jobs in development environments</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/advanced/deploying-production/" class="">Deploying jobs in production environments</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Reference</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/reference/api-reference/" class="">API reference for the CRDs</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Troubleshooting</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/troubleshooting/intro/" class="">Troubleshooting overview</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/event-automation/ep/troubleshooting/gathering-logs/" class="">Gathering logs</a>
            </li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>
    
  
  </div>


  <div class="mainContent">
    
    <div id="pageContainer" class="page" itemscope itemtype="http://schema.org/CreativeWork">
      
      <div class="page__inner-wrap  latestVersion">
      

        
        <section class="page__content pageSpacing" itemprop="text">
          
        
          <header>
            <h1 id="page-title" class="page__title" itemprop="headline">
              Planning your installation
</h1>
            
          </header>  
        
        

                    
          <div class="content">
            <p>Consider the following when planning your installation of Event Processing and IBM Operator for Apache Flink.</p>

<p>Decide the purpose of your deployment, for example, whether you want a starter deployment for testing purposes, or a production deployment.</p>

<ul>
  <li>Use the <a href="#event-processing-sample-deployments">Event Processing sample deployments</a> and the <a href="#flink-sample-deployments">Flink sample deployments</a> as a starting point to base your deployment on.</li>
  <li>For production deployments, and whenever you want your data to be saved in the event of a restart, set up <a href="#planning-for-persistent-storage">persistent storage</a>.</li>
  <li>Consider the options for <a href="#planning-for-security">securing</a> your deployment.</li>
  <li>Customize the <a href="../configuring">configuration</a> to suit your needs.</li>
</ul>

<h2 id="event-processing-sample-deployments">Event Processing sample deployments</h2>

<p>A number of sample configuration files are available in <a href="https://ibm.biz/ea-ep-samples">GitHub</a>, where you can select the GitHub tag for your Event Processing version, and then go to <code class="language-plaintext highlighter-rouge">/cr-examples/eventprocessing</code> to access the samples. These range from smaller deployments for non-production development or general experimentation to deployments that can handle a production workload.</p>

<p>The following Event Processing sample configurations are available to deploy:</p>
<ul>
  <li>Quick start: A development instance with reduced resources, using ephemeral storage and Local authentication.</li>
  <li>Production: A production instance with placeholders for persistence and OpenID Connect (OIDC) authentication.</li>
</ul>

<p>By default, both samples require the following resources:</p>

<table>
  <thead>
    <tr>
      <th>CPU request (cores)</th>
      <th>CPU limit (cores)</th>
      <th>Memory request (GiB)</th>
      <th>Memory limit (GiB)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1.0</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>2.0</td>
    </tr>
  </tbody>
</table>

<p>If you are <a href="../installing/#installing-an-event-processing-instance-by-using-the-web-console">installing</a> on the OpenShift Container Platform, you can view and apply the sample configurations in the web console.</p>

<p><strong>Important:</strong> For a production setup, the sample configuration values are for guidance only, and you might need to change them.</p>

<h2 id="flink-sample-deployments">Flink sample deployments</h2>

<p>A number of sample configuration files are available in <a href="https://ibm.biz/ea-flink-samples">GitHub</a>, where you can select the GitHub tag for your IBM Operator for Apache Flink version, and then go to <code class="language-plaintext highlighter-rouge">/cr-examples/flinkdeployment</code> to access the samples. These range from smaller deployments for non-production development or general experimentation to deployments that can handle a production workload.</p>

<p>The following table provides an overview of the Flink sample configurations and their resource requirements:</p>

<table>
  <thead>
    <tr>
      <th>Sample</th>
      <th>CPU limit per Task Manager</th>
      <th>Memory per Task Manager</th>
      <th>Slots per Task Manager</th>
      <th>Parallelism</th>
      <th>Max. number of flows per Task Manager</th>
      <th>Job Manager High Availability</th>
      <th>Chargeable cores (see <a href="/event-automation/support/licensing/#calculating-licenses-required">licensing</a>)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Quick Start</td>
      <td>0.5</td>
      <td>2GB</td>
      <td> 4</td>
      <td>1</td>
      <td> 2</td>
      <td> No</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Minimal Production</td>
      <td>1</td>
      <td>2GB</td>
      <td> 10</td>
      <td>1</td>
      <td> 5</td>
      <td> No</td>
      <td>2</td>
    </tr>
    <tr>
      <td>Production</td>
      <td>2</td>
      <td>4GB</td>
      <td> 10</td>
      <td>1</td>
      <td> 5</td>
      <td> Yes</td>
      <td>3</td>
    </tr>
    <tr>
      <td>Production - Flink Application Cluster</td>
      <td>2</td>
      <td>4GB</td>
      <td> 2</td>
      <td>Typically &gt; 1, set to 1 in the sample</td>
      <td> 1</td>
      <td> No, but can be configured</td>
      <td>3</td>
    </tr>
  </tbody>
</table>

<p>Points to consider for resource requirements:</p>

<ul>
  <li>
    <p>Both the Minimal Production and Production <a href="https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/concepts/flink-architecture/#flink-session-cluster" target="_blank">session cluster</a> samples are preconfigured with 10 Task Manager slots, allowing for a maximum of 5 Event Processing-authored flows to run at the same time on one Task Manager (one Java Virtual Machine).</p>

    <p><strong>Note:</strong> Each flow generates 2 Flink jobs, and each job is allocated its own Task Manager slot. If you have 6 or more flows, a new Task Manager will be automatically provisioned. With all session cluster configurations, horizontal scaling can happen, constrained only by resource availability. A Task Manager is terminated when all its flows are stopped in the Event Processing flow authoring UI, preventing unnecessary allocation of resources.</p>
  </li>
  <li>
    <p>All jobs in the same Task Manager compete for the CPU capacity of the Task Manager as defined in the sample. The amount of memory defined for a Task Manager is equally pre-allocated to each Task Manager slot.</p>

    <p>For example, if only 4 flows are running, 1/5 (20%) of the memory is not available to the running jobs. This is because the job parallelism is set to 1, and cannot be modified in the flow authoring UI.</p>

    <p><strong>Note:</strong> <code class="language-plaintext highlighter-rouge">spec.job.parallelism</code> is a Flink configuration parameter that enables a single job to be allocated up to as many Task Manager slots as the value of the parallelism parameter. For resource-intensive large jobs, the parallelism typically needs to be greater than 1. For more information about running large jobs, see the <a href="#flink-production-application-cluster-sample">Flink production application cluster sample</a>.</p>
  </li>
  <li>
    <p>To determine the right sample to use that meets your requirements, establish if your typical Event Processing flows can be handled by the Minimal Production or the Production sample. For this purpose, find out if the CPU requirements of a typical job, along with the CPU requirements of all the other competing jobs that may be running on the same Task Manager, do not exceed the allocated amount of CPU. In addition, the memory required by a job should not exceed 80% of the limit defined in the sample.</p>
  </li>
  <li>
    <p>What happens if the resource limits are exceeded?</p>
    <ul>
      <li>If the CPU limit is exceeded, Kubernetes CPU throttling is activated. When sustained, this can have a significant negative impact on performance. If the memory limit is exceeded, the Kubernetes <a href="https://kubernetes.io/docs/tasks/configure-pod-container/assign-memory-resource/#exceed-a-container-s-memory-limit" target="_blank">out-of-memory condition</a> can terminate the Task Manager container.</li>
      <li>A good practice is to avoid resource usage consistently exceeding 70% of CPU or 80% of memory capacity. The spare capacity is often enough to take care of short-lived CPU peaks, Flink checkpoint processing, and minor fluctuations in memory usage. If either of the thresholds is being exceeded after choosing the Minimal Production sample despite performance optimizations on a flow, consider the larger Production sample.</li>
    </ul>
  </li>
</ul>

<p>High-level criteria for choosing between Minimal Production and Production samples:</p>

<ul>
  <li>Minimal Production sample (per Task Manager: 1 CPU core, 2GB memory)
    <ul>
      <li>Jobs have smaller CPU and memory requirements.</li>
      <li>Message sizes are typically less than 1KB.</li>
      <li>Flows consist predominantly of filters and transformations.</li>
      <li>Workloads are stable and predictable.</li>
      <li>If the Flink Job Manager fails, some downtime is expected.</li>
    </ul>
  </li>
  <li>Production sample (per Task Manager: 2 CPU cores, 4GB memory)
    <ul>
      <li>Jobs may have higher CPU and memory requirements.</li>
      <li>Message sizes are typically greater than 1KB.</li>
      <li>Flows consist predominantly of interval joins and aggregations.</li>
      <li>Workloads may contain spikes, but not sustained very high event rates.</li>
      <li>You have stricter high availability requirements.</li>
    </ul>
  </li>
</ul>

<p>To create a configuration optimized for jobs that have high throughput, low latency requirements, or both, estimate your resource requirements, including network capacity.</p>

<h3 id="flink-quick-start-sample">Flink quick start sample</h3>

<p>The Quick Start sample is a Flink <a href="https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/concepts/flink-architecture/#flink-session-cluster" target="_blank">session cluster</a> suitable only for very small workloads that have no persistence or reliability requirements. It is capable of running in a single Flink Task Manager a maximum of 2 parallel flows submitted from the Event Processing flow authoring tool. If you need to run more than 2 flows, a new Task Manager will be automatically created.</p>

<h3 id="flink-minimal-production-sample">Flink minimal production sample</h3>

<p>The Minimal Production sample is a Flink <a href="https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/concepts/flink-architecture/#flink-session-cluster" target="_blank">session cluster</a> suitable for small production workloads. This sample does not configure Flink with High Availability for the Flink Job Manager.</p>

<h3 id="flink-production-sample">Flink production sample</h3>

<p>The Production sample is a Flink <a href="https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/concepts/flink-architecture/#flink-session-cluster" target="_blank">session cluster</a> suitable for large production workloads. This sample configures Flink with High Availability for the Flink Job Manager.</p>

<h3 id="flink-production-application-cluster-sample">Flink production application cluster sample</h3>

<p>The Production – Flink Application Cluster sample is suitable for running a single large Flink job in <a href="https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/concepts/flink-architecture/#flink-application-cluster" target="_blank">application cluster</a> mode. You can configure the job parallelism (<code class="language-plaintext highlighter-rouge">spec.job.parallelism</code>) and the number of slots (<code class="language-plaintext highlighter-rouge">spec.flinkConfiguration["taskmanager.numberOfTaskSlots"]</code>) to suit the characteristics of your flow and your workload. As this sample configures 2 slots, assuming your job is consuming events from a Kafka topic with 10 partitions, to run a large job you can select a parallelism of 10, which requires 5 Task Managers.</p>

<p>For information about using this sample, see <a href="../../advanced/deploying-production">Deploying jobs in production environments</a>.</p>

<h3 id="deploying-the-flink-pvc">Deploying the Flink PVC</h3>

<p>All Flink samples except the Quick start sample configure Flink to use persistent storage. Before installing a Flink instance (<code class="language-plaintext highlighter-rouge">FlinkDeployment</code> custom resource), the following <a href="https://docs.openshift.com/container-platform/4.12/rest_api/storage_apis/persistentvolumeclaim-v1.html" target="_blank">PersistentVolumeClaim</a> must be deployed as follows.</p>

<ol>
  <li>Log in to your Red Hat OpenShift Container Platform as a cluster administrator by using the <a href="https://docs.openshift.com/container-platform/4.12/cli_reference/openshift_cli/getting-started-cli.html#cli-logging-in_cli-developer-commands" target="_blank"><code class="language-plaintext highlighter-rouge">oc</code> CLI</a> (<code class="language-plaintext highlighter-rouge">oc login</code>).</li>
  <li>If the namespace where the Flink instance will be deployed does not exist yet, create it:
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>oc new-project &lt;your-namespace&gt;
</code></pre></div>    </div>
  </li>
  <li>Set the following environment variable to hold the namespace of the Flink instance:
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">FLINK_NAMESPACE</span><span class="o">=</span>&lt;your-namespace&gt;
</code></pre></div>    </div>
  </li>
  <li>Set the following environment variables to hold the name of the storage class and the storage capacity:
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">STORAGE_CLASS</span><span class="o">=</span>&lt;your-storage-class&gt;
<span class="nb">export </span><span class="nv">STORAGE_CAPACITY</span><span class="o">=</span>&lt;your-storage-capacity&gt;
</code></pre></div>    </div>
    <p>For example:</p>
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">STORAGE_CLASS</span><span class="o">=</span>rook-cephfs
<span class="nb">export </span><span class="nv">STORAGE_CAPACITY</span><span class="o">=</span>20GiB
</code></pre></div>    </div>
    <p><strong>Important:</strong> The storage class must comply with the <a href="../prerequisites/#storage-requirements-for-flink">Storage requirements for Flink</a>.</p>

    <p><strong>Important:</strong> The storage capacity needs to be large enough for Flink to store data, which includes the Flink <a href="https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/ops/state/checkpoints/#checkpoint-storage" target="_blank">checkpoints</a> and <a href="https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/ops/state/savepoints/" target="_blank">savepoints</a>, and the stateful event processing data.</p>
  </li>
  <li>
    <p>Run the following command to deploy the <code class="language-plaintext highlighter-rouge">PersistentVolumeClame</code>:</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">oc apply -n ${FLINK_NAMESPACE} -f - &lt;&lt; EOF</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">PersistentVolumeClaim</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">ibm-flink-pvc</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">accessModes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">ReadWriteMany</span>
  <span class="na">resources</span><span class="pi">:</span>
    <span class="na">requests</span><span class="pi">:</span>
      <span class="na">storage</span><span class="pi">:</span> <span class="s">${STORAGE_CAPACITY}</span>
  <span class="na">storageClassName</span><span class="pi">:</span> <span class="s">${STORAGE_CLASS}</span>
<span class="s">EOF</span>
</code></pre></div>    </div>
  </li>
</ol>

<p><strong>Note:</strong> The name of the PVC, <code class="language-plaintext highlighter-rouge">ibm-flink-pvc</code>, must match the name of the PVC configured in the <code class="language-plaintext highlighter-rouge">FlinkDeployment</code> custom resource. The samples which use persistent storage configure this PVC name.</p>

<h2 id="planning-for-persistent-storage">Planning for persistent storage</h2>

<p>If you plan to have persistent volumes, consider the disk space required for storage. TODO - what do we want to say here</p>

<p>You either need to create a <a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/#static" target="_blank">persistent volume</a>, persistent volume claim, or specify a storage class that supports <a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/#dynamic" target="_blank">dynamic provisioning</a>. Each component can use a different storage class to control how physical volumes are allocated.</p>

<p>For information about creating persistent volumes and creating a storage class that supports dynamic provisioning:</p>

<ul>
  <li>For OpenShift Container Platform, see the <a href="https://docs.openshift.com/container-platform/4.12/storage/understanding-persistent-storage.html" target="_blank">OpenShift Container Platform documentation</a>.</li>
</ul>

<p>You must have the Cluster Administrator role for creating persistent volumes or a storage class.</p>

<ul>
  <li>If these persistent volumes are to be created manually, this must be done by the system administrator before installing Event Processing. These will then be claimed from a central pool when the Event Processing instance is deployed. The installation will then claim a volume from this pool.</li>
  <li>If these persistent volumes are to be created automatically, ensure a <a href="https://docs.openshift.com/container-platform/4.12/storage/dynamic-provisioning.html" target="_blank">dynamic provisioner</a> is configured for the storage class you want to use. See <a href="../prerequisites/#data-storage-requirements">data storage requirements</a> for information about storage systems supported by Event Processing.</li>
</ul>

<p><strong>Important:</strong> When creating persistent volumes for Event Processing pods, ensure the <strong>Access mode</strong> is set to <code class="language-plaintext highlighter-rouge">ReadWriteOnce</code>. To use persistent storage, <a href="../configuring/#enabling-persistent-storage">configure the storage properties</a> in your <code class="language-plaintext highlighter-rouge">EventProcessing</code> custom resource.</p>

<p><strong>Important:</strong> For Flink, see <a href="../prerequisites/#storage-requirements-for-flink">Storage requirements for Flink</a>.</p>

<h2 id="planning-for-security">Planning for security</h2>

<p>There are two areas of security to consider when installing Event Processing:</p>

<ol>
  <li>The type of authentication the Event Processing UI uses. Event Processing UI supports locally defined authentication for testing purposes and OpenID Connect (OIDC) authentication for production purposes.
    <ul>
      <li>If you are configuring with locally defined authentication, the Event Processing UI uses a secret that has a list of username and passwords.</li>
      <li>If you are configuring with OIDC authentication, you must provide the required information to connect to your OIDC provider.</li>
    </ul>
  </li>
  <li>Certificates for the encryption of data in flight, that you must provide to the Event Processing deployment when you create an instance.
    <ul>
      <li>Provide a secret containing a CA certificate, we will use this to generate other certificates.</li>
      <li>Provide a secret that contains a CA certificate, server certificate, and key that has the required DNS names for accessing the deployment.</li>
      <li>The operator creates a CA certificate, which is used to generate all the other certificates.</li>
    </ul>
  </li>
</ol>

<p>To configure authentication, see <a href="../../security/managing-access">Managing access</a>.</p>

<p>To configure the certificates, see <a href="../configuring/#configuring-tls">Configuring TLS</a>.</p>

<h2 id="licensing">Licensing</h2>

<p>Licensing is typically based on Virtual Processing Cores (VPC).</p>

<p>For more information about available licenses, chargeable components, and tracking license usage, see the <a href="/event-automation/support/licensing">licensing reference</a>.</p>

          </div>


          
        </section>

        <aside class="sidebar__right ">
          
          <div class="fixedSidebar">
            <nav class="toc">
              <ul class="toc__menu">
  <li><a href="#event-processing-sample-deployments">Event Processing sample deployments</a></li>
  <li><a href="#flink-sample-deployments">Flink sample deployments</a>
    <ul>
      <li><a href="#flink-quick-start-sample">Flink quick start sample</a></li>
      <li><a href="#flink-minimal-production-sample">Flink minimal production sample</a></li>
      <li><a href="#flink-production-sample">Flink production sample</a></li>
      <li><a href="#flink-production-application-cluster-sample">Flink production application cluster sample</a></li>
      <li><a href="#deploying-the-flink-pvc">Deploying the Flink PVC</a></li>
    </ul>
  </li>
  <li><a href="#planning-for-persistent-storage">Planning for persistent storage</a></li>
  <li><a href="#planning-for-security">Planning for security</a></li>
  <li><a href="#licensing">Licensing</a></li>
</ul>
            </nav>
          </div>
          
        </aside>


      </div>
      <div class="pageEnd">
        
          
  <nav class="pagination">
    
      <div class="previous" onclick="window.open('/event-automation/ep/installing/prerequisites/','_self')">
        <div class="container">
          <a href="/event-automation/ep/installing/prerequisites/" class="pagination--pager" title="Previous Item: Prerequisites
">Previous</a>
          <h2 class="titlePreview">Prerequisites
</h2>
        </div>
      </div>
    
    
      <div class="next" onclick="window.open('/event-automation/ep/installing/installing/','_self')">
        <div class="container">
          <a href="/event-automation/ep/installing/installing/" class="pagination--pager" title="Next Item: Installing in an online environment
">Next</a>
          <h2 class="titlePreview">Installing in an online environment
</h2>
        </div>
      </div>
      
  </nav>

        
      </div>
    </div>


  </div> <!-- Main content -->

</main></div>


    
      <div class="page__footer">
          <footer>
            <!-- start custom footer snippets -->

<!-- end custom footer snippets -->

            
<div class="page__footer-copyright"><a href="https://www.ibm.com/privacy/us/en/" rel="nofollow" target="_blank">Privacy Policy</a>  &nbsp;© Copyright IBM Corporation 2023</br>
<a href="http://localhost:4000/event-automation/accessibility/" rel="nofollow" target="_blank">Accessibility</a> </br> <a href="http://localhost:4000/event-automation/notices/" rel="nofollow" target="_blank">Notices</a></br>
          </footer>
      </div>      
    


    
  <script src="/event-automation/assets/js/main.min.js"></script>
  <!-- <script src="https://use.fontawesome.com/releases/v5.1.0/js/all.js"></script> -->






<script src="/event-automation/assets/js/design.js"></script>





<script src="/event-automation/assets/js/lunr/lunr.min.js"></script>
<script src="/event-automation/assets/js/lunr/lunr-store.js"></script>
<script src="/event-automation/assets/js/lunr/lunr-en.js"></script>





    

    
  </body>
</html>
